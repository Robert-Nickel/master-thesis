var Je=Object.defineProperty;var Xe=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var Ge=(W,a,R)=>a in W?Je(W,a,{enumerable:!0,configurable:!0,writable:!0,value:R}):W[a]=R,$e=(W,a)=>{for(var R in a||(a={}))Qe.call(a,R)&&Ge(W,R,a[R]);if(Xe)for(var R of Xe(a))Ze.call(a,R)&&Ge(W,R,a[R]);return W};var je=(W,a,R)=>(Ge(W,typeof a!="symbol"?a+"":a,R),R),He=(W,a,R)=>{if(!a.has(W))throw TypeError("Cannot "+R)};var pe=(W,a,R)=>(He(W,a,"read from private field"),R?R.call(W):a.get(W)),Te=(W,a,R)=>{if(a.has(W))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(W):a.set(W,R)},Ee=(W,a,R,n)=>(He(W,a,"write to private field"),n?n.call(W,R):a.set(W,R),R);var De=(W,a,R)=>(He(W,a,"access private method"),R);import{S as SvelteComponent,i as init,s as safe_not_equal,F as create_slot,G as update_slot_base,H as get_all_dirty_from_scope,I as get_slot_changes,q as transition_in,o as transition_out,K as component_subscribe,L as createEventDispatcher,r as setContext,M as onDestroy,N as not_equal,O as handle_promise,l as empty,g as insert_hydration,P as update_await_block_branch,d as detach,Q as getContext,E as noop,w as create_component,x as claim_component,y as mount_component,n as group_outros,B as destroy_component,p as check_outros,e as element,c as claim_element,a as children,b as attr,R as add_render_callback,T as add_resize_listener,t as text,k as space,h as claim_text,m as claim_space,f as set_style,J as append_hydration,U as listen,V as run_all}from"./index-13322d17.js";import{r as readable,w as writable,b as base}from"./paths-fec0c59f.js";var workerSrc="/master-thesis/_app/assets/pdf.worker.min-38b21047.js",commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(W){if(W.__esModule)return W;var a=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(W).forEach(function(R){var n=Object.getOwnPropertyDescriptor(W,R);Object.defineProperty(a,R,n.get?n:{enumerable:!0,get:function(){return W[R]}})}),a}function commonjsRequire(W){throw new Error('Could not dynamically require "'+W+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(a,R){module.exports=R()})(commonjsGlobal,function(){return(()=>{var __webpack_modules__=[,(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VerbosityLevel=a.Util=a.UnknownErrorException=a.UnexpectedResponseException=a.UNSUPPORTED_FEATURES=a.TextRenderingMode=a.StreamType=a.RenderingIntentFlag=a.PermissionFlag=a.PasswordResponses=a.PasswordException=a.PageActionEventType=a.OPS=a.MissingPDFException=a.IsLittleEndianCached=a.IsEvalSupportedCached=a.InvalidPDFException=a.ImageKind=a.IDENTITY_MATRIX=a.FormatError=a.FontType=a.FONT_IDENTITY_MATRIX=a.DocumentActionEventType=a.CMapCompressionType=a.BaseException=a.AnnotationType=a.AnnotationStateModelType=a.AnnotationReviewState=a.AnnotationReplyType=a.AnnotationMode=a.AnnotationMarkedState=a.AnnotationFlag=a.AnnotationFieldFlag=a.AnnotationBorderStyleType=a.AnnotationActionEventType=a.AbortException=void 0,a.arrayByteLength=X,a.arraysToBytes=K,a.assert=m,a.bytesToString=U,a.createPromiseCapability=Ke,a.createValidAbsoluteUrl=d,a.escapeString=me,a.getModificationDate=Ye,a.getVerbosityLevel=z,a.info=Y,a.isArrayBuffer=xe,a.isArrayEqual=Ue,a.isAscii=ve,a.isSameOrigin=o,a.objectFromMap=te,a.objectSize=ne,a.setVerbosityLevel=$,a.shadow=A,a.string32=Z,a.stringToBytes=H,a.stringToPDFString=Ce,a.stringToUTF16BEString=be,a.stringToUTF8String=Se,a.unreachable=Q,a.utf8StringToString=fe,a.warn=ee,R(2);const n=[1,0,0,1,0,0];a.IDENTITY_MATRIX=n;const I=[.001,0,0,.001,0,0];a.FONT_IDENTITY_MATRIX=I;const L={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};a.RenderingIntentFlag=L;const O={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};a.AnnotationMode=O;const F={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};a.PermissionFlag=F;const y={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};a.TextRenderingMode=y;const t={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};a.ImageKind=t;const c={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};a.AnnotationType=c;const r={MARKED:"Marked",REVIEW:"Review"};a.AnnotationStateModelType=r;const f={MARKED:"Marked",UNMARKED:"Unmarked"};a.AnnotationMarkedState=f;const u={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};a.AnnotationReviewState=u;const v={GROUP:"Group",REPLY:"R"};a.AnnotationReplyType=v;const x={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};a.AnnotationFlag=x;const g={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};a.AnnotationFieldFlag=g;const q={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};a.AnnotationBorderStyleType=q;const j={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};a.AnnotationActionEventType=j;const D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};a.DocumentActionEventType=D;const w={O:"PageOpen",C:"PageClose"};a.PageActionEventType=w;const i={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};a.StreamType=i;const l={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};a.FontType=l;const P={ERRORS:0,WARNINGS:1,INFOS:5};a.VerbosityLevel=P;const E={NONE:0,BINARY:1,STREAM:2};a.CMapCompressionType=E;const S={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};a.OPS=S;const N={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};a.UNSUPPORTED_FEATURES=N;const k={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};a.PasswordResponses=k;let B=P.WARNINGS;function $(J){Number.isInteger(J)&&(B=J)}function z(){return B}function Y(J){B>=P.INFOS&&console.log(`Info: ${J}`)}function ee(J){B>=P.WARNINGS&&console.log(`Warning: ${J}`)}function Q(J){throw new Error(J)}function m(J,G){J||Q(G)}function o(J,G){let V;try{if(V=new URL(J),!V.origin||V.origin==="null")return!1}catch{return!1}const re=new URL(G,V);return V.origin===re.origin}function s(J){if(!J)return!1;switch(J.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function d(J,G=null,V=null){if(!J)return null;try{if(V&&typeof J=="string"){if(V.addDefaultProtocol&&J.startsWith("www.")){const ae=J.match(/\./g);ae&&ae.length>=2&&(J=`http://${J}`)}if(V.tryConvertEncoding)try{J=Se(J)}catch{}}const re=G?new URL(J,G):new URL(J);if(s(re))return re}catch{}return null}function A(J,G,V){return Object.defineProperty(J,G,{value:V,enumerable:!0,configurable:!0,writable:!1}),V}const C=function(){function G(V,re){this.constructor===G&&Q("Cannot initialize BaseException."),this.message=V,this.name=re}return G.prototype=new Error,G.constructor=G,G}();a.BaseException=C;class T extends C{constructor(G,V){super(G,"PasswordException"),this.code=V}}a.PasswordException=T;class e extends C{constructor(G,V){super(G,"UnknownErrorException"),this.details=V}}a.UnknownErrorException=e;class p extends C{constructor(G){super(G,"InvalidPDFException")}}a.InvalidPDFException=p;class _ extends C{constructor(G){super(G,"MissingPDFException")}}a.MissingPDFException=_;class b extends C{constructor(G,V){super(G,"UnexpectedResponseException"),this.status=V}}a.UnexpectedResponseException=b;class h extends C{constructor(G){super(G,"FormatError")}}a.FormatError=h;class M extends C{constructor(G){super(G,"AbortException")}}a.AbortException=M;function U(J){(typeof J!="object"||J===null||J.length===void 0)&&Q("Invalid argument for bytesToString");const G=J.length,V=8192;if(G<V)return String.fromCharCode.apply(null,J);const re=[];for(let ae=0;ae<G;ae+=V){const he=Math.min(ae+V,G),de=J.subarray(ae,he);re.push(String.fromCharCode.apply(null,de))}return re.join("")}function H(J){typeof J!="string"&&Q("Invalid argument for stringToBytes");const G=J.length,V=new Uint8Array(G);for(let re=0;re<G;++re)V[re]=J.charCodeAt(re)&255;return V}function X(J){if(J.length!==void 0)return J.length;if(J.byteLength!==void 0)return J.byteLength;Q("Invalid argument for arrayByteLength")}function K(J){const G=J.length;if(G===1&&J[0]instanceof Uint8Array)return J[0];let V=0;for(let he=0;he<G;he++)V+=X(J[he]);let re=0;const ae=new Uint8Array(V);for(let he=0;he<G;he++){let de=J[he];de instanceof Uint8Array||(typeof de=="string"?de=H(de):de=new Uint8Array(de));const Pe=de.byteLength;ae.set(de,re),re+=Pe}return ae}function Z(J){return String.fromCharCode(J>>24&255,J>>16&255,J>>8&255,J&255)}function ne(J){return Object.keys(J).length}function te(J){const G=Object.create(null);for(const[V,re]of J)G[V]=re;return G}function se(){const J=new Uint8Array(4);return J[0]=1,new Uint32Array(J.buffer,0,1)[0]===1}const le={get value(){return A(this,"value",se())}};a.IsLittleEndianCached=le;function ie(){try{return new Function(""),!0}catch{return!1}}const oe={get value(){return A(this,"value",ie())}};a.IsEvalSupportedCached=oe;const ce=[...Array(256).keys()].map(J=>J.toString(16).padStart(2,"0"));class ue{static makeHexColor(G,V,re){return`#${ce[G]}${ce[V]}${ce[re]}`}static transform(G,V){return[G[0]*V[0]+G[2]*V[1],G[1]*V[0]+G[3]*V[1],G[0]*V[2]+G[2]*V[3],G[1]*V[2]+G[3]*V[3],G[0]*V[4]+G[2]*V[5]+G[4],G[1]*V[4]+G[3]*V[5]+G[5]]}static applyTransform(G,V){const re=G[0]*V[0]+G[1]*V[2]+V[4],ae=G[0]*V[1]+G[1]*V[3]+V[5];return[re,ae]}static applyInverseTransform(G,V){const re=V[0]*V[3]-V[1]*V[2],ae=(G[0]*V[3]-G[1]*V[2]+V[2]*V[5]-V[4]*V[3])/re,he=(-G[0]*V[1]+G[1]*V[0]+V[4]*V[1]-V[5]*V[0])/re;return[ae,he]}static getAxialAlignedBoundingBox(G,V){const re=ue.applyTransform(G,V),ae=ue.applyTransform(G.slice(2,4),V),he=ue.applyTransform([G[0],G[3]],V),de=ue.applyTransform([G[2],G[1]],V);return[Math.min(re[0],ae[0],he[0],de[0]),Math.min(re[1],ae[1],he[1],de[1]),Math.max(re[0],ae[0],he[0],de[0]),Math.max(re[1],ae[1],he[1],de[1])]}static inverseTransform(G){const V=G[0]*G[3]-G[1]*G[2];return[G[3]/V,-G[1]/V,-G[2]/V,G[0]/V,(G[2]*G[5]-G[4]*G[3])/V,(G[4]*G[1]-G[5]*G[0])/V]}static apply3dTransform(G,V){return[G[0]*V[0]+G[1]*V[1]+G[2]*V[2],G[3]*V[0]+G[4]*V[1]+G[5]*V[2],G[6]*V[0]+G[7]*V[1]+G[8]*V[2]]}static singularValueDecompose2dScale(G){const V=[G[0],G[2],G[1],G[3]],re=G[0]*V[0]+G[1]*V[2],ae=G[0]*V[1]+G[1]*V[3],he=G[2]*V[0]+G[3]*V[2],de=G[2]*V[1]+G[3]*V[3],Pe=(re+de)/2,we=Math.sqrt((re+de)**2-4*(re*de-he*ae))/2,Re=Pe+we||1,Ae=Pe-we||1;return[Math.sqrt(Re),Math.sqrt(Ae)]}static normalizeRect(G){const V=G.slice(0);return G[0]>G[2]&&(V[0]=G[2],V[2]=G[0]),G[1]>G[3]&&(V[1]=G[3],V[3]=G[1]),V}static intersect(G,V){function re(Pe,we){return Pe-we}const ae=[G[0],G[2],V[0],V[2]].sort(re),he=[G[1],G[3],V[1],V[3]].sort(re),de=[];if(G=ue.normalizeRect(G),V=ue.normalizeRect(V),ae[0]===G[0]&&ae[1]===V[0]||ae[0]===V[0]&&ae[1]===G[0])de[0]=ae[1],de[2]=ae[2];else return null;if(he[0]===G[1]&&he[1]===V[1]||he[0]===V[1]&&he[1]===G[1])de[1]=he[1],de[3]=he[2];else return null;return de}static bezierBoundingBox(G,V,re,ae,he,de,Pe,we){const Re=[],Ae=[[],[]];let Fe,ke,Le,ge,Ie,Ne,Be,We;for(let qe=0;qe<2;++qe){if(qe===0?(ke=6*G-12*re+6*he,Fe=-3*G+9*re-9*he+3*Pe,Le=3*re-3*G):(ke=6*V-12*ae+6*de,Fe=-3*V+9*ae-9*de+3*we,Le=3*ae-3*V),Math.abs(Fe)<1e-12){if(Math.abs(ke)<1e-12)continue;ge=-Le/ke,0<ge&&ge<1&&Re.push(ge);continue}Be=ke*ke-4*Le*Fe,We=Math.sqrt(Be),!(Be<0)&&(Ie=(-ke+We)/(2*Fe),0<Ie&&Ie<1&&Re.push(Ie),Ne=(-ke-We)/(2*Fe),0<Ne&&Ne<1&&Re.push(Ne))}let Me=Re.length,ye;const Oe=Me;for(;Me--;)ge=Re[Me],ye=1-ge,Ae[0][Me]=ye*ye*ye*G+3*ye*ye*ge*re+3*ye*ge*ge*he+ge*ge*ge*Pe,Ae[1][Me]=ye*ye*ye*V+3*ye*ye*ge*ae+3*ye*ge*ge*de+ge*ge*ge*we;return Ae[0][Oe]=G,Ae[1][Oe]=V,Ae[0][Oe+1]=Pe,Ae[1][Oe+1]=we,Ae[0].length=Ae[1].length=Oe+2,[Math.min(...Ae[0]),Math.min(...Ae[1]),Math.max(...Ae[0]),Math.max(...Ae[1])]}}a.Util=ue;const _e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ce(J){if(J[0]>="\xEF"){let V;if(J[0]==="\xFE"&&J[1]==="\xFF"?V="utf-16be":J[0]==="\xFF"&&J[1]==="\xFE"?V="utf-16le":J[0]==="\xEF"&&J[1]==="\xBB"&&J[2]==="\xBF"&&(V="utf-8"),V)try{const re=new TextDecoder(V,{fatal:!0}),ae=H(J);return re.decode(ae)}catch(re){ee(`stringToPDFString: "${re}".`)}}const G=[];for(let V=0,re=J.length;V<re;V++){const ae=_e[J.charCodeAt(V)];G.push(ae?String.fromCharCode(ae):J.charAt(V))}return G.join("")}function me(J){return J.replace(/([()\\\n\r])/g,G=>G===`
`?"\\n":G==="\r"?"\\r":`\\${G}`)}function ve(J){return/^[\x00-\x7F]*$/.test(J)}function be(J){const G=["\xFE\xFF"];for(let V=0,re=J.length;V<re;V++){const ae=J.charCodeAt(V);G.push(String.fromCharCode(ae>>8&255),String.fromCharCode(ae&255))}return G.join("")}function Se(J){return decodeURIComponent(escape(J))}function fe(J){return unescape(encodeURIComponent(J))}function xe(J){return typeof J=="object"&&J!==null&&J.byteLength!==void 0}function Ue(J,G){if(J.length!==G.length)return!1;for(let V=0,re=J.length;V<re;V++)if(J[V]!==G[V])return!1;return!0}function Ye(J=new Date){return[J.getUTCFullYear().toString(),(J.getUTCMonth()+1).toString().padStart(2,"0"),J.getUTCDate().toString().padStart(2,"0"),J.getUTCHours().toString().padStart(2,"0"),J.getUTCMinutes().toString().padStart(2,"0"),J.getUTCSeconds().toString().padStart(2,"0")].join("")}function Ke(){const J=Object.create(null);let G=!1;return Object.defineProperty(J,"settled",{get(){return G}}),J.promise=new Promise(function(V,re){J.resolve=function(ae){G=!0,V(ae)},J.reject=function(ae){G=!0,re(ae)}}),J}},(W,a,R)=>{R(3)},(W,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isNodeJS=void 0;const R=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");a.isNodeJS=R},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var W,a,R,n,I,L,O,Ve;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_node_utils=__w_pdfjs_require__(8),_annotation_storage=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(15),_transport_stream=__w_pdfjs_require__(16),_xfa_text=__w_pdfjs_require__(17);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(y){createPDFNetworkStream=y}function getDocument(y){const t=new PDFDocumentLoadingTask;let c;if(typeof y=="string"||y instanceof URL)c={url:y};else if((0,_util.isArrayBuffer)(y))c={data:y};else if(y instanceof PDFDataRangeTransport)c={range:y};else{if(typeof y!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!y.url&&!y.data&&!y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");c=y}const r=Object.create(null);let f=null,u=null;for(const x in c){const g=c[x];switch(x){case"url":if(typeof window!="undefined")try{r[x]=new URL(g,window.location).href;continue}catch(q){(0,_util.warn)(`Cannot create valid URL: "${q}".`)}else if(typeof g=="string"||g instanceof URL){r[x]=g.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":f=g;continue;case"worker":u=g;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&g instanceof Buffer)r[x]=new Uint8Array(g);else{if(g instanceof Uint8Array)break;if(typeof g=="string")r[x]=(0,_util.stringToBytes)(g);else if(typeof g=="object"&&g!==null&&!isNaN(g.length))r[x]=new Uint8Array(g);else if((0,_util.isArrayBuffer)(g))r[x]=new Uint8Array(g);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}r[x]=g}if(r.rangeChunkSize=r.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=r.stopAtErrors!==!0,r.fontExtraProperties=r.fontExtraProperties===!0,r.pdfBug=r.pdfBug===!0,r.enableXfa=r.enableXfa===!0,(typeof r.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),Number.isInteger(r.maxImageSize)||(r.maxImageSize=-1),typeof r.useWorkerFetch!="boolean"&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof r.isEvalSupported!="boolean"&&(r.isEvalSupported=!0),typeof r.disableFontFace!="boolean"&&(r.disableFontFace=_is_node.isNodeJS),typeof r.useSystemFonts!="boolean"&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),typeof r.ownerDocument=="undefined"&&(r.ownerDocument=globalThis.document),typeof r.disableRange!="boolean"&&(r.disableRange=!1),typeof r.disableStream!="boolean"&&(r.disableStream=!1),typeof r.disableAutoFetch!="boolean"&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!u){const x={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};u=x.port?_PDFWorker.fromPort(x):new _PDFWorker(x),t._worker=u}const v=t.docId;return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const x=_fetchDocument(u,r,f,v),g=new Promise(function(q){let j;f?j=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},f):r.data||(j=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),q(j)});return Promise.all([x,g]).then(function([q,j]){if(t.destroyed)throw new Error("Loading aborted");const D=new _message_handler.MessageHandler(v,q,u.port),w=new WorkerTransport(D,t,j,r);t._transport=w,D.send("Ready",null)})}).catch(t._capability.reject),t}async function _fetchDocument(y,t,c,r){if(y.destroyed)throw new Error("Worker was destroyed");c&&(t.length=c.length,t.initialData=c.initialData,t.progressiveDone=c.progressiveDone,t.contentDispositionFilename=c.contentDispositionFilename);const f=await y.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.13.216",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties,enableXfa:t.enableXfa,useSystemFonts:t.useSystemFonts,cMapUrl:t.useWorkerFetch?t.cMapUrl:null,standardFontDataUrl:t.useWorkerFetch?t.standardFontDataUrl:null});if(y.destroyed)throw new Error("Worker was destroyed");return f}class PDFDocumentLoadingTask{static get idCounters(){return(0,_util.shadow)(this,"idCounters",{doc:0})}constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.idCounters.doc++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var t;this.destroyed=!0,await((t=this._transport)==null?void 0:t.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,c,r=!1,f=null){this.length=t,this.initialData=c,this.progressiveDone=r,this.contentDispositionFilename=f,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,c){for(const r of this._rangeListeners)r(t,c)}onDataProgress(t,c){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(t,c)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const c of this._progressiveReadListeners)c(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,c){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,c){this._pdfInfo=t,this._transport=c,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,c,r,f,u=!1){this._pageIndex=t,this._pageInfo=c,this._ownerDocument=f,this._transport=r,this._stats=u?new _display_utils.StatTimer:null,this._pdfBug=u,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:c=this.rotate,offsetX:r=0,offsetY:f=0,dontFlip:u=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:c,offsetX:r,offsetY:f,dontFlip:u})}getAnnotations({intent:t="display"}={}){const c=this._transport.getRenderingIntent(t);let r=this._annotationPromises.get(c.cacheKey);return r||(r=this._transport.getAnnotations(this._pageIndex,c.renderingIntent),this._annotationPromises.set(c.cacheKey,r),r=r.then(f=>{for(const u of f)u.titleObj!==void 0&&Object.defineProperty(u,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),u.titleObj.str}}),u.contentsObj!==void 0&&Object.defineProperty(u,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),u.contentsObj.str}});return f})),r}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:c,intent:r="display",annotationMode:f=_util.AnnotationMode.ENABLE,transform:u=null,imageLayer:v=null,canvasFactory:x=null,background:g=null,optionalContentConfigPromise:q=null,annotationCanvasMap:j=null}){var N,k;((N=arguments[0])==null?void 0:N.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&f===_util.AnnotationMode.ENABLE&&(f=_util.AnnotationMode.ENABLE_FORMS)),((k=arguments[0])==null?void 0:k.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&f===_util.AnnotationMode.ENABLE&&(f=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const D=this._transport.getRenderingIntent(r,f);this.pendingCleanup=!1,q||(q=this._transport.getOptionalContentConfig());let w=this._intentStates.get(D.cacheKey);w||(w=Object.create(null),this._intentStates.set(D.cacheKey,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const i=x||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),l=!!(D.renderingIntent&_util.RenderingIntentFlag.PRINT);w.displayReadyCapability||(w.displayReadyCapability=(0,_util.createPromiseCapability)(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(D));const P=B=>{w.renderTasks.delete(E),(this.cleanupAfterRender||l)&&(this.pendingCleanup=!0),this._tryCleanup(),B?(E.capability.reject(B),this._abortOperatorList({intentState:w,reason:B instanceof Error?B:new Error(B)})):E.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},E=new InternalRenderTask({callback:P,params:{canvasContext:t,viewport:c,transform:u,imageLayer:v,background:g},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:j,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:i,useRequestAnimationFrame:!l,pdfBug:this._pdfBug});(w.renderTasks||(w.renderTasks=new Set)).add(E);const S=E.task;return Promise.all([w.displayReadyCapability.promise,q]).then(([B,$])=>{if(this.pendingCleanup){P();return}this._stats&&this._stats.time("Rendering"),E.initializeGraphics({transparency:B,optionalContentConfig:$}),E.operatorListChanged()}).catch(P),S}getOperatorList({intent:t="display",annotationMode:c=_util.AnnotationMode.ENABLE}={}){function r(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(v))}const f=this._transport.getRenderingIntent(t,c,!0);let u=this._intentStates.get(f.cacheKey);u||(u=Object.create(null),this._intentStates.set(f.cacheKey,u));let v;return u.opListReadCapability||(v=Object.create(null),v.operatorListChanged=r,u.opListReadCapability=(0,_util.createPromiseCapability)(),(u.renderTasks||(u.renderTasks=new Set)).add(v),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(f)),u.opListReadCapability.promise}streamTextContent({disableCombineTextItems:t=!1,includeMarkedContent:c=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:t!==!0,includeMarkedContent:c===!0},{highWaterMark:100,size(f){return f.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const c=this.streamTextContent(t);return new Promise(function(r,f){function u(){v.read().then(function({value:g,done:q}){if(q){r(x);return}Object.assign(x.styles,g.styles),x.items.push(...g.items),u()},f)}const v=c.getReader(),x={items:[],styles:Object.create(null)};u()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const t=[];for(const c of this._intentStates.values())if(this._abortOperatorList({intentState:c,reason:new Error("Page was destroyed."),force:!0}),!c.opListReadCapability)for(const r of c.renderTasks)t.push(r.completed),r.cancel();return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:c,operatorList:r}of this._intentStates.values())if(c.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(t,c){const r=this._intentStates.get(c);!r||(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(t))}_renderPageChunk(t,c){for(let r=0,f=t.length;r<f;r++)c.operatorList.fnArray.push(t.fnArray[r]),c.operatorList.argsArray.push(t.argsArray[r]);c.operatorList.lastChunk=t.lastChunk;for(const r of c.renderTasks)r.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:c}){const f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:c,annotationStorage:t&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),u=this._intentStates.get(c);u.streamReader=f;const v=()=>{f.read().then(({value:x,done:g})=>{if(g){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(x,u),v())},x=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const g of u.renderTasks)g.operatorListChanged();this._tryCleanup()}if(u.displayReadyCapability)u.displayReadyCapability.reject(x);else if(u.opListReadCapability)u.opListReadCapability.reject(x);else throw x}})};v()}_abortOperatorList({intentState:t,reason:c,force:r=!1}){if(!!t.streamReader){if(!r){if(t.renderTasks.size>0)return;if(c instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:c,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(t.streamReader.cancel(new _util.AbortException(c.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[f,u]of this._intentStates)if(u===t){this._intentStates.delete(f);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(t,c){const r={data:structuredClone(t,c)};this._deferred.then(()=>{for(const f of this._listeners)f.call(this,r)})}addEventListener(t,c){this._listeners.push(c)}removeEventListener(t,c){const r=this._listeners.indexOf(c);this._listeners.splice(r,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const y=(W=document==null?void 0:document.currentScript)==null?void 0:W.src;y&&(PDFWorkerUtil.fallbackWorkerSrc=y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(y){const t=`importScripts("${y}");`;return URL.createObjectURL(new Blob([t]))}}class _PDFWorker{static get _workerPorts(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}constructor({name:y=null,port:t=null,verbosity:c=(0,_util.getVerbosityLevel)()}={}){if(t&&_PDFWorker._workerPorts.has(t))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=y,this.destroyed=!1,this.verbosity=c,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t){_PDFWorker._workerPorts.set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(y){this._port=y,this._messageHandler=new _message_handler.MessageHandler("main","worker",y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker!="undefined"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let y=_PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,y)||(y=PDFWorkerUtil.createCDNWrapper(new URL(y,window.location).href));const t=new Worker(y),c=new _message_handler.MessageHandler("main","worker",t),r=()=>{t.removeEventListener("error",f),c.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},f=()=>{this._webWorker||r()};t.addEventListener("error",f),c.on("test",v=>{if(t.removeEventListener("error",f),this.destroyed){r();return}v?(this._messageHandler=c,this._port=t,this._webWorker=t,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),c.destroy(),t.terminate())}),c.on("ready",v=>{if(t.removeEventListener("error",f),this.destroyed){r();return}try{u()}catch{this._setupFakeWorker()}});const u=()=>{const v=new Uint8Array([255]);try{c.send("test",v,[v.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),v[0]=0,c.send("test",v)}};u();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const c=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(c+"_worker",c,t);y.setup(r,t);const f=new _message_handler.MessageHandler(c,c+"_worker",t);this._messageHandler=f,this._readyCapability.resolve(),f.send("configure",{verbosity:this.verbosity})}).catch(y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${y.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(y){if(!(y!=null&&y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(y.port)?this._workerPorts.get(y.port):new _PDFWorker(y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var y;try{return((y=globalThis.pdfjsWorker)==null?void 0:y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=_PDFWorker,_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(t,c,r,f){Te(this,a,null);Te(this,R,new Map);Te(this,n,new Map);Te(this,I,null);this.messageHandler=t,this.loadingTask=c,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:c.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:f.ownerDocument,styleElement:f.styleElement}),this._params=f,f.useWorkerFetch||(this.CMapReaderFactory=new f.CMapReaderFactory({baseUrl:f.cMapUrl,isCompressed:f.cMapPacked}),this.StandardFontDataFactory=new f.StandardFontDataFactory({baseUrl:f.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return pe(this,a)}getRenderingIntent(t,c=_util.AnnotationMode.ENABLE,r=!1){let f=_util.RenderingIntentFlag.DISPLAY,u="";switch(t){case"any":f=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":f=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(c){case _util.AnnotationMode.DISABLE:f+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:f+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:f+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,u=this.annotationStorage.lastModified;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${c}`)}return r&&(f+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:f,cacheKey:`${f}_${u}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of pe(this,R).values())t.push(r._destroy());pe(this,R).clear(),pe(this,n).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const c=this.messageHandler.sendWithPromise("Terminate",null);return t.push(c),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Ee(this,I,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:c}=this;t.on("GetReader",(r,f)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=u=>{this._lastProgress={loaded:u.loaded,total:u.total}},f.onPull=()=>{this._fullReader.read().then(function({value:u,done:v}){if(v){f.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(u),"GetReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{f.error(u)})},f.onCancel=u=>{this._fullReader.cancel(u),f.ready.catch(v=>{if(!this.destroyed)throw v})}}),t.on("ReaderHeadersReady",r=>{const f=(0,_util.createPromiseCapability)(),u=this._fullReader;return u.headersReady.then(()=>{var v;(!u.isStreamingSupported||!u.isRangeSupported)&&(this._lastProgress&&((v=c.onProgress)==null||v.call(c,this._lastProgress)),u.onProgress=x=>{var g;(g=c.onProgress)==null||g.call(c,{loaded:x.loaded,total:x.total})}),f.resolve({isStreamingSupported:u.isStreamingSupported,isRangeSupported:u.isRangeSupported,contentLength:u.contentLength})},f.reject),f.promise}),t.on("GetRangeReader",(r,f)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const u=this._networkStream.getRangeReader(r.begin,r.end);if(!u){f.close();return}f.onPull=()=>{u.read().then(function({value:v,done:x}){if(x){f.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(v),"GetRangeReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(v),1,[v])}).catch(v=>{f.error(v)})},f.onCancel=v=>{u.cancel(v),f.ready.catch(x=>{if(!this.destroyed)throw x})}}),t.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,c._capability.resolve(new PDFDocumentProxy(r,this))}),t.on("DocException",function(r){let f;switch(r.name){case"PasswordException":f=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":f=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":f=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":f=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":f=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}c._capability.reject(f)}),t.on("PasswordRequest",r=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),c.onPassword){const f=u=>{u instanceof Error?this._passwordCapability.reject(u):this._passwordCapability.resolve({password:u})};try{c.onPassword(f,r.code)}catch(u){this._passwordCapability.reject(u)}}else this._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return this._passwordCapability.promise}),t.on("DataLoaded",r=>{var f;(f=c.onProgress)==null||f.call(c,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),t.on("StartRenderPage",r=>{if(this.destroyed)return;pe(this,R).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),t.on("commonobj",([r,f,u])=>{var v;if(!this.destroyed&&!this.commonObjs.has(r))switch(f){case"Font":const x=this._params;if("error"in u){const j=u.error;(0,_util.warn)(`Error during font loading: ${j}`),this.commonObjs.resolve(r,j);break}let g=null;x.pdfBug&&((v=globalThis.FontInspector)==null?void 0:v.enabled)&&(g={registerFont(j,D){globalThis.FontInspector.fontAdded(j,D)}});const q=new _font_loader.FontFaceObject(u,{isEvalSupported:x.isEvalSupported,disableFontFace:x.disableFontFace,ignoreErrors:x.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:g});this.fontLoader.bind(q).catch(j=>t.sendWithPromise("FontFallback",{id:r})).finally(()=>{!x.fontExtraProperties&&q.data&&(q.data=null),this.commonObjs.resolve(r,q)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,u);break;default:throw new Error(`Got unknown common object type ${f}`)}}),t.on("obj",([r,f,u,v])=>{var g;if(this.destroyed)return;const x=pe(this,R).get(f);if(!x.objs.has(r))switch(u){case"Image":x.objs.resolve(r,v);const q=8e6;((g=v==null?void 0:v.data)==null?void 0:g.length)>q&&(x.cleanupAfterRender=!0);break;case"Pattern":x.objs.resolve(r,v);break;default:throw new Error(`Got unknown object type ${u}`)}}),t.on("DocProgress",r=>{var f;this.destroyed||(f=c.onProgress)==null||f.call(c,{loaded:r.loaded,total:r.total})}),t.on("DocStats",r=>{this.destroyed||Ee(this,a,Object.freeze({streamTypes:Object.freeze(r.streamTypes),fontTypes:Object.freeze(r.fontTypes)}))}),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:t}){var c,r;this.destroyed||(r=(c=this.loadingTask).onUnsupportedFeature)==null||r.call(c,t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const c=t-1,r=pe(this,n).get(c);if(r)return r;const f=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(u=>{if(this.destroyed)throw new Error("Transport destroyed");const v=new PDFPageProxy(c,u,this,this._params.ownerDocument,this._params.pdfBug);return pe(this,R).set(c,v),v});return pe(this,n).set(c,f),f}getPageIndex(t){return typeof t!="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,c){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:c})}saveDocument(){var t,c;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(c=(t=this._fullReader)==null?void 0:t.filename)!=null?c:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return pe(this,I)||Ee(this,I,this.messageHandler.sendWithPromise("GetMetadata",null).then(t=>{var c,r,f,u;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:(r=(c=this._fullReader)==null?void 0:c.filename)!=null?r:null,contentLength:(u=(f=this._fullReader)==null?void 0:f.contentLength)!=null?u:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const c of pe(this,R).values())if(!c.cleanup())throw new Error(`startCleanup: Page ${c.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),Ee(this,I,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}a=new WeakMap,R=new WeakMap,n=new WeakMap,I=new WeakMap;class PDFObjects{constructor(){Te(this,O);Te(this,L,Object.create(null))}get(t,c=null){if(c){const f=De(this,O,Ve).call(this,t);return f.capability.promise.then(()=>c(f.data)),null}const r=pe(this,L)[t];if(!(r!=null&&r.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${t}.`);return r.data}has(t){const c=pe(this,L)[t];return(c==null?void 0:c.capability.settled)||!1}resolve(t,c=null){const r=De(this,O,Ve).call(this,t);r.data=c,r.capability.resolve()}clear(){Ee(this,L,Object.create(null))}}L=new WeakMap,O=new WeakSet,Ve=function(t){const c=pe(this,L)[t];return c||(pe(this,L)[t]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(t){this._internalRenderTask=t,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{static get canvasInUse(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}constructor({callback:t,params:c,objs:r,commonObjs:f,annotationCanvasMap:u,operatorList:v,pageIndex:x,canvasFactory:g,useRequestAnimationFrame:q=!1,pdfBug:j=!1}){this.callback=t,this.params=c,this.objs=r,this.commonObjs=f,this.annotationCanvasMap=u,this.operatorListIdx=null,this.operatorList=v,this._pageIndex=x,this.canvasFactory=g,this._pdfBug=j,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=q===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=c.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:c}){var g;if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.canvasInUse.add(this._canvas)}this._pdfBug&&((g=globalThis.StepperManager)==null?void 0:g.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:f,transform:u,imageLayer:v,background:x}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,v,c,this.annotationCanvasMap),this.gfx.beginDrawing({transform:u,viewport:f,transparency:t,background:x}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback())))}}const version="2.13.216";exports.version=version;const build="399a0ec60";exports.build=build},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StatTimer=a.RenderingCancelledException=a.PixelsPerInch=a.PageViewport=a.PDFDateString=a.DOMStandardFontDataFactory=a.DOMSVGFactory=a.DOMCanvasFactory=a.DOMCMapReaderFactory=void 0,a.deprecated=i,a.getFilenameFromUrl=g,a.getPdfFilenameFromUrl=q,a.getXfaPageViewport=E,a.isDataScheme=v,a.isPdfFile=x,a.isValidFetchUrl=D,a.loadScript=w;var n=R(6),I=R(1);const L="http://www.w3.org/2000/svg",S=class{};let O=S;je(O,"CSS",96),je(O,"PDF",72),je(O,"PDF_TO_CSS_UNITS",S.CSS/S.PDF),a.PixelsPerInch=O;class F extends n.BaseCanvasFactory{constructor({ownerDocument:k=globalThis.document}={}){super(),this._document=k}_createCanvas(k,B){const $=this._document.createElement("canvas");return $.width=k,$.height=B,$}}a.DOMCanvasFactory=F;async function y(N,k=!1){if(D(N,document.baseURI)){const B=await fetch(N);if(!B.ok)throw new Error(B.statusText);return k?new Uint8Array(await B.arrayBuffer()):(0,I.stringToBytes)(await B.text())}return new Promise((B,$)=>{const z=new XMLHttpRequest;z.open("GET",N,!0),k&&(z.responseType="arraybuffer"),z.onreadystatechange=()=>{if(z.readyState===XMLHttpRequest.DONE){if(z.status===200||z.status===0){let Y;if(k&&z.response?Y=new Uint8Array(z.response):!k&&z.responseText&&(Y=(0,I.stringToBytes)(z.responseText)),Y){B(Y);return}}$(new Error(z.statusText))}},z.send(null)})}class t extends n.BaseCMapReaderFactory{_fetchData(k,B){return y(k,this.isCompressed).then($=>({cMapData:$,compressionType:B}))}}a.DOMCMapReaderFactory=t;class c extends n.BaseStandardFontDataFactory{_fetchData(k){return y(k,!0)}}a.DOMStandardFontDataFactory=c;class r extends n.BaseSVGFactory{_createSVG(k){return document.createElementNS(L,k)}}a.DOMSVGFactory=r;class f{constructor({viewBox:k,scale:B,rotation:$,offsetX:z=0,offsetY:Y=0,dontFlip:ee=!1}){this.viewBox=k,this.scale=B,this.rotation=$,this.offsetX=z,this.offsetY=Y;const Q=(k[2]+k[0])/2,m=(k[3]+k[1])/2;let o,s,d,A;switch($%=360,$<0&&($+=360),$){case 180:o=-1,s=0,d=0,A=1;break;case 90:o=0,s=1,d=1,A=0;break;case 270:o=0,s=-1,d=-1,A=0;break;case 0:o=1,s=0,d=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ee&&(d=-d,A=-A);let C,T,e,p;o===0?(C=Math.abs(m-k[1])*B+z,T=Math.abs(Q-k[0])*B+Y,e=Math.abs(k[3]-k[1])*B,p=Math.abs(k[2]-k[0])*B):(C=Math.abs(Q-k[0])*B+z,T=Math.abs(m-k[1])*B+Y,e=Math.abs(k[2]-k[0])*B,p=Math.abs(k[3]-k[1])*B),this.transform=[o*B,s*B,d*B,A*B,C-o*B*Q-d*B*m,T-s*B*Q-A*B*m],this.width=e,this.height=p}clone({scale:k=this.scale,rotation:B=this.rotation,offsetX:$=this.offsetX,offsetY:z=this.offsetY,dontFlip:Y=!1}={}){return new f({viewBox:this.viewBox.slice(),scale:k,rotation:B,offsetX:$,offsetY:z,dontFlip:Y})}convertToViewportPoint(k,B){return I.Util.applyTransform([k,B],this.transform)}convertToViewportRectangle(k){const B=I.Util.applyTransform([k[0],k[1]],this.transform),$=I.Util.applyTransform([k[2],k[3]],this.transform);return[B[0],B[1],$[0],$[1]]}convertToPdfPoint(k,B){return I.Util.applyInverseTransform([k,B],this.transform)}}a.PageViewport=f;class u extends I.BaseException{constructor(k,B){super(k,"RenderingCancelledException"),this.type=B}}a.RenderingCancelledException=u;function v(N){const k=N.length;let B=0;for(;B<k&&N[B].trim()==="";)B++;return N.substring(B,B+5).toLowerCase()==="data:"}function x(N){return typeof N=="string"&&/\.pdf$/i.test(N)}function g(N){const k=N.indexOf("#"),B=N.indexOf("?"),$=Math.min(k>0?k:N.length,B>0?B:N.length);return N.substring(N.lastIndexOf("/",$)+1,$)}function q(N,k="document.pdf"){if(typeof N!="string")return k;if(v(N))return(0,I.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),k;const B=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,$=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,z=B.exec(N);let Y=$.exec(z[1])||$.exec(z[2])||$.exec(z[3]);if(Y&&(Y=Y[0],Y.includes("%")))try{Y=$.exec(decodeURIComponent(Y))[0]}catch{}return Y||k}class j{constructor(){this.started=Object.create(null),this.times=[]}time(k){k in this.started&&(0,I.warn)(`Timer is already running for ${k}`),this.started[k]=Date.now()}timeEnd(k){k in this.started||(0,I.warn)(`Timer has not been started for ${k}`),this.times.push({name:k,start:this.started[k],end:Date.now()}),delete this.started[k]}toString(){const k=[];let B=0;for(const $ of this.times){const z=$.name;z.length>B&&(B=z.length)}for(const $ of this.times){const z=$.end-$.start;k.push(`${$.name.padEnd(B)} ${z}ms
`)}return k.join("")}}a.StatTimer=j;function D(N,k){try{const{protocol:B}=k?new URL(N,k):new URL(N);return B==="http:"||B==="https:"}catch{return!1}}function w(N,k=!1){return new Promise((B,$)=>{const z=document.createElement("script");z.src=N,z.onload=function(Y){k&&z.remove(),B(Y)},z.onerror=function(){$(new Error(`Cannot load script at: ${z.src}`))},(document.head||document.documentElement).appendChild(z)})}function i(N){console.log("Deprecated API usage: "+N)}let l;class P{static toDateObject(k){if(!k||typeof k!="string")return null;l||(l=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const B=l.exec(k);if(!B)return null;const $=parseInt(B[1],10);let z=parseInt(B[2],10);z=z>=1&&z<=12?z-1:0;let Y=parseInt(B[3],10);Y=Y>=1&&Y<=31?Y:1;let ee=parseInt(B[4],10);ee=ee>=0&&ee<=23?ee:0;let Q=parseInt(B[5],10);Q=Q>=0&&Q<=59?Q:0;let m=parseInt(B[6],10);m=m>=0&&m<=59?m:0;const o=B[7]||"Z";let s=parseInt(B[8],10);s=s>=0&&s<=23?s:0;let d=parseInt(B[9],10)||0;return d=d>=0&&d<=59?d:0,o==="-"?(ee+=s,Q+=d):o==="+"&&(ee-=s,Q-=d),new Date(Date.UTC($,z,Y,ee,Q,m))}}a.PDFDateString=P;function E(N,{scale:k=1,rotation:B=0}){const{width:$,height:z}=N.attributes.style,Y=[0,0,parseInt($),parseInt(z)];return new f({viewBox:Y,scale:k,rotation:B})}},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseStandardFontDataFactory=a.BaseSVGFactory=a.BaseCanvasFactory=a.BaseCMapReaderFactory=void 0;var n=R(1);class I{constructor(){this.constructor===I&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,c){if(t<=0||c<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(t,c);return{canvas:r,context:r.getContext("2d")}}reset(t,c,r){if(!t.canvas)throw new Error("Canvas is not specified");if(c<=0||r<=0)throw new Error("Invalid canvas size");t.canvas.width=c,t.canvas.height=r}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,c){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}a.BaseCanvasFactory=I;class L{constructor({baseUrl:t=null,isCompressed:c=!1}){this.constructor===L&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=c}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const c=this.baseUrl+t+(this.isCompressed?".bcmap":""),r=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(c,r).catch(f=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${c}`)})}_fetchData(t,c){(0,n.unreachable)("Abstract method `_fetchData` called.")}}a.BaseCMapReaderFactory=L;class O{constructor({baseUrl:t=null}){this.constructor===O&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const c=`${this.baseUrl}${t}`;return this._fetchData(c).catch(r=>{throw new Error(`Unable to load font data at: ${c}`)})}_fetchData(t){(0,n.unreachable)("Abstract method `_fetchData` called.")}}a.BaseStandardFontDataFactory=O;class F{constructor(){this.constructor===F&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,c){if(t<=0||c<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),r.setAttribute("width",`${t}px`),r.setAttribute("height",`${c}px`),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${c}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,n.unreachable)("Abstract method `_createSVG` called.")}}a.BaseSVGFactory=F},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FontLoader=a.FontFaceObject=void 0;var n=R(1);class I{constructor({docId:y,onUnsupportedFeature:t,ownerDocument:c=globalThis.document,styleElement:r=null}){this.constructor===I&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=y,this._onUnsupportedFeature=t,this._document=c,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(y){this.nativeFontFaces.push(y),this._document.fonts.add(y)}insertRule(y){let t=this.styleElement;t||(t=this.styleElement=this._document.createElement("style"),t.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(t));const c=t.sheet;c.insertRule(y,c.cssRules.length)}clear(){for(const y of this.nativeFontFaces)this._document.fonts.delete(y);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(y){if(y.attached||y.missingFile)return;if(y.attached=!0,this.isFontLoadingAPISupported){const c=y.createNativeFontFace();if(c){this.addNativeFontFace(c);try{await c.loaded}catch(r){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${c.family}': '${r}'.`),y.disableFontFace=!0,r}}return}const t=y.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(c=>{const r=this._queueLoadingCallback(c);this._prepareFontLoadEvent([t],[y],r)})}}_queueLoadingCallback(y){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var t;const y=!!((t=this._document)!=null&&t.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",y)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(y,t,c){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let L;a.FontLoader=L,a.FontLoader=L=class extends I{constructor(y){super(y),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let y=!1;if(typeof navigator=="undefined")y=!0;else{const t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(t==null?void 0:t[1])>=14&&(y=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",y)}_queueLoadingCallback(y){function t(){for((0,n.assert)(!r.done,"completeRequest() cannot be called twice."),r.done=!0;c.requests.length>0&&c.requests[0].done;){const f=c.requests.shift();setTimeout(f.callback,0)}}const c=this.loadingContext,r={id:`pdfjs-font-loading-${c.nextRequestId++}`,done:!1,complete:t,callback:y};return c.requests.push(r),r}get _loadTestFont(){const y=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,n.shadow)(this,"_loadTestFont",y())}_prepareFontLoadEvent(y,t,c){function r($,z){return $.charCodeAt(z)<<24|$.charCodeAt(z+1)<<16|$.charCodeAt(z+2)<<8|$.charCodeAt(z+3)&255}function f($,z,Y,ee){const Q=$.substring(0,z),m=$.substring(z+Y);return Q+ee+m}let u,v;const x=this._document.createElement("canvas");x.width=1,x.height=1;const g=x.getContext("2d");let q=0;function j($,z){if(q++,q>30){(0,n.warn)("Load test font never loaded."),z();return}if(g.font="30px "+$,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(j.bind(null,$,z))}const D=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=f(w,976,D.length,D);const l=16,P=1482184792;let E=r(w,l);for(u=0,v=D.length-3;u<v;u+=4)E=E-P+r(D,u)|0;u<D.length&&(E=E-P+r(D+"XXX",u)|0),w=f(w,l,4,(0,n.string32)(E));const S=`url(data:font/opentype;base64,${btoa(w)});`,N=`@font-face {font-family:"${D}";src:${S}}`;this.insertRule(N);const k=[];for(const $ of t)k.push($.loadedName);k.push(D);const B=this._document.createElement("div");B.style.visibility="hidden",B.style.width=B.style.height="10px",B.style.position="absolute",B.style.top=B.style.left="0px";for(const $ of k){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=$,B.appendChild(z)}this._document.body.appendChild(B),j(D,()=>{B.remove(),c.complete()})}};class O{constructor(y,{isEvalSupported:t=!0,disableFontFace:c=!1,ignoreErrors:r=!1,onUnsupportedFeature:f,fontRegistry:u=null}){this.compiledGlyphs=Object.create(null);for(const v in y)this[v]=y[v];this.isEvalSupported=t!==!1,this.disableFontFace=c===!0,this.ignoreErrors=r===!0,this._onUnsupportedFeature=f,this.fontRegistry=u}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let y;if(!this.cssFontInfo)y=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),y=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this.fontRegistry&&this.fontRegistry.registerFont(this),y}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const y=(0,n.bytesToString)(this.data),t=`url(data:${this.mimetype};base64,${btoa(y)});`;let c;if(!this.cssFontInfo)c=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),c=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,t),c}getPathGenerator(y,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let c;try{c=y.get(this.loadedName+"_path_"+t)}catch(r){if(!this.ignoreErrors)throw r;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${r}".`),this.compiledGlyphs[t]=function(f,u){}}if(this.isEvalSupported&&n.IsEvalSupportedCached.value){const r=[];for(const f of c){const u=f.args!==void 0?f.args.join(","):"";r.push("c.",f.cmd,"(",u,`);
`)}return this.compiledGlyphs[t]=new Function("c","size",r.join(""))}return this.compiledGlyphs[t]=function(r,f){for(const u of c)u.cmd==="scale"&&(u.args=[f,-f]),r[u.cmd].apply(r,u.args)}}}a.FontFaceObject=O},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NodeStandardFontDataFactory=a.NodeCanvasFactory=a.NodeCMapReaderFactory=void 0;var n=R(6),I=R(3),L=R(1);let O=class{constructor(){(0,L.unreachable)("Not implemented: NodeCanvasFactory")}};a.NodeCanvasFactory=O;let F=class{constructor(){(0,L.unreachable)("Not implemented: NodeCMapReaderFactory")}};a.NodeCMapReaderFactory=F;let y=class{constructor(){(0,L.unreachable)("Not implemented: NodeStandardFontDataFactory")}};if(a.NodeStandardFontDataFactory=y,I.isNodeJS){const t=function(c){return new Promise((r,f)=>{require$$4.readFile(c,(v,x)=>{if(v||!x){f(new Error(v));return}r(new Uint8Array(x))})})};a.NodeCanvasFactory=O=class extends n.BaseCanvasFactory{_createCanvas(c,r){return require$$4.createCanvas(c,r)}},a.NodeCMapReaderFactory=F=class extends n.BaseCMapReaderFactory{_fetchData(c,r){return t(c).then(f=>({cMapData:f,compressionType:r}))}},a.NodeStandardFontDataFactory=y=class extends n.BaseStandardFontDataFactory{_fetchData(c){return t(c)}}}},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationStorage=void 0;var n=R(1);class I{constructor(){this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(O,F){const y=this._storage.get(O);return y===void 0?F:Object.assign(F,y)}setValue(O,F){const y=this._storage.get(O);let t=!1;if(y!==void 0)for(const[c,r]of Object.entries(F))y[c]!==r&&(t=!0,y[c]=r);else t=!0,this._storage.set(O,F);t&&(this._timeStamp=Date.now(),this._setModified())}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get lastModified(){return this._timeStamp.toString()}}a.AnnotationStorage=I},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CanvasGraphics=void 0;var n=R(1),I=R(11),L=R(5);const O=16,F=100,y=4096,t=15,c=10,r=1e3,f=16,u=1.000001;function v(m,o){if(m._removeMirroring)throw new Error("Context is already forwarding operations.");m.__originalSave=m.save,m.__originalRestore=m.restore,m.__originalRotate=m.rotate,m.__originalScale=m.scale,m.__originalTranslate=m.translate,m.__originalTransform=m.transform,m.__originalSetTransform=m.setTransform,m.__originalResetTransform=m.resetTransform,m.__originalClip=m.clip,m.__originalMoveTo=m.moveTo,m.__originalLineTo=m.lineTo,m.__originalBezierCurveTo=m.bezierCurveTo,m.__originalRect=m.rect,m.__originalClosePath=m.closePath,m.__originalBeginPath=m.beginPath,m._removeMirroring=()=>{m.save=m.__originalSave,m.restore=m.__originalRestore,m.rotate=m.__originalRotate,m.scale=m.__originalScale,m.translate=m.__originalTranslate,m.transform=m.__originalTransform,m.setTransform=m.__originalSetTransform,m.resetTransform=m.__originalResetTransform,m.clip=m.__originalClip,m.moveTo=m.__originalMoveTo,m.lineTo=m.__originalLineTo,m.bezierCurveTo=m.__originalBezierCurveTo,m.rect=m.__originalRect,m.closePath=m.__originalClosePath,m.beginPath=m.__originalBeginPath,delete m._removeMirroring},m.save=function(){o.save(),this.__originalSave()},m.restore=function(){o.restore(),this.__originalRestore()},m.translate=function(d,A){o.translate(d,A),this.__originalTranslate(d,A)},m.scale=function(d,A){o.scale(d,A),this.__originalScale(d,A)},m.transform=function(d,A,C,T,e,p){o.transform(d,A,C,T,e,p),this.__originalTransform(d,A,C,T,e,p)},m.setTransform=function(d,A,C,T,e,p){o.setTransform(d,A,C,T,e,p),this.__originalSetTransform(d,A,C,T,e,p)},m.resetTransform=function(){o.resetTransform(),this.__originalResetTransform()},m.rotate=function(d){o.rotate(d),this.__originalRotate(d)},m.clip=function(d){o.clip(d),this.__originalClip(d)},m.moveTo=function(s,d){o.moveTo(s,d),this.__originalMoveTo(s,d)},m.lineTo=function(s,d){o.lineTo(s,d),this.__originalLineTo(s,d)},m.bezierCurveTo=function(s,d,A,C,T,e){o.bezierCurveTo(s,d,A,C,T,e),this.__originalBezierCurveTo(s,d,A,C,T,e)},m.rect=function(s,d,A,C){o.rect(s,d,A,C),this.__originalRect(s,d,A,C)},m.closePath=function(){o.closePath(),this.__originalClosePath()},m.beginPath=function(){o.beginPath(),this.__originalBeginPath()}}function x(m){if(m._transformStack&&(m._transformStack=[]),!m.mozCurrentTransform){m._originalSave=m.save,m._originalRestore=m.restore,m._originalRotate=m.rotate,m._originalScale=m.scale,m._originalTranslate=m.translate,m._originalTransform=m.transform,m._originalSetTransform=m.setTransform,m._originalResetTransform=m.resetTransform,m._transformMatrix=m._transformMatrix||[1,0,0,1,0,0],m._transformStack=[];try{const o=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(m),"lineWidth");m._setLineWidth=o.set,m._getLineWidth=o.get,Object.defineProperty(m,"lineWidth",{set:function(d){this._setLineWidth(d*u)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(m,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(m,"mozCurrentTransformInverse",{get:function(){const[s,d,A,C,T,e]=this._transformMatrix,p=s*C-d*A,_=d*A-s*C;return[C/p,d/_,A/_,s/p,(C*T-A*e)/_,(d*T-s*e)/p]}}),m.save=function(){const s=this._transformMatrix;this._transformStack.push(s),this._transformMatrix=s.slice(0,6),this._originalSave()},m.restore=function(){this._transformStack.length===0&&(0,n.warn)("Tried to restore a ctx when the stack was already empty.");const s=this._transformStack.pop();s&&(this._transformMatrix=s,this._originalRestore())},m.translate=function(s,d){const A=this._transformMatrix;A[4]=A[0]*s+A[2]*d+A[4],A[5]=A[1]*s+A[3]*d+A[5],this._originalTranslate(s,d)},m.scale=function(s,d){const A=this._transformMatrix;A[0]*=s,A[1]*=s,A[2]*=d,A[3]*=d,this._originalScale(s,d)},m.transform=function(s,d,A,C,T,e){const p=this._transformMatrix;this._transformMatrix=[p[0]*s+p[2]*d,p[1]*s+p[3]*d,p[0]*A+p[2]*C,p[1]*A+p[3]*C,p[0]*T+p[2]*e+p[4],p[1]*T+p[3]*e+p[5]],m._originalTransform(s,d,A,C,T,e)},m.setTransform=function(s,d,A,C,T,e){this._transformMatrix=[s,d,A,C,T,e],m._originalSetTransform(s,d,A,C,T,e)},m.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],m._originalResetTransform()},m.rotate=function(s){const d=Math.cos(s),A=Math.sin(s),C=this._transformMatrix;this._transformMatrix=[C[0]*d+C[2]*A,C[1]*d+C[3]*A,C[0]*-A+C[2]*d,C[1]*-A+C[3]*d,C[4],C[5]],this._originalRotate(s)}}}class g{constructor(o){this.canvasFactory=o,this.cache=Object.create(null)}getCanvas(o,s,d,A){let C;return this.cache[o]!==void 0?(C=this.cache[o],this.canvasFactory.reset(C,s,d),C.context.setTransform(1,0,0,1,0,0)):(C=this.canvasFactory.create(s,d),this.cache[o]=C),A&&x(C.context),C}clear(){for(const o in this.cache){const s=this.cache[o];this.canvasFactory.destroy(s),delete this.cache[o]}}}function q(m){const s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),d=m.width,A=m.height,C=d+1;let T,e,p,_;const b=new Uint8Array(C*(A+1)),h=d+7&-8,M=m.data,U=new Uint8Array(h*A);let H=0;for(T=0,e=M.length;T<e;T++){const te=M[T];let se=128;for(;se>0;)U[H++]=te&se?0:255,se>>=1}let X=0;for(H=0,U[H]!==0&&(b[0]=1,++X),p=1;p<d;p++)U[H]!==U[H+1]&&(b[p]=U[H]?2:1,++X),H++;for(U[H]!==0&&(b[p]=2,++X),T=1;T<A;T++){H=T*h,_=T*C,U[H-h]!==U[H]&&(b[_]=U[H]?1:8,++X);let te=(U[H]?4:0)+(U[H-h]?8:0);for(p=1;p<d;p++)te=(te>>2)+(U[H+1]?4:0)+(U[H-h+1]?8:0),s[te]&&(b[_+p]=s[te],++X),H++;if(U[H-h]!==U[H]&&(b[_+p]=U[H]?2:4,++X),X>1e3)return null}for(H=h*(A-1),_=T*C,U[H]!==0&&(b[_]=8,++X),p=1;p<d;p++)U[H]!==U[H+1]&&(b[_+p]=U[H]?4:8,++X),H++;if(U[H]!==0&&(b[_+p]=4,++X),X>1e3)return null;const K=new Int32Array([0,C,-1,0,-C,0,0,0,1]),Z=[];for(T=0;X&&T<=A;T++){let te=T*C;const se=te+d;for(;te<se&&!b[te];)te++;if(te===se)continue;const le=[te%C,T],ie=te;let oe=b[te];do{const ce=K[oe];do te+=ce;while(!b[te]);const ue=b[te];ue!==5&&ue!==10?(oe=ue,b[te]=0):(oe=ue&51*oe>>4,b[te]&=oe>>2|oe<<2),le.push(te%C,te/C|0),b[te]||--X}while(ie!==te);Z.push(le),--T}return function(te){te.save(),te.scale(1/d,-1/A),te.translate(0,-A),te.beginPath();for(let se=0,le=Z.length;se<le;se++){const ie=Z[se];te.moveTo(ie[0],ie[1]);for(let oe=2,ce=ie.length;oe<ce;oe+=2)te.lineTo(ie[oe],ie[oe+1])}te.fill(),te.beginPath(),te.restore()}}class j{constructor(o,s){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,o,s])}clone(){const o=Object.create(this);return o.clipBox=this.clipBox.slice(),o}setCurrentPoint(o,s){this.x=o,this.y=s}updatePathMinMax(o,s,d){[s,d]=n.Util.applyTransform([s,d],o),this.minX=Math.min(this.minX,s),this.minY=Math.min(this.minY,d),this.maxX=Math.max(this.maxX,s),this.maxY=Math.max(this.maxY,d)}updateCurvePathMinMax(o,s,d,A,C,T,e,p,_){const b=n.Util.bezierBoundingBox(s,d,A,C,T,e,p,_);this.updatePathMinMax(o,b[0],b[1]),this.updatePathMinMax(o,b[2],b[3])}getPathBoundingBox(o=I.PathType.FILL,s=null){const d=[this.minX,this.minY,this.maxX,this.maxY];if(o===I.PathType.STROKE){s||(0,n.unreachable)("Stroke bounding box must include transform.");const A=n.Util.singularValueDecompose2dScale(s),C=A[0]*this.lineWidth/2,T=A[1]*this.lineWidth/2;d[0]-=C,d[1]-=T,d[2]+=C,d[3]+=T}return d}updateClipFromPath(){const o=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(o||[0,0,0,0])}startNewPathAndClipBox(o){this.clipBox=o,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(o=I.PathType.FILL,s=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(o,s))}}function D(m,o,s=null){if(typeof ImageData!="undefined"&&o instanceof ImageData){m.putImageData(o,0,0);return}const d=o.height,A=o.width,C=d%f,T=(d-C)/f,e=C===0?T:T+1,p=m.createImageData(A,f);let _=0,b;const h=o.data,M=p.data;let U,H,X,K,Z,ne,te,se;if(s)switch(s.length){case 1:Z=s[0],ne=s[0],te=s[0],se=s[0];break;case 4:Z=s[0],ne=s[1],te=s[2],se=s[3];break}if(o.kind===n.ImageKind.GRAYSCALE_1BPP){const le=h.byteLength,ie=new Uint32Array(M.buffer,0,M.byteLength>>2),oe=ie.length,ce=A+7>>3;let ue=4294967295,_e=n.IsLittleEndianCached.value?4278190080:255;for(se&&se[0]===255&&se[255]===0&&([ue,_e]=[_e,ue]),U=0;U<e;U++){for(X=U<T?f:C,b=0,H=0;H<X;H++){const Ce=le-_;let me=0;const ve=Ce>ce?A:Ce*8-7,be=ve&-8;let Se=0,fe=0;for(;me<be;me+=8)fe=h[_++],ie[b++]=fe&128?ue:_e,ie[b++]=fe&64?ue:_e,ie[b++]=fe&32?ue:_e,ie[b++]=fe&16?ue:_e,ie[b++]=fe&8?ue:_e,ie[b++]=fe&4?ue:_e,ie[b++]=fe&2?ue:_e,ie[b++]=fe&1?ue:_e;for(;me<ve;me++)Se===0&&(fe=h[_++],Se=128),ie[b++]=fe&Se?ue:_e,Se>>=1}for(;b<oe;)ie[b++]=0;m.putImageData(p,0,U*f)}}else if(o.kind===n.ImageKind.RGBA_32BPP){const le=!!(Z||ne||te);for(H=0,K=A*f*4,U=0;U<T;U++){if(M.set(h.subarray(_,_+K)),_+=K,le)for(let ie=0;ie<K;ie+=4)Z&&(M[ie+0]=Z[M[ie+0]]),ne&&(M[ie+1]=ne[M[ie+1]]),te&&(M[ie+2]=te[M[ie+2]]);m.putImageData(p,0,H),H+=f}if(U<e){if(K=A*C*4,M.set(h.subarray(_,_+K)),le)for(let ie=0;ie<K;ie+=4)Z&&(M[ie+0]=Z[M[ie+0]]),ne&&(M[ie+1]=ne[M[ie+1]]),te&&(M[ie+2]=te[M[ie+2]]);m.putImageData(p,0,H)}}else if(o.kind===n.ImageKind.RGB_24BPP){const le=!!(Z||ne||te);for(X=f,K=A*X,U=0;U<e;U++){for(U>=T&&(X=C,K=A*X),b=0,H=K;H--;)M[b++]=h[_++],M[b++]=h[_++],M[b++]=h[_++],M[b++]=255;if(le)for(let ie=0;ie<b;ie+=4)Z&&(M[ie+0]=Z[M[ie+0]]),ne&&(M[ie+1]=ne[M[ie+1]]),te&&(M[ie+2]=te[M[ie+2]]);m.putImageData(p,0,U*f)}}else throw new Error(`bad image kind: ${o.kind}`)}function w(m,o){const s=o.height,d=o.width,A=s%f,C=(s-A)/f,T=A===0?C:C+1,e=m.createImageData(d,f);let p=0;const _=o.data,b=e.data;for(let h=0;h<T;h++){const M=h<C?f:A;let U=3;for(let H=0;H<M;H++){let X,K=0;for(let Z=0;Z<d;Z++)K||(X=_[p++],K=128),b[U]=X&K?0:255,U+=4,K>>=1}m.putImageData(e,0,h*f)}}function i(m,o){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let d=0,A=s.length;d<A;d++){const C=s[d];m[C]!==void 0&&(o[C]=m[C])}m.setLineDash!==void 0&&(o.setLineDash(m.getLineDash()),o.lineDashOffset=m.lineDashOffset)}function l(m){m.strokeStyle="#000000",m.fillStyle="#000000",m.fillRule="nonzero",m.globalAlpha=1,m.lineWidth=1,m.lineCap="butt",m.lineJoin="miter",m.miterLimit=10,m.globalCompositeOperation="source-over",m.font="10px sans-serif",m.setLineDash!==void 0&&(m.setLineDash([]),m.lineDashOffset=0)}function P(m,o,s,d){const A=m.length;for(let C=3;C<A;C+=4){const T=m[C];if(T===0)m[C-3]=o,m[C-2]=s,m[C-1]=d;else if(T<255){const e=255-T;m[C-3]=m[C-3]*T+o*e>>8,m[C-2]=m[C-2]*T+s*e>>8,m[C-1]=m[C-1]*T+d*e>>8}}}function E(m,o,s){const d=m.length,A=1/255;for(let C=3;C<d;C+=4){const T=s?s[m[C]]:m[C];o[C]=o[C]*T*A|0}}function S(m,o,s){const d=m.length;for(let A=3;A<d;A+=4){const C=m[A-3]*77+m[A-2]*152+m[A-1]*28;o[A]=s?o[A]*s[C>>8]>>8:o[A]*C>>16}}function N(m,o,s,d,A,C,T,e,p,_,b){const h=!!C,M=h?C[0]:0,U=h?C[1]:0,H=h?C[2]:0;let X;A==="Luminosity"?X=S:X=E;const Z=Math.min(d,Math.ceil(1048576/s));for(let ne=0;ne<d;ne+=Z){const te=Math.min(Z,d-ne),se=m.getImageData(e-_,ne+(p-b),s,te),le=o.getImageData(e,ne+p,s,te);h&&P(se.data,M,U,H),X(se.data,le.data,T),o.putImageData(le,e,ne+p)}}function k(m,o,s,d){const A=d[0],C=d[1],T=d[2]-A,e=d[3]-C;T===0||e===0||(N(o.context,s,T,e,o.subtype,o.backdrop,o.transferMap,A,C,o.offsetX,o.offsetY),m.save(),m.globalAlpha=1,m.globalCompositeOperation="source-over",m.setTransform(1,0,0,1,0,0),m.drawImage(s.canvas,0,0),m.restore())}function B(m,o){const s=n.Util.singularValueDecompose2dScale(m);s[0]=Math.fround(s[0]),s[1]=Math.fround(s[1]);const d=Math.fround((globalThis.devicePixelRatio||1)*L.PixelsPerInch.PDF_TO_CSS_UNITS);return o!==void 0?o:s[0]<=d||s[1]<=d}const $=["butt","round","square"],z=["miter","round","bevel"],Y={},ee={};class Q{constructor(o,s,d,A,C,T,e){this.ctx=o,this.current=new j(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=s,this.objs=d,this.canvasFactory=A,this.imageLayer=C,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=T,this.cachedCanvases=new g(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=e,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,o&&x(o),this._cachedGetSinglePixelWidth=null}beginDrawing({transform:o,viewport:s,transparency:d=!1,background:A=null}){const C=this.ctx.canvas.width,T=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=A||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,C,T),this.ctx.restore(),d){const e=this.cachedCanvases.getCanvas("transparent",C,T,!0);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),l(this.ctx),o&&(this.ctx.transform.apply(this.ctx,o),this.outputScaleX=o[0],this.outputScaleY=o[0]),this.ctx.transform.apply(this.ctx,s.transform),this.viewportScale=s.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(o,s,d,A){const C=o.argsArray,T=o.fnArray;let e=s||0;const p=C.length;if(p===e)return e;const _=p-e>c&&typeof d=="function",b=_?Date.now()+t:0;let h=0;const M=this.commonObjs,U=this.objs;let H;for(;;){if(A!==void 0&&e===A.nextBreakPoint)return A.breakIt(e,d),e;if(H=T[e],H!==n.OPS.dependency)this[H].apply(this,C[e]);else for(const X of C[e]){const K=X.startsWith("g_")?M:U;if(!K.has(X))return K.get(X,d),e}if(e++,e===p)return e;if(_&&++h>c){if(Date.now()>b)return d(),e;h=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(o,s){const d=o.width,A=o.height;let C=Math.max(Math.hypot(s[0],s[1]),1),T=Math.max(Math.hypot(s[2],s[3]),1),e=d,p=A,_="prescale1",b,h;for(;C>2&&e>1||T>2&&p>1;){let M=e,U=p;C>2&&e>1&&(M=Math.ceil(e/2),C/=e/M),T>2&&p>1&&(U=Math.ceil(p/2),T/=p/U),b=this.cachedCanvases.getCanvas(_,M,U),h=b.context,h.clearRect(0,0,M,U),h.drawImage(o,0,0,e,p,0,0,M,U),o=b.canvas,e=M,p=U,_=_==="prescale1"?"prescale2":"prescale1"}return{img:o,paintWidth:e,paintHeight:p}}_createMaskCanvas(o){const s=this.ctx,d=o.width,A=o.height,C=this.current.fillColor,T=this.current.patternFill,e=this.cachedCanvases.getCanvas("maskCanvas",d,A),p=e.context;w(p,o);const _=s.mozCurrentTransform;let b=n.Util.transform(_,[1/d,0,0,-1/A,0,0]);b=n.Util.transform(b,[1,0,0,1,0,-A]);const h=n.Util.applyTransform([0,0],b),M=n.Util.applyTransform([d,A],b),U=n.Util.normalizeRect([h[0],h[1],M[0],M[1]]),H=Math.ceil(U[2]-U[0]),X=Math.ceil(U[3]-U[1]),K=this.cachedCanvases.getCanvas("fillCanvas",H,X,!0),Z=K.context,ne=Math.min(h[0],M[0]),te=Math.min(h[1],M[1]);Z.translate(-ne,-te),Z.transform.apply(Z,b);const se=this._scaleImage(e.canvas,Z.mozCurrentTransformInverse);Z.imageSmoothingEnabled=B(Z.mozCurrentTransform,o.interpolate),Z.drawImage(se.img,0,0,se.img.width,se.img.height,0,0,d,A),Z.globalCompositeOperation="source-in";const le=n.Util.transform(Z.mozCurrentTransformInverse,[1,0,0,1,-ne,-te]);return Z.fillStyle=T?C.getPattern(s,this,le,I.PathType.FILL):C,Z.fillRect(0,0,d,A),{canvas:K.canvas,offsetX:Math.round(ne),offsetY:Math.round(te)}}setLineWidth(o){this.current.lineWidth=o,this.ctx.lineWidth=o}setLineCap(o){this.ctx.lineCap=$[o]}setLineJoin(o){this.ctx.lineJoin=z[o]}setMiterLimit(o){this.ctx.miterLimit=o}setDash(o,s){const d=this.ctx;d.setLineDash!==void 0&&(d.setLineDash(o),d.lineDashOffset=s)}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(let s=0,d=o.length;s<d;s++){const A=o[s],C=A[0],T=A[1];switch(C){case"LW":this.setLineWidth(T);break;case"LC":this.setLineCap(T);break;case"LJ":this.setLineJoin(T);break;case"ML":this.setMiterLimit(T);break;case"D":this.setDash(T[0],T[1]);break;case"RI":this.setRenderingIntent(T);break;case"FL":this.setFlatness(T);break;case"Font":this.setFont(T[0],T[1]);break;case"CA":this.current.strokeAlpha=A[1];break;case"ca":this.current.fillAlpha=A[1],this.ctx.globalAlpha=A[1];break;case"BM":this.ctx.globalCompositeOperation=T;break;case"SMask":this.current.activeSMask=T?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=T}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const o=this.inSMaskMode;this.current.activeSMask&&!o?this.beginSMaskMode():!this.current.activeSMask&&o&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const o=this.ctx.canvas.width,s=this.ctx.canvas.height,d="smaskGroupAt"+this.groupLevel,A=this.cachedCanvases.getCanvas(d,o,s,!0);this.suspendedCtx=this.ctx,this.ctx=A.context;const C=this.ctx;C.setTransform.apply(C,this.suspendedCtx.mozCurrentTransform),i(this.suspendedCtx,C),v(C,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),i(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(o){if(!this.current.activeSMask)return;o?(o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o[2]=Math.ceil(o[2]),o[3]=Math.ceil(o[3])):o=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const s=this.current.activeSMask,d=this.suspendedCtx;k(d,s,this.ctx,o),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(i(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const o=this.current;this.stateStack.push(o),this.current=o.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),i(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)}transform(o,s,d,A,C,T){this.ctx.transform(o,s,d,A,C,T),this._cachedGetSinglePixelWidth=null}constructPath(o,s){const d=this.ctx,A=this.current;let C=A.x,T=A.y,e,p;for(let _=0,b=0,h=o.length;_<h;_++)switch(o[_]|0){case n.OPS.rectangle:C=s[b++],T=s[b++];const M=s[b++],U=s[b++],H=C+M,X=T+U;d.moveTo(C,T),M===0||U===0?d.lineTo(H,X):(d.lineTo(H,T),d.lineTo(H,X),d.lineTo(C,X)),A.updatePathMinMax(d.mozCurrentTransform,C,T),A.updatePathMinMax(d.mozCurrentTransform,H,X),d.closePath();break;case n.OPS.moveTo:C=s[b++],T=s[b++],d.moveTo(C,T),A.updatePathMinMax(d.mozCurrentTransform,C,T);break;case n.OPS.lineTo:C=s[b++],T=s[b++],d.lineTo(C,T),A.updatePathMinMax(d.mozCurrentTransform,C,T);break;case n.OPS.curveTo:e=C,p=T,C=s[b+4],T=s[b+5],d.bezierCurveTo(s[b],s[b+1],s[b+2],s[b+3],C,T),A.updateCurvePathMinMax(d.mozCurrentTransform,e,p,s[b],s[b+1],s[b+2],s[b+3],C,T),b+=6;break;case n.OPS.curveTo2:e=C,p=T,d.bezierCurveTo(C,T,s[b],s[b+1],s[b+2],s[b+3]),A.updateCurvePathMinMax(d.mozCurrentTransform,e,p,C,T,s[b],s[b+1],s[b+2],s[b+3]),C=s[b+2],T=s[b+3],b+=4;break;case n.OPS.curveTo3:e=C,p=T,C=s[b+2],T=s[b+3],d.bezierCurveTo(s[b],s[b+1],C,T,C,T),A.updateCurvePathMinMax(d.mozCurrentTransform,e,p,s[b],s[b+1],C,T,C,T),b+=4;break;case n.OPS.closePath:d.closePath();break}A.setCurrentPoint(C,T)}closePath(){this.ctx.closePath()}stroke(o){o=typeof o!="undefined"?o:!0;const s=this.ctx,d=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof d=="object"&&(d==null?void 0:d.getPattern)){const A=this.getSinglePixelWidth();s.save(),s.strokeStyle=d.getPattern(s,this,s.mozCurrentTransformInverse,I.PathType.STROKE),s.lineWidth=Math.max(A,this.current.lineWidth),s.stroke(),s.restore()}else{const A=this.getSinglePixelWidth();A<0&&-A>=this.current.lineWidth?(s.save(),s.resetTransform(),s.lineWidth=Math.floor(this._combinedScaleFactor),s.stroke(),s.restore()):(s.lineWidth=Math.max(A,this.current.lineWidth),s.stroke())}o&&this.consumePath(this.current.getClippedPathBoundingBox()),s.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(o){o=typeof o!="undefined"?o:!0;const s=this.ctx,d=this.current.fillColor,A=this.current.patternFill;let C=!1;A&&(s.save(),s.fillStyle=d.getPattern(s,this,s.mozCurrentTransformInverse,I.PathType.FILL),C=!0);const T=this.current.getClippedPathBoundingBox();this.contentVisible&&T!==null&&(this.pendingEOFill?(s.fill("evenodd"),this.pendingEOFill=!1):s.fill()),C&&s.restore(),o&&this.consumePath(T)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Y}eoClip(){this.pendingClip=ee}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const o=this.pendingTextPaths,s=this.ctx;if(o===void 0){s.beginPath();return}s.save(),s.beginPath();for(let d=0;d<o.length;d++){const A=o[d];s.setTransform.apply(s,A.transform),s.translate(A.x,A.y),A.addToPath(s,A.fontSize)}s.restore(),s.clip(),s.beginPath(),delete this.pendingTextPaths}setCharSpacing(o){this.current.charSpacing=o}setWordSpacing(o){this.current.wordSpacing=o}setHScale(o){this.current.textHScale=o/100}setLeading(o){this.current.leading=-o}setFont(o,s){const d=this.commonObjs.get(o),A=this.current;if(!d)throw new Error(`Can't find font for ${o}`);if(A.fontMatrix=d.fontMatrix||n.FONT_IDENTITY_MATRIX,(A.fontMatrix[0]===0||A.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+o),s<0?(s=-s,A.fontDirection=-1):A.fontDirection=1,this.current.font=d,this.current.fontSize=s,d.isType3Font)return;const C=d.loadedName||"sans-serif";let T="normal";d.black?T="900":d.bold&&(T="bold");const e=d.italic?"italic":"normal",p=`"${C}", ${d.fallbackName}`;let _=s;s<O?_=O:s>F&&(_=F),this.current.fontSizeScale=s/_,this.ctx.font=`${e} ${T} ${_}px ${p}`}setTextRenderingMode(o){this.current.textRenderingMode=o}setTextRise(o){this.current.textRise=o}moveText(o,s){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=s}setLeadingMoveText(o,s){this.setLeading(-s),this.moveText(o,s)}setTextMatrix(o,s,d,A,C,T){this.current.textMatrix=[o,s,d,A,C,T],this.current.textMatrixScale=Math.hypot(o,s),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(o,s,d,A,C){const T=this.ctx,e=this.current,p=e.font,_=e.textRenderingMode,b=e.fontSize/e.fontSizeScale,h=_&n.TextRenderingMode.FILL_STROKE_MASK,M=!!(_&n.TextRenderingMode.ADD_TO_PATH_FLAG),U=e.patternFill&&!p.missingFile;let H;(p.disableFontFace||M||U)&&(H=p.getPathGenerator(this.commonObjs,o)),p.disableFontFace||U?(T.save(),T.translate(s,d),T.beginPath(),H(T,b),A&&T.setTransform.apply(T,A),(h===n.TextRenderingMode.FILL||h===n.TextRenderingMode.FILL_STROKE)&&T.fill(),(h===n.TextRenderingMode.STROKE||h===n.TextRenderingMode.FILL_STROKE)&&(C&&(T.resetTransform(),T.lineWidth=Math.floor(this._combinedScaleFactor)),T.stroke()),T.restore()):((h===n.TextRenderingMode.FILL||h===n.TextRenderingMode.FILL_STROKE)&&T.fillText(o,s,d),(h===n.TextRenderingMode.STROKE||h===n.TextRenderingMode.FILL_STROKE)&&(C?(T.save(),T.moveTo(s,d),T.resetTransform(),T.lineWidth=Math.floor(this._combinedScaleFactor),T.strokeText(o,0,0),T.restore()):T.strokeText(o,s,d))),M&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:T.mozCurrentTransform,x:s,y:d,fontSize:b,addToPath:H})}get isFontSubpixelAAEnabled(){const{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);o.scale(1.5,1),o.fillText("I",0,10);const s=o.getImageData(0,0,10,10).data;let d=!1;for(let A=3;A<s.length;A+=4)if(s[A]>0&&s[A]<255){d=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",d)}showText(o){const s=this.current,d=s.font;if(d.isType3Font)return this.showType3Text(o);const A=s.fontSize;if(A===0)return;const C=this.ctx,T=s.fontSizeScale,e=s.charSpacing,p=s.wordSpacing,_=s.fontDirection,b=s.textHScale*_,h=o.length,M=d.vertical,U=M?1:-1,H=d.defaultVMetrics,X=A*s.fontMatrix[0],K=s.textRenderingMode===n.TextRenderingMode.FILL&&!d.disableFontFace&&!s.patternFill;C.save(),C.transform.apply(C,s.textMatrix),C.translate(s.x,s.y+s.textRise),_>0?C.scale(b,-1):C.scale(b,1);let Z;if(s.patternFill){C.save();const oe=s.fillColor.getPattern(C,this,C.mozCurrentTransformInverse,I.PathType.FILL);Z=C.mozCurrentTransform,C.restore(),C.fillStyle=oe}let ne=s.lineWidth,te=!1;const se=s.textMatrixScale;if(se===0||ne===0){const oe=s.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(oe===n.TextRenderingMode.STROKE||oe===n.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,ne=this.getSinglePixelWidth(),te=ne<0)}else ne/=se;T!==1&&(C.scale(T,T),ne/=T),C.lineWidth=ne;let le=0,ie;for(ie=0;ie<h;++ie){const oe=o[ie];if(typeof oe=="number"){le+=U*oe*A/1e3;continue}let ce=!1;const ue=(oe.isSpace?p:0)+e,_e=oe.fontChar,Ce=oe.accent;let me,ve,be=oe.width;if(M){const fe=oe.vmetric||H,xe=-(oe.vmetric?fe[1]:be*.5)*X,Ue=fe[2]*X;be=fe?-fe[0]:be,me=xe/T,ve=(le+Ue)/T}else me=le/T,ve=0;if(d.remeasure&&be>0){const fe=C.measureText(_e).width*1e3/A*T;if(be<fe&&this.isFontSubpixelAAEnabled){const xe=be/fe;ce=!0,C.save(),C.scale(xe,1),me/=xe}else be!==fe&&(me+=(be-fe)/2e3*A/T)}if(this.contentVisible&&(oe.isInFont||d.missingFile)){if(K&&!Ce)C.fillText(_e,me,ve);else if(this.paintChar(_e,me,ve,Z,te),Ce){const fe=me+A*Ce.offset.x/T,xe=ve-A*Ce.offset.y/T;this.paintChar(Ce.fontChar,fe,xe,Z,te)}}let Se;M?Se=be*X-ue*_:Se=be*X+ue*_,le+=Se,ce&&C.restore()}M?s.y-=le:s.x+=le*b,C.restore(),this.compose()}showType3Text(o){const s=this.ctx,d=this.current,A=d.font,C=d.fontSize,T=d.fontDirection,e=A.vertical?1:-1,p=d.charSpacing,_=d.wordSpacing,b=d.textHScale*T,h=d.fontMatrix||n.FONT_IDENTITY_MATRIX,M=o.length,U=d.textRenderingMode===n.TextRenderingMode.INVISIBLE;let H,X,K,Z;if(!(U||C===0)){for(this._cachedGetSinglePixelWidth=null,s.save(),s.transform.apply(s,d.textMatrix),s.translate(d.x,d.y),s.scale(b,T),H=0;H<M;++H){if(X=o[H],typeof X=="number"){Z=e*X*C/1e3,this.ctx.translate(Z,0),d.x+=Z*b;continue}const ne=(X.isSpace?_:0)+p,te=A.charProcOperatorList[X.operatorListId];if(!te){(0,n.warn)(`Type3 character "${X.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=X,this.save(),s.scale(C,C),s.transform.apply(s,h),this.executeOperatorList(te),this.restore()),K=n.Util.applyTransform([X.width,0],h)[0]*C+ne,s.translate(K,0),d.x+=K*b}s.restore(),this.processingType3=null}}setCharWidth(o,s){}setCharWidthAndBounds(o,s,d,A,C,T){this.ctx.rect(d,A,C-d,T-A),this.clip(),this.endPath()}getColorN_Pattern(o){let s;if(o[0]==="TilingPattern"){const d=o[1],A=this.baseTransform||this.ctx.mozCurrentTransform.slice(),C={createCanvasGraphics:T=>new Q(T,this.commonObjs,this.objs,this.canvasFactory)};s=new I.TilingPattern(o,d,this.ctx,C,A)}else s=this._getPattern(o[1],o[2]);return s}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(o,s,d){const A=n.Util.makeHexColor(o,s,d);this.ctx.strokeStyle=A,this.current.strokeColor=A}setFillRGBColor(o,s,d){const A=n.Util.makeHexColor(o,s,d);this.ctx.fillStyle=A,this.current.fillColor=A,this.current.patternFill=!1}_getPattern(o,s=null){let d;return this.cachedPatterns.has(o)?d=this.cachedPatterns.get(o):(d=(0,I.getShadingPattern)(this.objs.get(o)),this.cachedPatterns.set(o,d)),s&&(d.matrix=s),d}shadingFill(o){if(!this.contentVisible)return;const s=this.ctx;this.save();const d=this._getPattern(o);s.fillStyle=d.getPattern(s,this,s.mozCurrentTransformInverse,I.PathType.SHADING);const A=s.mozCurrentTransformInverse;if(A){const C=s.canvas,T=C.width,e=C.height,p=n.Util.applyTransform([0,0],A),_=n.Util.applyTransform([0,e],A),b=n.Util.applyTransform([T,0],A),h=n.Util.applyTransform([T,e],A),M=Math.min(p[0],_[0],b[0],h[0]),U=Math.min(p[1],_[1],b[1],h[1]),H=Math.max(p[0],_[0],b[0],h[0]),X=Math.max(p[1],_[1],b[1],h[1]);this.ctx.fillRect(M,U,H-M,X-U)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(o,s){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&o.length===6&&this.transform.apply(this,o),this.baseTransform=this.ctx.mozCurrentTransform,s)){const d=s[2]-s[0],A=s[3]-s[1];this.ctx.rect(s[0],s[1],d,A),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,s[0],s[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,s[2],s[3]),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(o){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;o.isolated||(0,n.info)("TODO: Support non-isolated groups."),o.knockout&&(0,n.warn)("Knockout groups not supported.");const d=s.mozCurrentTransform;if(o.matrix&&s.transform.apply(s,o.matrix),!o.bbox)throw new Error("Bounding box is required.");let A=n.Util.getAxialAlignedBoundingBox(o.bbox,s.mozCurrentTransform);const C=[0,0,s.canvas.width,s.canvas.height];A=n.Util.intersect(A,C)||[0,0,0,0];const T=Math.floor(A[0]),e=Math.floor(A[1]);let p=Math.max(Math.ceil(A[2])-T,1),_=Math.max(Math.ceil(A[3])-e,1),b=1,h=1;p>y&&(b=p/y,p=y),_>y&&(h=_/y,_=y),this.current.startNewPathAndClipBox([0,0,p,_]);let M="groupAt"+this.groupLevel;o.smask&&(M+="_smask_"+this.smaskCounter++%2);const U=this.cachedCanvases.getCanvas(M,p,_,!0),H=U.context;H.scale(1/b,1/h),H.translate(-T,-e),H.transform.apply(H,d),o.smask?this.smaskStack.push({canvas:U.canvas,context:H,offsetX:T,offsetY:e,scaleX:b,scaleY:h,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(s.setTransform(1,0,0,1,0,0),s.translate(T,e),s.scale(b,h),s.save()),i(s,H),this.ctx=H,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(o){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,d=this.groupStack.pop();if(this.ctx=d,this.ctx.imageSmoothingEnabled=!1,o.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const A=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,A);const C=n.Util.getAxialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],A);this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(C)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(o,s,d,A,C){if(this.save(),Array.isArray(s)&&s.length===4){const T=s[2]-s[0],e=s[3]-s[1];if(C&&this.annotationCanvasMap){d=d.slice(),d[4]-=s[0],d[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=T,s[3]=e;const[p,_]=n.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:b}=this,h=Math.ceil(T*this.outputScaleX*b),M=Math.ceil(e*this.outputScaleY*b);this.annotationCanvas=this.canvasFactory.create(h,M);const{canvas:U,context:H}=this.annotationCanvas;U.style.width=`calc(${T}px * var(--viewport-scale-factor))`,U.style.height=`calc(${e}px * var(--viewport-scale-factor))`,this.annotationCanvasMap.set(o,U),this.annotationCanvas.savedCtx=this.ctx,this.ctx=H,this.ctx.setTransform(p,0,0,-_,0,e*_),x(this.ctx),l(this.ctx)}else l(this.ctx),this.ctx.rect(s[0],s[1],T,e),this.clip(),this.endPath()}this.current=new j(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,d),this.transform.apply(this,A)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(o){if(!this.contentVisible)return;const s=this.ctx,d=o.width,A=o.height,C=this.processingType3;if(C&&C.compiled===void 0&&(d<=r&&A<=r?C.compiled=q({data:o.data,width:d,height:A}):C.compiled=null),C!=null&&C.compiled){C.compiled(s);return}const T=this._createMaskCanvas(o),e=T.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(e,T.offsetX,T.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(o,s,d=0,A=0,C,T){if(!this.contentVisible)return;const e=this.ctx;e.save();const p=e.mozCurrentTransform;e.transform(s,d,A,C,0,0);const _=this._createMaskCanvas(o);e.setTransform(1,0,0,1,0,0);for(let b=0,h=T.length;b<h;b+=2){const M=n.Util.transform(p,[s,d,A,C,T[b],T[b+1]]),[U,H]=n.Util.applyTransform([0,0],M);e.drawImage(_.canvas,U,H)}e.restore(),this.compose()}paintImageMaskXObjectGroup(o){if(!this.contentVisible)return;const s=this.ctx,d=this.current.fillColor,A=this.current.patternFill;for(let C=0,T=o.length;C<T;C++){const e=o[C],p=e.width,_=e.height,b=this.cachedCanvases.getCanvas("maskCanvas",p,_),h=b.context;h.save(),w(h,e),h.globalCompositeOperation="source-in",h.fillStyle=A?d.getPattern(h,this,s.mozCurrentTransformInverse,I.PathType.FILL):d,h.fillRect(0,0,p,_),h.restore(),s.save(),s.transform.apply(s,e.transform),s.scale(1,-1),s.drawImage(b.canvas,0,0,p,_,0,-1,1,1),s.restore()}this.compose()}paintImageXObject(o){if(!this.contentVisible)return;const s=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!s){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(s)}paintImageXObjectRepeat(o,s,d,A){if(!this.contentVisible)return;const C=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!C){(0,n.warn)("Dependent image isn't ready yet");return}const T=C.width,e=C.height,p=[];for(let _=0,b=A.length;_<b;_+=2)p.push({transform:[s,0,0,d,A[_],A[_+1]],x:0,y:0,w:T,h:e});this.paintInlineImageXObjectGroup(C,p)}paintInlineImageXObject(o){if(!this.contentVisible)return;const s=o.width,d=o.height,A=this.ctx;this.save(),A.scale(1/s,-1/d);let C;if(typeof HTMLElement=="function"&&o instanceof HTMLElement||!o.data)C=o;else{const e=this.cachedCanvases.getCanvas("inlineImage",s,d),p=e.context;D(p,o,this.current.transferMaps),C=e.canvas}const T=this._scaleImage(C,A.mozCurrentTransformInverse);if(A.imageSmoothingEnabled=B(A.mozCurrentTransform,o.interpolate),A.drawImage(T.img,0,0,T.paintWidth,T.paintHeight,0,-d,s,d),this.imageLayer){const e=this.getCanvasPosition(0,-d);this.imageLayer.appendImage({imgData:o,left:e[0],top:e[1],width:s/A.mozCurrentTransformInverse[0],height:d/A.mozCurrentTransformInverse[3]})}this.compose(),this.restore()}paintInlineImageXObjectGroup(o,s){if(!this.contentVisible)return;const d=this.ctx,A=o.width,C=o.height,T=this.cachedCanvases.getCanvas("inlineImage",A,C),e=T.context;D(e,o,this.current.transferMaps);for(let p=0,_=s.length;p<_;p++){const b=s[p];if(d.save(),d.transform.apply(d,b.transform),d.scale(1,-1),d.drawImage(T.canvas,b.x,b.y,b.w,b.h,0,-1,1,1),this.imageLayer){const h=this.getCanvasPosition(b.x,b.y);this.imageLayer.appendImage({imgData:o,left:h[0],top:h[1],width:A,height:C})}d.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(o){}markPointProps(o,s){}beginMarkedContent(o){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(o,s){o==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(o){this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(o);const s=this.ctx;this.pendingClip&&(this.pendingClip===ee?s.clip("evenodd"):s.clip(),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(this._cachedGetSinglePixelWidth===null){const o=this.ctx.mozCurrentTransform,s=Math.abs(o[0]*o[3]-o[2]*o[1]),d=o[0]**2+o[2]**2,A=o[1]**2+o[3]**2,C=Math.sqrt(Math.max(d,A))/s;d!==A&&this._combinedScaleFactor*C>1?this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*C):s>Number.EPSILON?this._cachedGetSinglePixelWidth=C:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}getCanvasPosition(o,s){const d=this.ctx.mozCurrentTransform;return[d[0]*o+d[2]*s+d[4],d[1]*o+d[3]*s+d[5]]}isContentVisible(){for(let o=this.markedContentStack.length-1;o>=0;o--)if(!this.markedContentStack[o].visible)return!1;return!0}}a.CanvasGraphics=Q;for(const m in n.OPS)Q.prototype[m]!==void 0&&(Q.prototype[n.OPS[m]]=Q.prototype[m])},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TilingPattern=a.PathType=void 0,a.getShadingPattern=f;var n=R(1);const I={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};a.PathType=I;function L(x,g){if(!g||typeof Path2D=="undefined")return;const q=g[2]-g[0],j=g[3]-g[1],D=new Path2D;D.rect(g[0],g[1],q,j),x.clip(D)}class O{constructor(){this.constructor===O&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class F extends O{constructor(g){super(),this._type=g[1],this._bbox=g[2],this._colorStops=g[3],this._p0=g[4],this._p1=g[5],this._r0=g[6],this._r1=g[7],this.matrix=null}_createGradient(g){let q;this._type==="axial"?q=g.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(q=g.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const j of this._colorStops)q.addColorStop(j[0],j[1]);return q}getPattern(g,q,j,D){let w;if(D===I.STROKE||D===I.FILL){const i=q.current.getClippedPathBoundingBox(D,g.mozCurrentTransform)||[0,0,0,0],l=Math.ceil(i[2]-i[0])||1,P=Math.ceil(i[3]-i[1])||1,E=q.cachedCanvases.getCanvas("pattern",l,P,!0),S=E.context;S.clearRect(0,0,S.canvas.width,S.canvas.height),S.beginPath(),S.rect(0,0,S.canvas.width,S.canvas.height),S.translate(-i[0],-i[1]),j=n.Util.transform(j,[1,0,0,1,i[0],i[1]]),S.transform.apply(S,q.baseTransform),this.matrix&&S.transform.apply(S,this.matrix),L(S,this._bbox),S.fillStyle=this._createGradient(S),S.fill(),w=g.createPattern(E.canvas,"no-repeat");const N=new DOMMatrix(j);try{w.setTransform(N)}catch(k){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${k==null?void 0:k.message}".`)}}else L(g,this._bbox),w=this._createGradient(g);return w}}function y(x,g,q,j,D,w,i,l){const P=g.coords,E=g.colors,S=x.data,N=x.width*4;let k;P[q+1]>P[j+1]&&(k=q,q=j,j=k,k=w,w=i,i=k),P[j+1]>P[D+1]&&(k=j,j=D,D=k,k=i,i=l,l=k),P[q+1]>P[j+1]&&(k=q,q=j,j=k,k=w,w=i,i=k);const B=(P[q]+g.offsetX)*g.scaleX,$=(P[q+1]+g.offsetY)*g.scaleY,z=(P[j]+g.offsetX)*g.scaleX,Y=(P[j+1]+g.offsetY)*g.scaleY,ee=(P[D]+g.offsetX)*g.scaleX,Q=(P[D+1]+g.offsetY)*g.scaleY;if($>=Q)return;const m=E[w],o=E[w+1],s=E[w+2],d=E[i],A=E[i+1],C=E[i+2],T=E[l],e=E[l+1],p=E[l+2],_=Math.round($),b=Math.round(Q);let h,M,U,H,X,K,Z,ne;for(let te=_;te<=b;te++){if(te<Y){let ce;te<$?ce=0:ce=($-te)/($-Y),h=B-(B-z)*ce,M=m-(m-d)*ce,U=o-(o-A)*ce,H=s-(s-C)*ce}else{let ce;te>Q?ce=1:Y===Q?ce=0:ce=(Y-te)/(Y-Q),h=z-(z-ee)*ce,M=d-(d-T)*ce,U=A-(A-e)*ce,H=C-(C-p)*ce}let se;te<$?se=0:te>Q?se=1:se=($-te)/($-Q),X=B-(B-ee)*se,K=m-(m-T)*se,Z=o-(o-e)*se,ne=s-(s-p)*se;const le=Math.round(Math.min(h,X)),ie=Math.round(Math.max(h,X));let oe=N*te+le*4;for(let ce=le;ce<=ie;ce++)se=(h-ce)/(h-X),se<0?se=0:se>1&&(se=1),S[oe++]=M-(M-K)*se|0,S[oe++]=U-(U-Z)*se|0,S[oe++]=H-(H-ne)*se|0,S[oe++]=255}}function t(x,g,q){const j=g.coords,D=g.colors;let w,i;switch(g.type){case"lattice":const l=g.verticesPerRow,P=Math.floor(j.length/l)-1,E=l-1;for(w=0;w<P;w++){let S=w*l;for(let N=0;N<E;N++,S++)y(x,q,j[S],j[S+1],j[S+l],D[S],D[S+1],D[S+l]),y(x,q,j[S+l+1],j[S+1],j[S+l],D[S+l+1],D[S+1],D[S+l])}break;case"triangles":for(w=0,i=j.length;w<i;w+=3)y(x,q,j[w],j[w+1],j[w+2],D[w],D[w+1],D[w+2]);break;default:throw new Error("illegal figure")}}class c extends O{constructor(g){super(),this._coords=g[2],this._colors=g[3],this._figures=g[4],this._bounds=g[5],this._bbox=g[7],this._background=g[8],this.matrix=null}_createMeshCanvas(g,q,j){const l=Math.floor(this._bounds[0]),P=Math.floor(this._bounds[1]),E=Math.ceil(this._bounds[2])-l,S=Math.ceil(this._bounds[3])-P,N=Math.min(Math.ceil(Math.abs(E*g[0]*1.1)),3e3),k=Math.min(Math.ceil(Math.abs(S*g[1]*1.1)),3e3),B=E/N,$=S/k,z={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-P,scaleX:1/B,scaleY:1/$},Y=N+2*2,ee=k+2*2,Q=j.getCanvas("mesh",Y,ee,!1),m=Q.context,o=m.createImageData(N,k);if(q){const d=o.data;for(let A=0,C=d.length;A<C;A+=4)d[A]=q[0],d[A+1]=q[1],d[A+2]=q[2],d[A+3]=255}for(const d of this._figures)t(o,d,z);return m.putImageData(o,2,2),{canvas:Q.canvas,offsetX:l-2*B,offsetY:P-2*$,scaleX:B,scaleY:$}}getPattern(g,q,j,D){L(g,this._bbox);let w;if(D===I.SHADING)w=n.Util.singularValueDecompose2dScale(g.mozCurrentTransform);else if(w=n.Util.singularValueDecompose2dScale(q.baseTransform),this.matrix){const l=n.Util.singularValueDecompose2dScale(this.matrix);w=[w[0]*l[0],w[1]*l[1]]}const i=this._createMeshCanvas(w,D===I.SHADING?null:this._background,q.cachedCanvases);return D!==I.SHADING&&(g.setTransform.apply(g,q.baseTransform),this.matrix&&g.transform.apply(g,this.matrix)),g.translate(i.offsetX,i.offsetY),g.scale(i.scaleX,i.scaleY),g.createPattern(i.canvas,"no-repeat")}}class r extends O{getPattern(){return"hotpink"}}function f(x){switch(x[0]){case"RadialAxial":return new F(x);case"Mesh":return new c(x);case"Dummy":return new r}throw new Error(`Unknown IR type: ${x[0]}`)}const u={COLORED:1,UNCOLORED:2};class v{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(g,q,j,D,w){this.operatorList=g[2],this.matrix=g[3]||[1,0,0,1,0,0],this.bbox=g[4],this.xstep=g[5],this.ystep=g[6],this.paintType=g[7],this.tilingType=g[8],this.color=q,this.ctx=j,this.canvasGraphicsFactory=D,this.baseTransform=w}createPatternCanvas(g){const q=this.operatorList,j=this.bbox,D=this.xstep,w=this.ystep,i=this.paintType,l=this.tilingType,P=this.color,E=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+l);const S=j[0],N=j[1],k=j[2],B=j[3],$=n.Util.singularValueDecompose2dScale(this.matrix),z=n.Util.singularValueDecompose2dScale(this.baseTransform),Y=[$[0]*z[0],$[1]*z[1]],ee=this.getSizeAndScale(D,this.ctx.canvas.width,Y[0]),Q=this.getSizeAndScale(w,this.ctx.canvas.height,Y[1]),m=g.cachedCanvases.getCanvas("pattern",ee.size,Q.size,!0),o=m.context,s=E.createCanvasGraphics(o);s.groupLevel=g.groupLevel,this.setFillAndStrokeStyleToContext(s,i,P);let d=S,A=N,C=k,T=B;return S<0&&(d=0,C+=Math.abs(S)),N<0&&(A=0,T+=Math.abs(N)),o.translate(-(ee.scale*d),-(Q.scale*A)),s.transform(ee.scale,0,0,Q.scale,0,0),o.save(),this.clipBbox(s,d,A,C,T),s.baseTransform=s.ctx.mozCurrentTransform.slice(),s.executeOperatorList(q),s.endDrawing(),{canvas:m.canvas,scaleX:ee.scale,scaleY:Q.scale,offsetX:d,offsetY:A}}getSizeAndScale(g,q,j){g=Math.abs(g);const D=Math.max(v.MAX_PATTERN_SIZE,q);let w=Math.ceil(g*j);return w>=D?w=D:j=w/g,{scale:j,size:w}}clipBbox(g,q,j,D,w){const i=D-q,l=w-j;g.ctx.rect(q,j,i,l),g.clip(),g.endPath()}setFillAndStrokeStyleToContext(g,q,j){const D=g.ctx,w=g.current;switch(q){case u.COLORED:const i=this.ctx;D.fillStyle=i.fillStyle,D.strokeStyle=i.strokeStyle,w.fillColor=i.fillStyle,w.strokeColor=i.strokeStyle;break;case u.UNCOLORED:const l=n.Util.makeHexColor(j[0],j[1],j[2]);D.fillStyle=l,D.strokeStyle=l,w.fillColor=l,w.strokeColor=l;break;default:throw new n.FormatError(`Unsupported paint type: ${q}`)}}getPattern(g,q,j,D){let w=j;D!==I.SHADING&&(w=n.Util.transform(w,q.baseTransform),this.matrix&&(w=n.Util.transform(w,this.matrix)));const i=this.createPatternCanvas(q);let l=new DOMMatrix(w);l=l.translate(i.offsetX,i.offsetY),l=l.scale(1/i.scaleX,1/i.scaleY);const P=g.createPattern(i.canvas,"repeat");try{P.setTransform(l)}catch(E){(0,n.warn)(`TilingPattern.getPattern: "${E==null?void 0:E.message}".`)}return P}}a.TilingPattern=v},(W,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GlobalWorkerOptions=void 0;const R=Object.create(null);a.GlobalWorkerOptions=R,R.workerPort=R.workerPort===void 0?null:R.workerPort,R.workerSrc=R.workerSrc===void 0?"":R.workerSrc},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MessageHandler=void 0;var n=R(1);const I={UNKNOWN:0,DATA:1,ERROR:2},L={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function O(y){switch(y instanceof Error||typeof y=="object"&&y!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),y.name){case"AbortException":return new n.AbortException(y.message);case"MissingPDFException":return new n.MissingPDFException(y.message);case"PasswordException":return new n.PasswordException(y.message,y.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(y.message,y.status);case"UnknownErrorException":return new n.UnknownErrorException(y.message,y.details);default:return new n.UnknownErrorException(y.message,y.toString())}}class F{constructor(t,c,r){this.sourceName=t,this.targetName=c,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=f=>{const u=f.data;if(u.targetName!==this.sourceName)return;if(u.stream){this._processStreamMessage(u);return}if(u.callback){const x=u.callbackId,g=this.callbackCapabilities[x];if(!g)throw new Error(`Cannot resolve callback ${x}`);if(delete this.callbackCapabilities[x],u.callback===I.DATA)g.resolve(u.data);else if(u.callback===I.ERROR)g.reject(O(u.reason));else throw new Error("Unexpected callback case");return}const v=this.actionHandler[u.action];if(!v)throw new Error(`Unknown action from worker: ${u.action}`);if(u.callbackId){const x=this.sourceName,g=u.sourceName;new Promise(function(q){q(v(u.data))}).then(function(q){r.postMessage({sourceName:x,targetName:g,callback:I.DATA,callbackId:u.callbackId,data:q})},function(q){r.postMessage({sourceName:x,targetName:g,callback:I.ERROR,callbackId:u.callbackId,reason:O(q)})});return}if(u.streamId){this._createStreamSink(u);return}v(u.data)},r.addEventListener("message",this._onComObjOnMessage)}on(t,c){const r=this.actionHandler;if(r[t])throw new Error(`There is already an actionName called "${t}"`);r[t]=c}send(t,c,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:c},r)}sendWithPromise(t,c,r){const f=this.callbackId++,u=(0,n.createPromiseCapability)();this.callbackCapabilities[f]=u;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:f,data:c},r)}catch(v){u.reject(v)}return u.promise}sendWithStream(t,c,r,f){const u=this.streamId++,v=this.sourceName,x=this.targetName,g=this.comObj;return new ReadableStream({start:q=>{const j=(0,n.createPromiseCapability)();return this.streamControllers[u]={controller:q,startCall:j,pullCall:null,cancelCall:null,isClosed:!1},g.postMessage({sourceName:v,targetName:x,action:t,streamId:u,data:c,desiredSize:q.desiredSize},f),j.promise},pull:q=>{const j=(0,n.createPromiseCapability)();return this.streamControllers[u].pullCall=j,g.postMessage({sourceName:v,targetName:x,stream:L.PULL,streamId:u,desiredSize:q.desiredSize}),j.promise},cancel:q=>{(0,n.assert)(q instanceof Error,"cancel must have a valid reason");const j=(0,n.createPromiseCapability)();return this.streamControllers[u].cancelCall=j,this.streamControllers[u].isClosed=!0,g.postMessage({sourceName:v,targetName:x,stream:L.CANCEL,streamId:u,reason:O(q)}),j.promise}},r)}_createStreamSink(t){const c=t.streamId,r=this.sourceName,f=t.sourceName,u=this.comObj,v=this,x=this.actionHandler[t.action],g={enqueue(q,j=1,D){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=j,w>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),u.postMessage({sourceName:r,targetName:f,stream:L.ENQUEUE,streamId:c,chunk:q},D)},close(){this.isCancelled||(this.isCancelled=!0,u.postMessage({sourceName:r,targetName:f,stream:L.CLOSE,streamId:c}),delete v.streamSinks[c])},error(q){(0,n.assert)(q instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,u.postMessage({sourceName:r,targetName:f,stream:L.ERROR,streamId:c,reason:O(q)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};g.sinkCapability.resolve(),g.ready=g.sinkCapability.promise,this.streamSinks[c]=g,new Promise(function(q){q(x(t.data,g))}).then(function(){u.postMessage({sourceName:r,targetName:f,stream:L.START_COMPLETE,streamId:c,success:!0})},function(q){u.postMessage({sourceName:r,targetName:f,stream:L.START_COMPLETE,streamId:c,reason:O(q)})})}_processStreamMessage(t){const c=t.streamId,r=this.sourceName,f=t.sourceName,u=this.comObj,v=this.streamControllers[c],x=this.streamSinks[c];switch(t.stream){case L.START_COMPLETE:t.success?v.startCall.resolve():v.startCall.reject(O(t.reason));break;case L.PULL_COMPLETE:t.success?v.pullCall.resolve():v.pullCall.reject(O(t.reason));break;case L.PULL:if(!x){u.postMessage({sourceName:r,targetName:f,stream:L.PULL_COMPLETE,streamId:c,success:!0});break}x.desiredSize<=0&&t.desiredSize>0&&x.sinkCapability.resolve(),x.desiredSize=t.desiredSize,new Promise(function(g){g(x.onPull&&x.onPull())}).then(function(){u.postMessage({sourceName:r,targetName:f,stream:L.PULL_COMPLETE,streamId:c,success:!0})},function(g){u.postMessage({sourceName:r,targetName:f,stream:L.PULL_COMPLETE,streamId:c,reason:O(g)})});break;case L.ENQUEUE:if((0,n.assert)(v,"enqueue should have stream controller"),v.isClosed)break;v.controller.enqueue(t.chunk);break;case L.CLOSE:if((0,n.assert)(v,"close should have stream controller"),v.isClosed)break;v.isClosed=!0,v.controller.close(),this._deleteStreamController(v,c);break;case L.ERROR:(0,n.assert)(v,"error should have stream controller"),v.controller.error(O(t.reason)),this._deleteStreamController(v,c);break;case L.CANCEL_COMPLETE:t.success?v.cancelCall.resolve():v.cancelCall.reject(O(t.reason)),this._deleteStreamController(v,c);break;case L.CANCEL:if(!x)break;new Promise(function(g){g(x.onCancel&&x.onCancel(O(t.reason)))}).then(function(){u.postMessage({sourceName:r,targetName:f,stream:L.CANCEL_COMPLETE,streamId:c,success:!0})},function(g){u.postMessage({sourceName:r,targetName:f,stream:L.CANCEL_COMPLETE,streamId:c,reason:O(g)})}),x.sinkCapability.reject(O(t.reason)),x.isCancelled=!0,delete this.streamSinks[c];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(t,c){await Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]),delete this.streamControllers[c]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}a.MessageHandler=F},(W,a,R)=>{var L,O;Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var n=R(1);class I{constructor({parsedData:y,rawData:t}){Te(this,L,void 0);Te(this,O,void 0);Ee(this,L,y),Ee(this,O,t)}getRaw(){return pe(this,O)}get(y){var t;return(t=pe(this,L).get(y))!=null?t:null}getAll(){return(0,n.objectFromMap)(pe(this,L))}has(y){return pe(this,L).has(y)}}L=new WeakMap,O=new WeakMap,a.Metadata=I},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionalContentConfig=void 0;var n=R(1);class I{constructor(F,y){this.visible=!0,this.name=F,this.intent=y}}class L{constructor(F){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,F!==null){this.name=F.name,this.creator=F.creator,this._order=F.order;for(const y of F.groups)this._groups.set(y.id,new I(y.name,y.intent));if(F.baseState==="OFF")for(const y of this._groups)y.visible=!1;for(const y of F.on)this._groups.get(y).visible=!0;for(const y of F.off)this._groups.get(y).visible=!1}}_evaluateVisibilityExpression(F){const y=F.length;if(y<2)return!0;const t=F[0];for(let c=1;c<y;c++){const r=F[c];let f;if(Array.isArray(r))f=this._evaluateVisibilityExpression(r);else if(this._groups.has(r))f=this._groups.get(r).visible;else return(0,n.warn)(`Optional content group not found: ${r}`),!0;switch(t){case"And":if(!f)return!1;break;case"Or":if(f)return!0;break;case"Not":return!f;default:return!0}}return t==="And"}isVisible(F){if(this._groups.size===0)return!0;if(!F)return(0,n.warn)("Optional content group not defined."),!0;if(F.type==="OCG")return this._groups.has(F.id)?this._groups.get(F.id).visible:((0,n.warn)(`Optional content group not found: ${F.id}`),!0);if(F.type==="OCMD"){if(F.expression)return this._evaluateVisibilityExpression(F.expression);if(!F.policy||F.policy==="AnyOn"){for(const y of F.ids){if(!this._groups.has(y))return(0,n.warn)(`Optional content group not found: ${y}`),!0;if(this._groups.get(y).visible)return!0}return!1}else if(F.policy==="AllOn"){for(const y of F.ids){if(!this._groups.has(y))return(0,n.warn)(`Optional content group not found: ${y}`),!0;if(!this._groups.get(y).visible)return!1}return!0}else if(F.policy==="AnyOff"){for(const y of F.ids){if(!this._groups.has(y))return(0,n.warn)(`Optional content group not found: ${y}`),!0;if(!this._groups.get(y).visible)return!0}return!1}else if(F.policy==="AllOff"){for(const y of F.ids){if(!this._groups.has(y))return(0,n.warn)(`Optional content group not found: ${y}`),!0;if(this._groups.get(y).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${F.policy}.`),!0}return(0,n.warn)(`Unknown group type ${F.type}.`),!0}setVisibility(F,y=!0){if(!this._groups.has(F)){(0,n.warn)(`Optional content group not found: ${F}`);return}this._groups.get(F).visible=!!y}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,n.objectFromMap)(this._groups):null}getGroup(F){return this._groups.get(F)||null}}a.OptionalContentConfig=L},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFDataTransportStream=void 0;var n=R(1),I=R(5);class L{constructor(t,c){(0,n.assert)(c,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1,this._contentDispositionFilename=t.contentDispositionFilename||null;const r=t.initialData;if((r==null?void 0:r.length)>0){const f=new Uint8Array(r).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=c,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((f,u)=>{this._onReceiveData({begin:f,chunk:u})}),this._pdfDataRangeTransport.addProgressListener((f,u)=>{this._onProgress({loaded:f,total:u})}),this._pdfDataRangeTransport.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){const c=new Uint8Array(t.chunk).buffer;if(t.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(c):this._queuedChunks.push(c);else{const r=this._rangeReaders.some(function(f){return f._begin!==t.begin?!1:(f._enqueue(c),!0)});(0,n.assert)(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t,c;return(c=(t=this._fullRequestReader)==null?void 0:t._loaded)!=null?c:0}_onProgress(t){if(t.total===void 0){const c=this._rangeReaders[0];c!=null&&c.onProgress&&c.onProgress({loaded:t.loaded})}else{const c=this._fullRequestReader;c!=null&&c.onProgress&&c.onProgress({loaded:t.loaded,total:t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const c=this._rangeReaders.indexOf(t);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new O(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,c){if(c<=this._progressiveDataLength)return null;const r=new F(this,t,c);return this._pdfDataRangeTransport.requestDataRange(t,c),this._rangeReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const c of this._rangeReaders.slice(0))c.cancel(t);this._pdfDataRangeTransport.abort()}}a.PDFDataTransportStream=L;class O{constructor(t,c,r=!1,f=null){this._stream=t,this._done=r||!1,this._filename=(0,I.isPdfFile)(f)?f:null,this._queuedChunks=c||[],this._loaded=0;for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class F{constructor(t,c,r){this._stream=t,this._begin=c,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(W,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaText=void 0;class R{static textContent(I){const L=[],O={items:L,styles:Object.create(null)};function F(y){var r;if(!y)return;let t=null;const c=y.name;if(c==="#text")t=y.value;else if(R.shouldBuildText(c))(r=y==null?void 0:y.attributes)!=null&&r.textContent?t=y.attributes.textContent:y.value&&(t=y.value);else return;if(t!==null&&L.push({str:t}),!!y.children)for(const f of y.children)F(f)}return F(I),O}static shouldBuildText(I){return!(I==="textarea"||I==="input"||I==="option"||I==="select")}}a.XfaText=R},(W,a,R)=>{var A,ze;Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationLayer=void 0;var n=R(1),I=R(5),L=R(9),O=R(19),F=R(20);const y=1e3,t=new WeakSet;function c(T){return{width:T[2]-T[0],height:T[3]-T[1]}}class r{static create(e){switch(e.data.annotationType){case n.AnnotationType.LINK:return new u(e);case n.AnnotationType.TEXT:return new v(e);case n.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new g(e);case"Btn":return e.data.radioButton?new j(e):e.data.checkBox?new q(e):new D(e);case"Ch":return new w(e)}return new x(e);case n.AnnotationType.POPUP:return new i(e);case n.AnnotationType.FREETEXT:return new P(e);case n.AnnotationType.LINE:return new E(e);case n.AnnotationType.SQUARE:return new S(e);case n.AnnotationType.CIRCLE:return new N(e);case n.AnnotationType.POLYLINE:return new k(e);case n.AnnotationType.CARET:return new $(e);case n.AnnotationType.INK:return new z(e);case n.AnnotationType.POLYGON:return new B(e);case n.AnnotationType.HIGHLIGHT:return new Y(e);case n.AnnotationType.UNDERLINE:return new ee(e);case n.AnnotationType.SQUIGGLY:return new Q(e);case n.AnnotationType.STRIKEOUT:return new m(e);case n.AnnotationType.STAMP:return new o(e);case n.AnnotationType.FILEATTACHMENT:return new s(e);default:return new f(e)}}}class f{constructor(e,{isRenderable:p=!1,ignoreBorder:_=!1,createQuadrilaterals:b=!1}={}){this.isRenderable=p,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this._mouseState=e.mouseState,p&&(this.container=this._createContainer(_)),b&&(this.quadrilaterals=this._createQuadrilaterals(_))}_createContainer(e=!1){const p=this.data,_=this.page,b=this.viewport,h=document.createElement("section");let{width:M,height:U}=c(p.rect);h.setAttribute("data-annotation-id",p.id);const H=n.Util.normalizeRect([p.rect[0],_.view[3]-p.rect[1]+_.view[1],p.rect[2],_.view[3]-p.rect[3]+_.view[1]]);if(p.hasOwnCanvas){const X=b.transform.slice(),[K,Z]=n.Util.singularValueDecompose2dScale(X);M=Math.ceil(M*K),U=Math.ceil(U*Z),H[0]*=K,H[1]*=Z;for(let ne=0;ne<4;ne++)X[ne]=Math.sign(X[ne]);h.style.transform=`matrix(${X.join(",")})`}else h.style.transform=`matrix(${b.transform.join(",")})`;if(h.style.transformOrigin=`${-H[0]}px ${-H[1]}px`,!e&&p.borderStyle.width>0){h.style.borderWidth=`${p.borderStyle.width}px`,p.borderStyle.style!==n.AnnotationBorderStyleType.UNDERLINE&&(M-=2*p.borderStyle.width,U-=2*p.borderStyle.width);const X=p.borderStyle.horizontalCornerRadius,K=p.borderStyle.verticalCornerRadius;if(X>0||K>0){const ne=`${X}px / ${K}px`;h.style.borderRadius=ne}switch(p.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:h.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:h.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:h.style.borderBottomStyle="solid";break}p.borderColor||p.color||null?h.style.borderColor=n.Util.makeHexColor(p.color[0]|0,p.color[1]|0,p.color[2]|0):h.style.borderWidth=0}return h.style.left=`${H[0]}px`,h.style.top=`${H[1]}px`,p.hasOwnCanvas?h.style.width=h.style.height="auto":(h.style.width=`${M}px`,h.style.height=`${U}px`),h}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const p=[],_=this.data.rect;for(const b of this.data.quadPoints)this.data.rect=[b[2].x,b[2].y,b[1].x,b[1].y],p.push(this._createContainer(e));return this.data.rect=_,p}_createPopup(e,p){let _=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,_=this.quadrilaterals[0]),e||(e=document.createElement("div"),e.style.height=_.style.height,e.style.width=_.style.width,_.appendChild(e));const h=new l({container:_,trigger:e,color:p.color,titleObj:p.titleObj,modificationDate:p.modificationDate,contentsObj:p.contentsObj,richText:p.richText,hideWrapper:!0}).render();h.style.left=_.style.width,_.appendChild(h)}_renderQuadrilaterals(e){for(const p of this.quadrilaterals)p.className=e;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,p=null){const _=[];if(this._fieldObjects){const b=this._fieldObjects[e];if(b)for(const{page:h,id:M,exportValues:U}of b){if(h===-1||M===p)continue;const H=typeof U=="string"?U:null,X=document.getElementById(M);if(X&&!t.has(X)){(0,n.warn)(`_getElementsByName - element not allowed: ${M}`);continue}_.push({id:M,exportValue:H,domElement:X})}return _}for(const b of document.getElementsByName(e)){const{id:h,exportValue:M}=b;h!==p&&(!t.has(b)||_.push({id:h,exportValue:M,domElement:b}))}return _}static get platform(){const e=typeof navigator!="undefined"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}class u extends f{constructor(e,p=null){const _=!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.resetForm||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"]));super(e,{isRenderable:_,ignoreBorder:!!(p!=null&&p.ignoreBorder),createQuadrilaterals:!0})}render(){var b;const{data:e,linkService:p}=this,_=document.createElement("a");if(e.url)p.addLinkAttributes||(0,n.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),(b=p.addLinkAttributes)==null||b.call(p,_,e.url,e.newWindow);else if(e.action)this._bindNamedAction(_,e.action);else if(e.dest)this._bindLink(_,e.dest);else{let h=!1;e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(h=!0,this._bindJSAction(_,e)),e.resetForm?this._bindResetFormAction(_,e.resetForm):h||this._bindLink(_,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((h,M)=>{const U=M===0?_:_.cloneNode();return h.appendChild(U),h}):(this.container.className="linkAnnotation",this.container.appendChild(_),this.container)}_bindLink(e,p){e.href=this.linkService.getDestinationHash(p),e.onclick=()=>(p&&this.linkService.goToDestination(p),!1),(p||p==="")&&(e.className="internalLink")}_bindNamedAction(e,p){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(p),!1),e.className="internalLink"}_bindJSAction(e,p){e.href=this.linkService.getAnchorUrl("");const _=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const b of Object.keys(p.actions)){const h=_.get(b);!h||(e[h]=()=>{var M;return(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p.id,name:b}}),!1})}e.onclick||(e.onclick=()=>!1),e.className="internalLink"}_bindResetFormAction(e,p){const _=e.onclick;if(_||(e.href=this.linkService.getAnchorUrl("")),e.className="internalLink",!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),_||(e.onclick=()=>!1);return}e.onclick=()=>{var K;_&&_();const{fields:b,refs:h,include:M}=p,U=[];if(b.length!==0||h.length!==0){const Z=new Set(h);for(const ne of b){const te=this._fieldObjects[ne]||[];for(const{id:se}of te)Z.add(se)}for(const ne of Object.values(this._fieldObjects))for(const te of ne)Z.has(te.id)===M&&U.push(te)}else for(const Z of Object.values(this._fieldObjects))U.push(...Z);const H=this.annotationStorage,X=[];for(const Z of U){const{id:ne}=Z;switch(X.push(ne),Z.type){case"text":{const se=Z.defaultValue||"";H.setValue(ne,{value:se,valueAsString:se});break}case"checkbox":case"radiobutton":{const se=Z.defaultValue===Z.exportValues;H.setValue(ne,{value:se});break}case"combobox":case"listbox":{const se=Z.defaultValue||"";H.setValue(ne,{value:se});break}default:continue}const te=document.getElementById(ne);!te||!t.has(te)||te.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((K=this.linkService.eventBus)==null||K.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:X,name:"ResetForm"}})),!1}}}class v extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}class x extends f{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){const{isWin:p,isMac:_}=f.platform;return p&&e.ctrlKey||_&&e.metaKey}_setEventListener(e,p,_,b){p.includes("mouse")?e.addEventListener(p,h=>{var M;(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:b(h),shift:h.shiftKey,modifier:this._getKeyModifier(h)}})}):e.addEventListener(p,h=>{var M;(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:b(h)}})})}_setEventListeners(e,p,_){var b;for(const[h,M]of p)(M==="Action"||((b=this.data.actions)==null?void 0:b[M]))&&this._setEventListener(e,h,M,_)}_setBackgroundColor(e){const p=this.data.backgroundColor||null;e.style.backgroundColor=p===null?"transparent":n.Util.makeHexColor(p[0],p[1],p[2])}_dispatchEventFromSandbox(e,p){const _=(h,M,U)=>{const H=U.detail[h];U.target.style[M]=O.ColorConverters[`${H[0]}_HTML`](H.slice(1))},b={display:h=>{const M=h.detail.display%2===1;h.target.style.visibility=M?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:M,print:h.detail.display===0||h.detail.display===3})},print:h=>{this.annotationStorage.setValue(this.data.id,{print:h.detail.print})},hidden:h=>{h.target.style.visibility=h.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:h.detail.hidden})},focus:h=>{setTimeout(()=>h.target.focus({preventScroll:!1}),0)},userName:h=>{h.target.title=h.detail.userName},readonly:h=>{h.detail.readonly?h.target.setAttribute("readonly",""):h.target.removeAttribute("readonly")},required:h=>{h.detail.required?h.target.setAttribute("required",""):h.target.removeAttribute("required")},bgColor:h=>{_("bgColor","backgroundColor",h)},fillColor:h=>{_("fillColor","backgroundColor",h)},fgColor:h=>{_("fgColor","color",h)},textColor:h=>{_("textColor","color",h)},borderColor:h=>{_("borderColor","borderColor",h)},strokeColor:h=>{_("strokeColor","borderColor",h)}};for(const h of Object.keys(p.detail)){const M=e[h]||b[h];M&&M(p)}}}class g extends x{constructor(e){const p=e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:p})}setPropertyOnSiblings(e,p,_,b){const h=this.annotationStorage;for(const M of this._getElementsByName(e.name,e.id))M.domElement&&(M.domElement[p]=_),h.setValue(M.id,{[b]:_})}render(){var b;const e=this.annotationStorage,p=this.data.id;this.container.className="textWidgetAnnotation";let _=null;if(this.renderForms){const h=e.getValue(p,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),M=h.valueAsString||h.value||"",U={userValue:null,formattedValue:null};this.data.multiLine?(_=document.createElement("textarea"),_.textContent=M):(_=document.createElement("input"),_.type="text",_.setAttribute("value",M)),t.add(_),_.disabled=this.data.readOnly,_.name=this.data.fieldName,_.tabIndex=y,U.userValue=M,_.setAttribute("id",p),_.addEventListener("input",X=>{e.setValue(p,{value:X.target.value}),this.setPropertyOnSiblings(_,"value",X.target.value,"value")}),_.addEventListener("resetform",X=>{const K=this.data.defaultFieldValue||"";_.value=U.userValue=K,delete U.formattedValue});let H=X=>{U.formattedValue&&(X.target.value=U.formattedValue),X.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_.addEventListener("focus",K=>{U.userValue&&(K.target.value=U.userValue)}),_.addEventListener("updatefromsandbox",K=>{const Z={value(ne){U.userValue=ne.detail.value||"",e.setValue(p,{value:U.userValue.toString()}),U.formattedValue||(ne.target.value=U.userValue)},valueAsString(ne){U.formattedValue=ne.detail.valueAsString||"",ne.target!==document.activeElement&&(ne.target.value=U.formattedValue),e.setValue(p,{formattedValue:U.formattedValue})},selRange(ne){const[te,se]=ne.detail.selRange;te>=0&&se<ne.target.value.length&&ne.target.setSelectionRange(te,se)}};this._dispatchEventFromSandbox(Z,K)}),_.addEventListener("keydown",K=>{var ne;let Z=-1;K.key==="Escape"?Z=0:K.key==="Enter"?Z=2:K.key==="Tab"&&(Z=3),Z!==-1&&(U.userValue=K.target.value,(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:K.target.value,willCommit:!0,commitKey:Z,selStart:K.target.selectionStart,selEnd:K.target.selectionEnd}}))});const X=H;H=null,_.addEventListener("blur",K=>{var Z;U.userValue=K.target.value,this._mouseState.isDown&&((Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:K.target.value,willCommit:!0,commitKey:1,selStart:K.target.selectionStart,selEnd:K.target.selectionEnd}})),X(K)}),(b=this.data.actions)!=null&&b.Keystroke&&_.addEventListener("beforeinput",K=>{var ie;U.formattedValue="";const{data:Z,target:ne}=K,{value:te,selectionStart:se,selectionEnd:le}=ne;(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:te,change:Z,willCommit:!1,selStart:se,selEnd:le}})}),this._setEventListeners(_,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=>K.target.value)}if(H&&_.addEventListener("blur",H),this.data.maxLen!==null&&(_.maxLength=this.data.maxLen),this.data.comb){const K=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;_.classList.add("comb"),_.style.letterSpacing=`calc(${K}px - 1ch)`}}else _=document.createElement("div"),_.textContent=this.data.fieldValue,_.style.verticalAlign="middle",_.style.display="table-cell";return this._setTextStyle(_),this._setBackgroundColor(_),this.container.appendChild(_),this.container}_setTextStyle(e){const p=["left","center","right"],{fontSize:_,fontColor:b}=this.data.defaultAppearanceData,h=e.style;_&&(h.fontSize=`${_}px`),h.color=n.Util.makeHexColor(b[0],b[1],b[2]),this.data.textAlignment!==null&&(h.textAlign=p[this.data.textAlignment])}}class q extends x{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,p=this.data,_=p.id;let b=e.getValue(_,{value:p.exportValue===p.fieldValue}).value;typeof b=="string"&&(b=b!=="Off",e.setValue(_,{value:b})),this.container.className="buttonWidgetAnnotation checkBox";const h=document.createElement("input");return t.add(h),h.disabled=p.readOnly,h.type="checkbox",h.name=p.fieldName,b&&h.setAttribute("checked",!0),h.setAttribute("id",_),h.setAttribute("exportValue",p.exportValue),h.tabIndex=y,h.addEventListener("change",M=>{const{name:U,checked:H}=M.target;for(const X of this._getElementsByName(U,_)){const K=H&&X.exportValue===p.exportValue;X.domElement&&(X.domElement.checked=K),e.setValue(X.id,{value:K})}e.setValue(_,{value:H})}),h.addEventListener("resetform",M=>{const U=p.defaultFieldValue||"Off";M.target.checked=U===p.exportValue}),this.enableScripting&&this.hasJSActions&&(h.addEventListener("updatefromsandbox",M=>{const U={value(H){H.target.checked=H.detail.value!=="Off",e.setValue(_,{value:H.target.checked})}};this._dispatchEventFromSandbox(U,M)}),this._setEventListeners(h,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],M=>M.target.checked)),this._setBackgroundColor(h),this.container.appendChild(h),this.container}}class j extends x{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,p=this.data,_=p.id;let b=e.getValue(_,{value:p.fieldValue===p.buttonValue}).value;typeof b=="string"&&(b=b!==p.buttonValue,e.setValue(_,{value:b}));const h=document.createElement("input");if(t.add(h),h.disabled=p.readOnly,h.type="radio",h.name=p.fieldName,b&&h.setAttribute("checked",!0),h.setAttribute("id",_),h.tabIndex=y,h.addEventListener("change",M=>{const{name:U,checked:H}=M.target;for(const X of this._getElementsByName(U,_))e.setValue(X.id,{value:!1});e.setValue(_,{value:H})}),h.addEventListener("resetform",M=>{const U=p.defaultFieldValue;M.target.checked=U!=null&&U===p.buttonValue}),this.enableScripting&&this.hasJSActions){const M=p.buttonValue;h.addEventListener("updatefromsandbox",U=>{const H={value:X=>{const K=M===X.detail.value;for(const Z of this._getElementsByName(X.target.name)){const ne=K&&Z.id===_;Z.domElement&&(Z.domElement.checked=ne),e.setValue(Z.id,{value:ne})}}};this._dispatchEventFromSandbox(H,U)}),this._setEventListeners(h,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],U=>U.target.checked)}return this._setBackgroundColor(h),this.container.appendChild(h),this.container}}class D extends u{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),e}}class w extends x{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,p=this.data.id;e.getValue(p,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});let{fontSize:_}=this.data.defaultAppearanceData;_||(_=9);const b=`calc(${_}px * var(--zoom-factor))`,h=document.createElement("select");t.add(h),h.disabled=this.data.readOnly,h.name=this.data.fieldName,h.setAttribute("id",p),h.tabIndex=y,h.style.fontSize=`${_}px`,this.data.combo||(h.size=this.data.options.length,this.data.multiSelect&&(h.multiple=!0)),h.addEventListener("resetform",H=>{const X=this.data.defaultFieldValue;for(const K of h.options)K.selected=K.value===X});for(const H of this.data.options){const X=document.createElement("option");X.textContent=H.displayValue,X.value=H.exportValue,this.data.combo&&(X.style.fontSize=b),this.data.fieldValue.includes(H.exportValue)&&X.setAttribute("selected",!0),h.appendChild(X)}const M=(H,X)=>{const K=X?"value":"textContent",Z=H.target.options;return H.target.multiple?Array.prototype.filter.call(Z,ne=>ne.selected).map(ne=>ne[K]):Z.selectedIndex===-1?null:Z[Z.selectedIndex][K]},U=H=>{const X=H.target.options;return Array.prototype.map.call(X,K=>({displayValue:K.textContent,exportValue:K.value}))};return this.enableScripting&&this.hasJSActions?(h.addEventListener("updatefromsandbox",H=>{const X={value(K){const Z=K.detail.value,ne=new Set(Array.isArray(Z)?Z:[Z]);for(const te of h.options)te.selected=ne.has(te.value);e.setValue(p,{value:M(K,!0)})},multipleSelection(K){h.multiple=!0},remove(K){const Z=h.options,ne=K.detail.remove;Z[ne].selected=!1,h.remove(ne),Z.length>0&&Array.prototype.findIndex.call(Z,se=>se.selected)===-1&&(Z[0].selected=!0),e.setValue(p,{value:M(K,!0),items:U(K)})},clear(K){for(;h.length!==0;)h.remove(0);e.setValue(p,{value:null,items:[]})},insert(K){const{index:Z,displayValue:ne,exportValue:te}=K.detail.insert,se=document.createElement("option");se.textContent=ne,se.value=te,h.insertBefore(se,h.children[Z]),e.setValue(p,{value:M(K,!0),items:U(K)})},items(K){const{items:Z}=K.detail;for(;h.length!==0;)h.remove(0);for(const ne of Z){const{displayValue:te,exportValue:se}=ne,le=document.createElement("option");le.textContent=te,le.value=se,h.appendChild(le)}h.options.length>0&&(h.options[0].selected=!0),e.setValue(p,{value:M(K,!0),items:U(K)})},indices(K){const Z=new Set(K.detail.indices);for(const ne of K.target.options)ne.selected=Z.has(ne.index);e.setValue(p,{value:M(K,!0)})},editable(K){K.target.disabled=!K.detail.editable}};this._dispatchEventFromSandbox(X,H)}),h.addEventListener("input",H=>{var Z;const X=M(H,!0),K=M(H,!1);e.setValue(p,{value:X}),(Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:K,changeEx:X,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],H=>H.target.checked)):h.addEventListener("input",function(H){e.setValue(p,{value:M(H)})}),this._setBackgroundColor(h),this.container.appendChild(h),this.container}}class i extends f{constructor(e){var _,b,h;const p=!!(((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p})}render(){const e=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",e.includes(this.data.parentType))return this.container;const p=`[data-annotation-id="${this.data.parentId}"]`,_=this.layer.querySelectorAll(p);if(_.length===0)return this.container;const b=new l({container:this.container,trigger:Array.from(_),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),h=this.page,M=n.Util.normalizeRect([this.data.parentRect[0],h.view[3]-this.data.parentRect[1]+h.view[1],this.data.parentRect[2],h.view[3]-this.data.parentRect[3]+h.view[1]]),U=M[0]+this.data.parentRect[2]-this.data.parentRect[0],H=M[1];return this.container.style.transformOrigin=`${-U}px ${-H}px`,this.container.style.left=`${U}px`,this.container.style.top=`${H}px`,this.container.appendChild(b.render()),this.container}}class l{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){var U,H;const p=document.createElement("div");p.className="popupWrapper",this.hideElement=this.hideWrapper?p:this.container,this.hideElement.hidden=!0;const _=document.createElement("div");_.className="popup";const b=this.color;if(b){const X=.7*(255-b[0])+b[0],K=.7*(255-b[1])+b[1],Z=.7*(255-b[2])+b[2];_.style.backgroundColor=n.Util.makeHexColor(X|0,K|0,Z|0)}const h=document.createElement("h1");h.dir=this.titleObj.dir,h.textContent=this.titleObj.str,_.appendChild(h);const M=I.PDFDateString.toDateObject(this.modificationDate);if(M){const X=document.createElement("span");X.className="popupDate",X.textContent="{{date}}, {{time}}",X.dataset.l10nId="annotation_date_string",X.dataset.l10nArgs=JSON.stringify({date:M.toLocaleDateString(),time:M.toLocaleTimeString()}),_.appendChild(X)}if(((U=this.richText)==null?void 0:U.str)&&(!((H=this.contentsObj)!=null&&H.str)||this.contentsObj.str===this.richText.str))F.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:_}),_.lastChild.className="richText popupContent";else{const X=this._formatContents(this.contentsObj);_.appendChild(X)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const X of this.trigger)X.addEventListener("click",this._toggle.bind(this)),X.addEventListener("mouseover",this._show.bind(this,!1)),X.addEventListener("mouseout",this._hide.bind(this,!1));return _.addEventListener("click",this._hide.bind(this,!0)),p.appendChild(_),p}_formatContents({str:e,dir:p}){const _=document.createElement("p");_.className="popupContent",_.dir=p;const b=e.split(/(?:\r\n?|\n)/);for(let h=0,M=b.length;h<M;++h){const U=b[h];_.appendChild(document.createTextNode(U)),h<M-1&&_.appendChild(document.createElement("br"))}return _}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class P extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class E extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,{width:p,height:_}=c(e.rect),b=this.svgFactory.create(p,_),h=this.svgFactory.createElement("svg:line");return h.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),h.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),h.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),h.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),h.setAttribute("stroke-width",e.borderStyle.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),b.appendChild(h),this.container.append(b),this._createPopup(h,e),this.container}}class S extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,{width:p,height:_}=c(e.rect),b=this.svgFactory.create(p,_),h=e.borderStyle.width,M=this.svgFactory.createElement("svg:rect");return M.setAttribute("x",h/2),M.setAttribute("y",h/2),M.setAttribute("width",p-h),M.setAttribute("height",_-h),M.setAttribute("stroke-width",h||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),b.appendChild(M),this.container.append(b),this._createPopup(M,e),this.container}}class N extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,{width:p,height:_}=c(e.rect),b=this.svgFactory.create(p,_),h=e.borderStyle.width,M=this.svgFactory.createElement("svg:ellipse");return M.setAttribute("cx",p/2),M.setAttribute("cy",_/2),M.setAttribute("rx",p/2-h/2),M.setAttribute("ry",_/2-h/2),M.setAttribute("stroke-width",h||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),b.appendChild(M),this.container.append(b),this._createPopup(M,e),this.container}}class k extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:p,height:_}=c(e.rect),b=this.svgFactory.create(p,_);let h=[];for(const U of e.vertices){const H=U.x-e.rect[0],X=e.rect[3]-U.y;h.push(H+","+X)}h=h.join(" ");const M=this.svgFactory.createElement(this.svgElementName);return M.setAttribute("points",h),M.setAttribute("stroke-width",e.borderStyle.width||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),b.appendChild(M),this.container.append(b),this._createPopup(M,e),this.container}}class B extends k{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $ extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class z extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:p,height:_}=c(e.rect),b=this.svgFactory.create(p,_);for(const h of e.inkLists){let M=[];for(const H of h){const X=H.x-e.rect[0],K=e.rect[3]-H.y;M.push(`${X},${K}`)}M=M.join(" ");const U=this.svgFactory.createElement(this.svgElementName);U.setAttribute("points",M),U.setAttribute("stroke-width",e.borderStyle.width||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),this._createPopup(U,e),b.appendChild(U)}return this.container.append(b),this.container}}class Y extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class ee extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Q extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class m extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class o extends f{constructor(e){var _,b,h;const p=!!(e.data.hasPopup||((_=e.data.titleObj)==null?void 0:_.str)||((b=e.data.contentsObj)==null?void 0:b.str)||((h=e.data.richText)==null?void 0:h.str));super(e,{isRenderable:p,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class s extends f{constructor(e){var b;super(e,{isRenderable:!0});const{filename:p,content:_}=this.data.file;this.filename=(0,I.getFilenameFromUrl)(p),this.content=_,(b=this.linkService.eventBus)==null||b.dispatch("fileattachmentannotation",{source:this,id:(0,n.stringToPDFString)(p),filename:p,content:_})}render(){var p,_;this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((p=this.data.titleObj)==null?void 0:p.str)||((_=this.data.contentsObj)==null?void 0:_.str)||this.data.richText)&&this._createPopup(e,this.data),this.container.appendChild(e),this.container}_download(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.container,this.content,this.filename)}}class d{static render(e){const p=[],_=[];for(const h of e.annotations){if(!h)continue;const{width:M,height:U}=c(h.rect);if(!(M<=0||U<=0)){if(h.annotationType===n.AnnotationType.POPUP){_.push(h);continue}p.push(h)}}_.length&&p.push(..._);const b=e.div;for(const h of p){const M=r.create({data:h,layer:b,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new I.DOMSVGFactory,annotationStorage:e.annotationStorage||new L.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(M.isRenderable){const U=M.render();if(h.hidden&&(U.style.visibility="hidden"),Array.isArray(U))for(const H of U)b.appendChild(H);else M instanceof i?b.prepend(U):b.appendChild(U)}}De(this,A,ze).call(this,b,e.annotationCanvasMap)}static update(e){const{page:p,viewport:_,annotations:b,annotationCanvasMap:h,div:M}=e,U=_.transform,H=`matrix(${U.join(",")})`;let X,K;for(const Z of b){const ne=M.querySelectorAll(`[data-annotation-id="${Z.id}"]`);if(ne)for(const te of ne)if(Z.hasOwnCanvas){const se=n.Util.normalizeRect([Z.rect[0],p.view[3]-Z.rect[1]+p.view[1],Z.rect[2],p.view[3]-Z.rect[3]+p.view[1]]);if(!K){X=Math.abs(U[0]||U[1]);const oe=U.slice();for(let ce=0;ce<4;ce++)oe[ce]=Math.sign(oe[ce]);K=`matrix(${oe.join(",")})`}const le=se[0]*X,ie=se[1]*X;te.style.left=`${le}px`,te.style.top=`${ie}px`,te.style.transformOrigin=`${-le}px ${-ie}px`,te.style.transform=K}else te.style.transform=H}De(this,A,ze).call(this,M,h),M.hidden=!1}}A=new WeakSet,ze=function(e,p){if(!!p){for(const[_,b]of p){const h=e.querySelector(`[data-annotation-id="${_}"]`);if(!h)continue;const{firstChild:M}=h;M.nodeName==="CANVAS"?h.replaceChild(b,M):h.insertBefore(b,M)}p.clear()}},Te(d,A),a.AnnotationLayer=d},(W,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorConverters=void 0;function R(I){return Math.floor(Math.max(0,Math.min(1,I))*255).toString(16).padStart(2,"0")}class n{static CMYK_G([L,O,F,y]){return["G",1-Math.min(1,.3*L+.59*F+.11*O+y)]}static G_CMYK([L]){return["CMYK",0,0,0,1-L]}static G_RGB([L]){return["RGB",L,L,L]}static G_HTML([L]){const O=R(L);return`#${O}${O}${O}`}static RGB_G([L,O,F]){return["G",.3*L+.59*O+.11*F]}static RGB_HTML([L,O,F]){const y=R(L),t=R(O),c=R(F);return`#${y}${t}${c}`}static T_HTML(){return"#00000000"}static CMYK_RGB([L,O,F,y]){return["RGB",1-Math.min(1,L+y),1-Math.min(1,F+y),1-Math.min(1,O+y)]}static CMYK_HTML(L){return this.RGB_HTML(this.CMYK_RGB(L))}static RGB_CMYK([L,O,F]){const y=1-L,t=1-O,c=1-F,r=Math.min(y,t,c);return["CMYK",y,t,c,r]}}a.ColorConverters=n},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaLayer=void 0;var n=R(1),I=R(17);class L{static setupStorage(F,y,t,c,r){const f=c.getValue(y,{value:null});switch(t.name){case"textarea":if(f.value!==null&&(F.textContent=f.value),r==="print")break;F.addEventListener("input",u=>{c.setValue(y,{value:u.target.value})});break;case"input":if(t.attributes.type==="radio"||t.attributes.type==="checkbox"){if(f.value===t.attributes.xfaOn?F.setAttribute("checked",!0):f.value===t.attributes.xfaOff&&F.removeAttribute("checked"),r==="print")break;F.addEventListener("change",u=>{c.setValue(y,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(f.value!==null&&F.setAttribute("value",f.value),r==="print")break;F.addEventListener("input",u=>{c.setValue(y,{value:u.target.value})})}break;case"select":if(f.value!==null)for(const u of t.children)u.attributes.value===f.value&&(u.attributes.selected=!0);F.addEventListener("input",u=>{const v=u.target.options,x=v.selectedIndex===-1?"":v[v.selectedIndex].value;c.setValue(y,{value:x})});break}}static setAttributes({html:F,element:y,storage:t=null,intent:c,linkService:r}){var v;const{attributes:f}=y,u=F instanceof HTMLAnchorElement;f.type==="radio"&&(f.name=`${f.name}-${c}`);for(const[x,g]of Object.entries(f))if(!(g==null||x==="dataId"))if(x!=="style")if(x==="textContent")F.textContent=g;else if(x==="class")g.length&&F.setAttribute(x,g.join(" "));else{if(u&&(x==="href"||x==="newWindow"))continue;F.setAttribute(x,g)}else Object.assign(F.style,g);u&&(r.addLinkAttributes||(0,n.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),(v=r.addLinkAttributes)==null||v.call(r,F,f.href,f.newWindow)),t&&f.dataId&&this.setupStorage(F,f.dataId,y,t)}static render(F){var g;const y=F.annotationStorage,t=F.linkService,c=F.xfaHtml,r=F.intent||"display",f=document.createElement(c.name);c.attributes&&this.setAttributes({html:f,element:c,intent:r,linkService:t});const u=[[c,-1,f]],v=F.div;if(v.appendChild(f),F.viewport){const q=`matrix(${F.viewport.transform.join(",")})`;v.style.transform=q}r!=="richText"&&v.setAttribute("class","xfaLayer xfaFont");const x=[];for(;u.length>0;){const[q,j,D]=u[u.length-1];if(j+1===q.children.length){u.pop();continue}const w=q.children[++u[u.length-1][1]];if(w===null)continue;const{name:i}=w;if(i==="#text"){const P=document.createTextNode(w.value);x.push(P),D.appendChild(P);continue}let l;if((g=w==null?void 0:w.attributes)!=null&&g.xmlns?l=document.createElementNS(w.attributes.xmlns,i):l=document.createElement(i),D.appendChild(l),w.attributes&&this.setAttributes({html:l,element:w,storage:y,intent:r,linkService:t}),w.children&&w.children.length>0)u.push([w,-1,l]);else if(w.value){const P=document.createTextNode(w.value);I.XfaText.shouldBuildText(i)&&x.push(P),l.appendChild(P)}}for(const q of v.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))q.setAttribute("readOnly",!0);return{textDivs:x}}static update(F){const y=`matrix(${F.viewport.transform.join(",")})`;F.div.style.transform=y,F.div.hidden=!1}}a.XfaLayer=L},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.renderTextLayer=q;var n=R(1);const I=1e5,L=30,O=.8,F=new Map,y=/^\s+$/g;function t(j,D){const w=F.get(j);if(w)return w;D.save(),D.font=`${L}px ${j}`;const i=D.measureText("");let l=i.fontBoundingBoxAscent,P=Math.abs(i.fontBoundingBoxDescent);if(l){D.restore();const S=l/(l+P);return F.set(j,S),S}D.strokeStyle="red",D.clearRect(0,0,L,L),D.strokeText("g",0,0);let E=D.getImageData(0,0,L,L).data;P=0;for(let S=E.length-1-3;S>=0;S-=4)if(E[S]>0){P=Math.ceil(S/4/L);break}D.clearRect(0,0,L,L),D.strokeText("A",0,L),E=D.getImageData(0,0,L,L).data,l=0;for(let S=0,N=E.length;S<N;S+=4)if(E[S]>0){l=L-Math.floor(S/4/L);break}if(D.restore(),l){const S=l/(l+P);return F.set(j,S),S}return F.set(j,O),O}function c(j,D,w,i){const l=document.createElement("span"),P=j._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:D.str!=="",hasEOL:D.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:D.str!=="",hasEOL:D.hasEOL};j._textDivs.push(l);const E=n.Util.transform(j._viewport.transform,D.transform);let S=Math.atan2(E[1],E[0]);const N=w[D.fontName];N.vertical&&(S+=Math.PI/2);const k=Math.hypot(E[2],E[3]),B=k*t(N.fontFamily,i);let $,z;S===0?($=E[4],z=E[5]-B):($=E[4]+B*Math.sin(S),z=E[5]-B*Math.cos(S)),l.style.left=`${$}px`,l.style.top=`${z}px`,l.style.fontSize=`${k}px`,l.style.fontFamily=N.fontFamily,l.setAttribute("role","presentation"),l.textContent=D.str,l.dir=D.dir,j._fontInspectorEnabled&&(l.dataset.fontName=D.fontName),S!==0&&(P.angle=S*(180/Math.PI));let Y=!1;if(D.str.length>1||j._enhanceTextSelection&&y.test(D.str))Y=!0;else if(D.str!==" "&&D.transform[0]!==D.transform[3]){const ee=Math.abs(D.transform[0]),Q=Math.abs(D.transform[3]);ee!==Q&&Math.max(ee,Q)/Math.min(ee,Q)>1.5&&(Y=!0)}if(Y&&(N.vertical?P.canvasWidth=D.height*j._viewport.scale:P.canvasWidth=D.width*j._viewport.scale),j._textDivProperties.set(l,P),j._textContentStream&&j._layoutText(l),j._enhanceTextSelection&&P.hasText){let ee=1,Q=0;S!==0&&(ee=Math.cos(S),Q=Math.sin(S));const m=(N.vertical?D.height:D.width)*j._viewport.scale,o=k;let s,d;S!==0?(s=[ee,Q,-Q,ee,$,z],d=n.Util.getAxialAlignedBoundingBox([0,0,m,o],s)):d=[$,z,$+m,z+o],j._bounds.push({left:d[0],top:d[1],right:d[2],bottom:d[3],div:l,size:[m,o],m:s})}}function r(j){if(j._canceled)return;const D=j._textDivs,w=j._capability,i=D.length;if(i>I){j._renderingDone=!0,w.resolve();return}if(!j._textContentStream)for(let l=0;l<i;l++)j._layoutText(D[l]);j._renderingDone=!0,w.resolve()}function f(j,D,w){let i=0;for(let l=0;l<w;l++){const P=j[D++];P>0&&(i=i?Math.min(P,i):P)}return i}function u(j){const D=j._bounds,w=j._viewport,i=v(w.width,w.height,D);for(let l=0;l<i.length;l++){const P=D[l].div,E=j._textDivProperties.get(P);if(E.angle===0){E.paddingLeft=D[l].left-i[l].left,E.paddingTop=D[l].top-i[l].top,E.paddingRight=i[l].right-D[l].right,E.paddingBottom=i[l].bottom-D[l].bottom,j._textDivProperties.set(P,E);continue}const S=i[l],N=D[l],k=N.m,B=k[0],$=k[1],z=[[0,0],[0,N.size[1]],[N.size[0],0],N.size],Y=new Float64Array(64);for(let Q=0,m=z.length;Q<m;Q++){const o=n.Util.applyTransform(z[Q],k);Y[Q+0]=B&&(S.left-o[0])/B,Y[Q+4]=$&&(S.top-o[1])/$,Y[Q+8]=B&&(S.right-o[0])/B,Y[Q+12]=$&&(S.bottom-o[1])/$,Y[Q+16]=$&&(S.left-o[0])/-$,Y[Q+20]=B&&(S.top-o[1])/B,Y[Q+24]=$&&(S.right-o[0])/-$,Y[Q+28]=B&&(S.bottom-o[1])/B,Y[Q+32]=B&&(S.left-o[0])/-B,Y[Q+36]=$&&(S.top-o[1])/-$,Y[Q+40]=B&&(S.right-o[0])/-B,Y[Q+44]=$&&(S.bottom-o[1])/-$,Y[Q+48]=$&&(S.left-o[0])/$,Y[Q+52]=B&&(S.top-o[1])/-B,Y[Q+56]=$&&(S.right-o[0])/$,Y[Q+60]=B&&(S.bottom-o[1])/-B}const ee=1+Math.min(Math.abs(B),Math.abs($));E.paddingLeft=f(Y,32,16)/ee,E.paddingTop=f(Y,48,16)/ee,E.paddingRight=f(Y,0,16)/ee,E.paddingBottom=f(Y,16,16)/ee,j._textDivProperties.set(P,E)}}function v(j,D,w){const i=w.map(function(P,E){return{x1:P.left,y1:P.top,x2:P.right,y2:P.bottom,index:E,x1New:void 0,x2New:void 0}});x(j,i);const l=new Array(w.length);for(const P of i){const E=P.index;l[E]={left:P.x1New,top:0,right:P.x2New,bottom:0}}w.map(function(P,E){const S=l[E],N=i[E];N.x1=P.top,N.y1=j-S.right,N.x2=P.bottom,N.y2=j-S.left,N.index=E,N.x1New=void 0,N.x2New=void 0}),x(D,i);for(const P of i){const E=P.index;l[E].top=P.x1New,l[E].bottom=P.x2New}return l}function x(j,D){D.sort(function(l,P){return l.x1-P.x1||l.index-P.index});const i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const l of D){let P=0;for(;P<i.length&&i[P].end<=l.y1;)P++;let E=i.length-1;for(;E>=0&&i[E].start>=l.y2;)E--;let S,N,k,B,$=-1/0;for(k=P;k<=E;k++){S=i[k],N=S.boundary;let ee;N.x2>l.x1?ee=N.index>l.index?N.x1New:l.x1:N.x2New===void 0?ee=(N.x2+l.x1)/2:ee=N.x2New,ee>$&&($=ee)}for(l.x1New=$,k=P;k<=E;k++)S=i[k],N=S.boundary,N.x2New===void 0?N.x2>l.x1?N.index>l.index&&(N.x2New=N.x2):N.x2New=$:N.x2New>$&&(N.x2New=Math.max($,N.x2));const z=[];let Y=null;for(k=P;k<=E;k++){S=i[k],N=S.boundary;const ee=N.x2>l.x2?N:l;Y===ee?z[z.length-1].end=S.end:(z.push({start:S.start,end:S.end,boundary:ee}),Y=ee)}for(i[P].start<l.y1&&(z[0].start=l.y1,z.unshift({start:i[P].start,end:l.y1,boundary:i[P].boundary})),l.y2<i[E].end&&(z[z.length-1].end=l.y2,z.push({start:l.y2,end:i[E].end,boundary:i[E].boundary})),k=P;k<=E;k++){if(S=i[k],N=S.boundary,N.x2New!==void 0)continue;let ee=!1;for(B=P-1;!ee&&B>=0&&i[B].start>=N.y1;B--)ee=i[B].boundary===N;for(B=E+1;!ee&&B<i.length&&i[B].end<=N.y2;B++)ee=i[B].boundary===N;for(B=0;!ee&&B<z.length;B++)ee=z[B].boundary===N;ee||(N.x2New=$)}Array.prototype.splice.apply(i,[P,E-P+1].concat(z))}for(const l of i){const P=l.boundary;P.x2New===void 0&&(P.x2New=Math.max(j,P.x2))}}class g{constructor({textContent:D,textContentStream:w,container:i,viewport:l,textDivs:P,textContentItemsStr:E,enhanceTextSelection:S}){var N;this._textContent=D,this._textContentStream=w,this._container=i,this._document=i.ownerDocument,this._viewport=l,this._textDivs=P||[],this._textContentItemsStr=E||[],this._enhanceTextSelection=!!S,this._fontInspectorEnabled=!!((N=globalThis.FontInspector)!=null&&N.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(D,w){for(let i=0,l=D.length;i<l;i++){if(D[i].str===void 0){if(D[i].type==="beginMarkedContentProps"||D[i].type==="beginMarkedContent"){const P=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),D[i].id!==null&&this._container.setAttribute("id",`${D[i].id}`),P.appendChild(this._container)}else D[i].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(D[i].str),c(this,D[i],w,this._layoutTextCtx)}}_layoutText(D){const w=this._textDivProperties.get(D);let i="";if(w.canvasWidth!==0&&w.hasText){const{fontSize:l,fontFamily:P}=D.style;(l!==this._layoutTextLastFontSize||P!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${l} ${P}`,this._layoutTextLastFontSize=l,this._layoutTextLastFontFamily=P);const{width:E}=this._layoutTextCtx.measureText(D.textContent);if(E>0){const S=w.canvasWidth/E;this._enhanceTextSelection&&(w.scale=S),i=`scaleX(${S})`}}if(w.angle!==0&&(i=`rotate(${w.angle}deg) ${i}`),i.length>0&&(this._enhanceTextSelection&&(w.originalTransform=i),D.style.transform=i),w.hasText&&this._container.appendChild(D),w.hasEOL){const l=document.createElement("br");l.setAttribute("role","presentation"),this._container.appendChild(l)}}_render(D=0){const w=(0,n.createPromiseCapability)();let i=Object.create(null);const l=this._document.createElement("canvas");if(l.height=l.width=L,l.mozOpaque=!0,this._layoutTextCtx=l.getContext("2d",{alpha:!1}),this._textContent){const P=this._textContent.items,E=this._textContent.styles;this._processItems(P,E),w.resolve()}else if(this._textContentStream){const P=()=>{this._reader.read().then(({value:E,done:S})=>{if(S){w.resolve();return}Object.assign(i,E.styles),this._processItems(E.items,i),P()},w.reject)};this._reader=this._textContentStream.getReader(),P()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');w.promise.then(()=>{i=null,D?this._renderTimer=setTimeout(()=>{r(this),this._renderTimer=null},D):r(this)},this._capability.reject)}expandTextDivs(D=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(u(this),this._bounds=null);const w=[],i=[];for(let l=0,P=this._textDivs.length;l<P;l++){const E=this._textDivs[l],S=this._textDivProperties.get(E);!S.hasText||(D?(w.length=0,i.length=0,S.originalTransform&&w.push(S.originalTransform),S.paddingTop>0?(i.push(`${S.paddingTop}px`),w.push(`translateY(${-S.paddingTop}px)`)):i.push(0),S.paddingRight>0?i.push(`${S.paddingRight/S.scale}px`):i.push(0),S.paddingBottom>0?i.push(`${S.paddingBottom}px`):i.push(0),S.paddingLeft>0?(i.push(`${S.paddingLeft/S.scale}px`),w.push(`translateX(${-S.paddingLeft/S.scale}px)`)):i.push(0),E.style.padding=i.join(" "),w.length&&(E.style.transform=w.join(" "))):(E.style.padding=null,E.style.transform=S.originalTransform))}}}function q(j){const D=new g({textContent:j.textContent,textContentStream:j.textContentStream,container:j.container,viewport:j.viewport,textDivs:j.textDivs,textContentItemsStr:j.textContentItemsStr,enhanceTextSelection:j.enhanceTextSelection});return D._render(j.timeout),D}},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SVGGraphics=void 0;var n=R(1),I=R(5),L=R(3);let O=class{constructor(){(0,n.unreachable)("Not implemented: SVGGraphics")}};a.SVGGraphics=O;{let x=function(i){let l=[];const P=[];for(const E of i){if(E.fn==="save"){l.push({fnId:92,fn:"group",items:[]}),P.push(l),l=l[l.length-1].items;continue}E.fn==="restore"?l=P.pop():l.push(E)}return l},g=function(i){if(Number.isInteger(i))return i.toString();const l=i.toFixed(10);let P=l.length-1;if(l[P]!=="0")return l;do P--;while(l[P]==="0");return l.substring(0,l[P]==="."?P:P+1)},q=function(i){if(i[4]===0&&i[5]===0){if(i[1]===0&&i[2]===0)return i[0]===1&&i[3]===1?"":`scale(${g(i[0])} ${g(i[3])})`;if(i[0]===i[3]&&i[1]===-i[2]){const l=Math.acos(i[0])*180/Math.PI;return`rotate(${g(l)})`}}else if(i[0]===1&&i[1]===0&&i[2]===0&&i[3]===1)return`translate(${g(i[4])} ${g(i[5])})`;return`matrix(${g(i[0])} ${g(i[1])} ${g(i[2])} ${g(i[3])} ${g(i[4])} ${g(i[5])})`};const F={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},y="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/1999/xlink",c=["butt","round","square"],r=["miter","round","bevel"],f=function(i,l="",P=!1){if(URL.createObjectURL&&typeof Blob!="undefined"&&!P)return URL.createObjectURL(new Blob([i],{type:l}));const E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let S=`data:${l};base64,`;for(let N=0,k=i.length;N<k;N+=3){const B=i[N]&255,$=i[N+1]&255,z=i[N+2]&255,Y=B>>2,ee=(B&3)<<4|$>>4,Q=N+1<k?($&15)<<2|z>>6:64,m=N+2<k?z&63:64;S+=E[Y]+E[ee]+E[Q]+E[m]}return S},u=function(){const i=new Uint8Array([137,80,78,71,13,10,26,10]),l=12,P=new Int32Array(256);for(let z=0;z<256;z++){let Y=z;for(let ee=0;ee<8;ee++)Y&1?Y=3988292384^Y>>1&2147483647:Y=Y>>1&2147483647;P[z]=Y}function E(z,Y,ee){let Q=-1;for(let m=Y;m<ee;m++){const o=(Q^z[m])&255,s=P[o];Q=Q>>>8^s}return Q^-1}function S(z,Y,ee,Q){let m=Q;const o=Y.length;ee[m]=o>>24&255,ee[m+1]=o>>16&255,ee[m+2]=o>>8&255,ee[m+3]=o&255,m+=4,ee[m]=z.charCodeAt(0)&255,ee[m+1]=z.charCodeAt(1)&255,ee[m+2]=z.charCodeAt(2)&255,ee[m+3]=z.charCodeAt(3)&255,m+=4,ee.set(Y,m),m+=Y.length;const s=E(ee,Q+4,m);ee[m]=s>>24&255,ee[m+1]=s>>16&255,ee[m+2]=s>>8&255,ee[m+3]=s&255}function N(z,Y,ee){let Q=1,m=0;for(let o=Y;o<ee;++o)Q=(Q+(z[o]&255))%65521,m=(m+Q)%65521;return m<<16|Q}function k(z){if(!L.isNodeJS)return B(z);try{let Y;parseInt(process.versions.node)>=8?Y=z:Y=Buffer.from(z);const ee=require("zlib").deflateSync(Y,{level:9});return ee instanceof Uint8Array?ee:new Uint8Array(ee)}catch(Y){(0,n.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Y)}return B(z)}function B(z){let Y=z.length;const ee=65535,Q=Math.ceil(Y/ee),m=new Uint8Array(2+Y+Q*5+4);let o=0;m[o++]=120,m[o++]=156;let s=0;for(;Y>ee;)m[o++]=0,m[o++]=255,m[o++]=255,m[o++]=0,m[o++]=0,m.set(z.subarray(s,s+ee),o),o+=ee,s+=ee,Y-=ee;m[o++]=1,m[o++]=Y&255,m[o++]=Y>>8&255,m[o++]=~Y&65535&255,m[o++]=(~Y&65535)>>8&255,m.set(z.subarray(s),o),o+=z.length-s;const d=N(z,0,z.length);return m[o++]=d>>24&255,m[o++]=d>>16&255,m[o++]=d>>8&255,m[o++]=d&255,m}function $(z,Y,ee,Q){const m=z.width,o=z.height;let s,d,A;const C=z.data;switch(Y){case n.ImageKind.GRAYSCALE_1BPP:d=0,s=1,A=m+7>>3;break;case n.ImageKind.RGB_24BPP:d=2,s=8,A=m*3;break;case n.ImageKind.RGBA_32BPP:d=6,s=8,A=m*4;break;default:throw new Error("invalid format")}const T=new Uint8Array((1+A)*o);let e=0,p=0;for(let H=0;H<o;++H)T[e++]=0,T.set(C.subarray(p,p+A),e),p+=A,e+=A;if(Y===n.ImageKind.GRAYSCALE_1BPP&&Q){e=0;for(let H=0;H<o;H++){e++;for(let X=0;X<A;X++)T[e++]^=255}}const _=new Uint8Array([m>>24&255,m>>16&255,m>>8&255,m&255,o>>24&255,o>>16&255,o>>8&255,o&255,s,d,0,0,0]),b=k(T),h=i.length+l*3+_.length+b.length,M=new Uint8Array(h);let U=0;return M.set(i,U),U+=i.length,S("IHDR",_,M,U),U+=l+_.length,S("IDATA",b,M,U),U+=l+b.length,S("IEND",new Uint8Array(0),M,U),f(M,"image/png",ee)}return function(Y,ee,Q){const m=Y.kind===void 0?n.ImageKind.GRAYSCALE_1BPP:Y.kind;return $(Y,m,ee,Q)}}();class v{constructor(){this.fontSizeScale=1,this.fontWeight=F.fontWeight,this.fontSize=0,this.textMatrix=n.IDENTITY_MATRIX,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=n.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=F.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(l,P){this.x=l,this.y=P}}let j=0,D=0,w=0;a.SVGGraphics=O=class{constructor(i,l,P=!1){this.svgFactory=new I.DOMSVGFactory,this.current=new v,this.transformMatrix=n.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=i,this.objs=l,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!P,this._operatorIdMapping=[];for(const E in n.OPS)this._operatorIdMapping[n.OPS[E]]=E}save(){this.transformStack.push(this.transformMatrix);const i=this.current;this.extraStack.push(i),this.current=i.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(i){this.save(),this.executeOpTree(i),this.restore()}loadDependencies(i){const l=i.fnArray,P=i.argsArray;for(let E=0,S=l.length;E<S;E++)if(l[E]===n.OPS.dependency)for(const N of P[E]){const k=N.startsWith("g_")?this.commonObjs:this.objs,B=new Promise($=>{k.get(N,$)});this.current.dependencies.push(B)}return Promise.all(this.current.dependencies)}transform(i,l,P,E,S,N){const k=[i,l,P,E,S,N];this.transformMatrix=n.Util.transform(this.transformMatrix,k),this.tgrp=null}getSVG(i,l){this.viewport=l;const P=this._initialize(l);return this.loadDependencies(i).then(()=>(this.transformMatrix=n.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(i)),P))}convertOpList(i){const l=this._operatorIdMapping,P=i.argsArray,E=i.fnArray,S=[];for(let N=0,k=E.length;N<k;N++){const B=E[N];S.push({fnId:B,fn:l[B],args:P[N]})}return x(S)}executeOpTree(i){for(const l of i){const P=l.fn,E=l.fnId,S=l.args;switch(E|0){case n.OPS.beginText:this.beginText();break;case n.OPS.dependency:break;case n.OPS.setLeading:this.setLeading(S);break;case n.OPS.setLeadingMoveText:this.setLeadingMoveText(S[0],S[1]);break;case n.OPS.setFont:this.setFont(S);break;case n.OPS.showText:this.showText(S[0]);break;case n.OPS.showSpacedText:this.showText(S[0]);break;case n.OPS.endText:this.endText();break;case n.OPS.moveText:this.moveText(S[0],S[1]);break;case n.OPS.setCharSpacing:this.setCharSpacing(S[0]);break;case n.OPS.setWordSpacing:this.setWordSpacing(S[0]);break;case n.OPS.setHScale:this.setHScale(S[0]);break;case n.OPS.setTextMatrix:this.setTextMatrix(S[0],S[1],S[2],S[3],S[4],S[5]);break;case n.OPS.setTextRise:this.setTextRise(S[0]);break;case n.OPS.setTextRenderingMode:this.setTextRenderingMode(S[0]);break;case n.OPS.setLineWidth:this.setLineWidth(S[0]);break;case n.OPS.setLineJoin:this.setLineJoin(S[0]);break;case n.OPS.setLineCap:this.setLineCap(S[0]);break;case n.OPS.setMiterLimit:this.setMiterLimit(S[0]);break;case n.OPS.setFillRGBColor:this.setFillRGBColor(S[0],S[1],S[2]);break;case n.OPS.setStrokeRGBColor:this.setStrokeRGBColor(S[0],S[1],S[2]);break;case n.OPS.setStrokeColorN:this.setStrokeColorN(S);break;case n.OPS.setFillColorN:this.setFillColorN(S);break;case n.OPS.shadingFill:this.shadingFill(S[0]);break;case n.OPS.setDash:this.setDash(S[0],S[1]);break;case n.OPS.setRenderingIntent:this.setRenderingIntent(S[0]);break;case n.OPS.setFlatness:this.setFlatness(S[0]);break;case n.OPS.setGState:this.setGState(S[0]);break;case n.OPS.fill:this.fill();break;case n.OPS.eoFill:this.eoFill();break;case n.OPS.stroke:this.stroke();break;case n.OPS.fillStroke:this.fillStroke();break;case n.OPS.eoFillStroke:this.eoFillStroke();break;case n.OPS.clip:this.clip("nonzero");break;case n.OPS.eoClip:this.clip("evenodd");break;case n.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case n.OPS.paintImageXObject:this.paintImageXObject(S[0]);break;case n.OPS.paintInlineImageXObject:this.paintInlineImageXObject(S[0]);break;case n.OPS.paintImageMaskXObject:this.paintImageMaskXObject(S[0]);break;case n.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(S[0],S[1]);break;case n.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case n.OPS.closePath:this.closePath();break;case n.OPS.closeStroke:this.closeStroke();break;case n.OPS.closeFillStroke:this.closeFillStroke();break;case n.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case n.OPS.nextLine:this.nextLine();break;case n.OPS.transform:this.transform(S[0],S[1],S[2],S[3],S[4],S[5]);break;case n.OPS.constructPath:this.constructPath(S[0],S[1]);break;case n.OPS.endPath:this.endPath();break;case 92:this.group(l.items);break;default:(0,n.warn)(`Unimplemented operator ${P}`);break}}}setWordSpacing(i){this.current.wordSpacing=i}setCharSpacing(i){this.current.charSpacing=i}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(i,l,P,E,S,N){const k=this.current;k.textMatrix=k.lineMatrix=[i,l,P,E,S,N],k.textMatrixScale=Math.hypot(i,l),k.x=k.lineX=0,k.y=k.lineY=0,k.xcoords=[],k.ycoords=[],k.tspan=this.svgFactory.createElement("svg:tspan"),k.tspan.setAttributeNS(null,"font-family",k.fontFamily),k.tspan.setAttributeNS(null,"font-size",`${g(k.fontSize)}px`),k.tspan.setAttributeNS(null,"y",g(-k.y)),k.txtElement=this.svgFactory.createElement("svg:text"),k.txtElement.appendChild(k.tspan)}beginText(){const i=this.current;i.x=i.lineX=0,i.y=i.lineY=0,i.textMatrix=n.IDENTITY_MATRIX,i.lineMatrix=n.IDENTITY_MATRIX,i.textMatrixScale=1,i.tspan=this.svgFactory.createElement("svg:tspan"),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtgrp=this.svgFactory.createElement("svg:g"),i.xcoords=[],i.ycoords=[]}moveText(i,l){const P=this.current;P.x=P.lineX+=i,P.y=P.lineY+=l,P.xcoords=[],P.ycoords=[],P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size",`${g(P.fontSize)}px`),P.tspan.setAttributeNS(null,"y",g(-P.y))}showText(i){const l=this.current,P=l.font,E=l.fontSize;if(E===0)return;const S=l.fontSizeScale,N=l.charSpacing,k=l.wordSpacing,B=l.fontDirection,$=l.textHScale*B,z=P.vertical,Y=z?1:-1,ee=P.defaultVMetrics,Q=E*l.fontMatrix[0];let m=0;for(const d of i){if(d===null){m+=B*k;continue}else if(typeof d=="number"){m+=Y*d*E/1e3;continue}const A=(d.isSpace?k:0)+N,C=d.fontChar;let T,e,p=d.width;if(z){let b;const h=d.vmetric||ee;b=d.vmetric?h[1]:p*.5,b=-b*Q;const M=h[2]*Q;p=h?-h[0]:p,T=b/S,e=(m+M)/S}else T=m/S,e=0;(d.isInFont||P.missingFile)&&(l.xcoords.push(l.x+T),z&&l.ycoords.push(-l.y+e),l.tspan.textContent+=C);let _;z?_=p*Q-A*B:_=p*Q+A*B,m+=_}l.tspan.setAttributeNS(null,"x",l.xcoords.map(g).join(" ")),z?l.tspan.setAttributeNS(null,"y",l.ycoords.map(g).join(" ")):l.tspan.setAttributeNS(null,"y",g(-l.y)),z?l.y-=m:l.x+=m*$,l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${g(l.fontSize)}px`),l.fontStyle!==F.fontStyle&&l.tspan.setAttributeNS(null,"font-style",l.fontStyle),l.fontWeight!==F.fontWeight&&l.tspan.setAttributeNS(null,"font-weight",l.fontWeight);const o=l.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;if(o===n.TextRenderingMode.FILL||o===n.TextRenderingMode.FILL_STROKE?(l.fillColor!==F.fillColor&&l.tspan.setAttributeNS(null,"fill",l.fillColor),l.fillAlpha<1&&l.tspan.setAttributeNS(null,"fill-opacity",l.fillAlpha)):l.textRenderingMode===n.TextRenderingMode.ADD_TO_PATH?l.tspan.setAttributeNS(null,"fill","transparent"):l.tspan.setAttributeNS(null,"fill","none"),o===n.TextRenderingMode.STROKE||o===n.TextRenderingMode.FILL_STROKE){const d=1/(l.textMatrixScale||1);this._setStrokeAttributes(l.tspan,d)}let s=l.textMatrix;l.textRise!==0&&(s=s.slice(),s[5]+=l.textRise),l.txtElement.setAttributeNS(null,"transform",`${q(s)} scale(${g($)}, -1)`),l.txtElement.setAttributeNS(y,"xml:space","preserve"),l.txtElement.appendChild(l.tspan),l.txtgrp.appendChild(l.txtElement),this._ensureTransformGroup().appendChild(l.txtElement)}setLeadingMoveText(i,l){this.setLeading(-l),this.moveText(i,l)}addFontStyle(i){if(!i.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const l=f(i.data,i.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${i.loadedName}"; src: url(${l}); }
`}setFont(i){const l=this.current,P=this.commonObjs.get(i[0]);let E=i[1];l.font=P,this.embedFonts&&!P.missingFile&&!this.embeddedFonts[P.loadedName]&&(this.addFontStyle(P),this.embeddedFonts[P.loadedName]=P),l.fontMatrix=P.fontMatrix||n.FONT_IDENTITY_MATRIX;let S="normal";P.black?S="900":P.bold&&(S="bold");const N=P.italic?"italic":"normal";E<0?(E=-E,l.fontDirection=-1):l.fontDirection=1,l.fontSize=E,l.fontFamily=P.loadedName,l.fontWeight=S,l.fontStyle=N,l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"y",g(-l.y)),l.xcoords=[],l.ycoords=[]}endText(){var l;const i=this.current;i.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG&&((l=i.txtElement)==null?void 0:l.hasChildNodes())&&(i.element=i.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(i){i>0&&(this.current.lineWidth=i)}setLineCap(i){this.current.lineCap=c[i]}setLineJoin(i){this.current.lineJoin=r[i]}setMiterLimit(i){this.current.miterLimit=i}setStrokeAlpha(i){this.current.strokeAlpha=i}setStrokeRGBColor(i,l,P){this.current.strokeColor=n.Util.makeHexColor(i,l,P)}setFillAlpha(i){this.current.fillAlpha=i}setFillRGBColor(i,l,P){this.current.fillColor=n.Util.makeHexColor(i,l,P),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(i){this.current.strokeColor=this._makeColorN_Pattern(i)}setFillColorN(i){this.current.fillColor=this._makeColorN_Pattern(i)}shadingFill(i){const l=this.viewport.width,P=this.viewport.height,E=n.Util.inverseTransform(this.transformMatrix),S=n.Util.applyTransform([0,0],E),N=n.Util.applyTransform([0,P],E),k=n.Util.applyTransform([l,0],E),B=n.Util.applyTransform([l,P],E),$=Math.min(S[0],N[0],k[0],B[0]),z=Math.min(S[1],N[1],k[1],B[1]),Y=Math.max(S[0],N[0],k[0],B[0]),ee=Math.max(S[1],N[1],k[1],B[1]),Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x",$),Q.setAttributeNS(null,"y",z),Q.setAttributeNS(null,"width",Y-$),Q.setAttributeNS(null,"height",ee-z),Q.setAttributeNS(null,"fill",this._makeShadingPattern(i)),this.current.fillAlpha<1&&Q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(Q)}_makeColorN_Pattern(i){return i[0]==="TilingPattern"?this._makeTilingPattern(i):this._makeShadingPattern(i)}_makeTilingPattern(i){const l=i[1],P=i[2],E=i[3]||n.IDENTITY_MATRIX,[S,N,k,B]=i[4],$=i[5],z=i[6],Y=i[7],ee=`shading${w++}`,[Q,m,o,s]=n.Util.normalizeRect([...n.Util.applyTransform([S,N],E),...n.Util.applyTransform([k,B],E)]),[d,A]=n.Util.singularValueDecompose2dScale(E),C=$*d,T=z*A,e=this.svgFactory.createElement("svg:pattern");e.setAttributeNS(null,"id",ee),e.setAttributeNS(null,"patternUnits","userSpaceOnUse"),e.setAttributeNS(null,"width",C),e.setAttributeNS(null,"height",T),e.setAttributeNS(null,"x",`${Q}`),e.setAttributeNS(null,"y",`${m}`);const p=this.svg,_=this.transformMatrix,b=this.current.fillColor,h=this.current.strokeColor,M=this.svgFactory.create(o-Q,s-m);if(this.svg=M,this.transformMatrix=E,Y===2){const U=n.Util.makeHexColor(...l);this.current.fillColor=U,this.current.strokeColor=U}return this.executeOpTree(this.convertOpList(P)),this.svg=p,this.transformMatrix=_,this.current.fillColor=b,this.current.strokeColor=h,e.appendChild(M.childNodes[0]),this.defs.appendChild(e),`url(#${ee})`}_makeShadingPattern(i){switch(typeof i=="string"&&(i=this.objs.get(i)),i[0]){case"RadialAxial":const l=`shading${w++}`,P=i[3];let E;switch(i[1]){case"axial":const S=i[4],N=i[5];E=this.svgFactory.createElement("svg:linearGradient"),E.setAttributeNS(null,"id",l),E.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),E.setAttributeNS(null,"x1",S[0]),E.setAttributeNS(null,"y1",S[1]),E.setAttributeNS(null,"x2",N[0]),E.setAttributeNS(null,"y2",N[1]);break;case"radial":const k=i[4],B=i[5],$=i[6],z=i[7];E=this.svgFactory.createElement("svg:radialGradient"),E.setAttributeNS(null,"id",l),E.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),E.setAttributeNS(null,"cx",B[0]),E.setAttributeNS(null,"cy",B[1]),E.setAttributeNS(null,"r",z),E.setAttributeNS(null,"fx",k[0]),E.setAttributeNS(null,"fy",k[1]),E.setAttributeNS(null,"fr",$);break;default:throw new Error(`Unknown RadialAxial type: ${i[1]}`)}for(const S of P){const N=this.svgFactory.createElement("svg:stop");N.setAttributeNS(null,"offset",S[0]),N.setAttributeNS(null,"stop-color",S[1]),E.appendChild(N)}return this.defs.appendChild(E),`url(#${l})`;case"Mesh":return(0,n.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${i[0]}`)}}setDash(i,l){this.current.dashArray=i,this.current.dashPhase=l}constructPath(i,l){const P=this.current;let E=P.x,S=P.y,N=[],k=0;for(const B of i)switch(B|0){case n.OPS.rectangle:E=l[k++],S=l[k++];const $=l[k++],z=l[k++],Y=E+$,ee=S+z;N.push("M",g(E),g(S),"L",g(Y),g(S),"L",g(Y),g(ee),"L",g(E),g(ee),"Z");break;case n.OPS.moveTo:E=l[k++],S=l[k++],N.push("M",g(E),g(S));break;case n.OPS.lineTo:E=l[k++],S=l[k++],N.push("L",g(E),g(S));break;case n.OPS.curveTo:E=l[k+4],S=l[k+5],N.push("C",g(l[k]),g(l[k+1]),g(l[k+2]),g(l[k+3]),g(E),g(S)),k+=6;break;case n.OPS.curveTo2:N.push("C",g(E),g(S),g(l[k]),g(l[k+1]),g(l[k+2]),g(l[k+3])),E=l[k+2],S=l[k+3],k+=4;break;case n.OPS.curveTo3:E=l[k+2],S=l[k+3],N.push("C",g(l[k]),g(l[k+1]),g(E),g(S),g(E),g(S)),k+=4;break;case n.OPS.closePath:N.push("Z");break}N=N.join(" "),P.path&&i.length>0&&i[0]!==n.OPS.rectangle&&i[0]!==n.OPS.moveTo?N=P.path.getAttributeNS(null,"d")+N:(P.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(P.path)),P.path.setAttributeNS(null,"d",N),P.path.setAttributeNS(null,"fill","none"),P.element=P.path,P.setCurrentPoint(E,S)}endPath(){const i=this.current;if(i.path=null,!this.pendingClip)return;if(!i.element){this.pendingClip=null;return}const l=`clippath${j++}`,P=this.svgFactory.createElement("svg:clipPath");P.setAttributeNS(null,"id",l),P.setAttributeNS(null,"transform",q(this.transformMatrix));const E=i.element.cloneNode(!0);if(this.pendingClip==="evenodd"?E.setAttributeNS(null,"clip-rule","evenodd"):E.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,P.appendChild(E),this.defs.appendChild(P),i.activeClipUrl){i.clipGroup=null;for(const S of this.extraStack)S.clipGroup=null;P.setAttributeNS(null,"clip-path",i.activeClipUrl)}i.activeClipUrl=`url(#${l})`,this.tgrp=null}clip(i){this.pendingClip=i}closePath(){const i=this.current;if(i.path){const l=`${i.path.getAttributeNS(null,"d")}Z`;i.path.setAttributeNS(null,"d",l)}}setLeading(i){this.current.leading=-i}setTextRise(i){this.current.textRise=i}setTextRenderingMode(i){this.current.textRenderingMode=i}setHScale(i){this.current.textHScale=i/100}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[l,P]of i)switch(l){case"LW":this.setLineWidth(P);break;case"LC":this.setLineCap(P);break;case"LJ":this.setLineJoin(P);break;case"ML":this.setMiterLimit(P);break;case"D":this.setDash(P[0],P[1]);break;case"RI":this.setRenderingIntent(P);break;case"FL":this.setFlatness(P);break;case"Font":this.setFont(P);break;case"CA":this.setStrokeAlpha(P);break;case"ca":this.setFillAlpha(P);break;default:(0,n.warn)(`Unimplemented graphic state operator ${l}`);break}}fill(){const i=this.current;i.element&&(i.element.setAttributeNS(null,"fill",i.fillColor),i.element.setAttributeNS(null,"fill-opacity",i.fillAlpha),this.endPath())}stroke(){const i=this.current;i.element&&(this._setStrokeAttributes(i.element),i.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(i,l=1){const P=this.current;let E=P.dashArray;l!==1&&E.length>0&&(E=E.map(function(S){return l*S})),i.setAttributeNS(null,"stroke",P.strokeColor),i.setAttributeNS(null,"stroke-opacity",P.strokeAlpha),i.setAttributeNS(null,"stroke-miterlimit",g(P.miterLimit)),i.setAttributeNS(null,"stroke-linecap",P.lineCap),i.setAttributeNS(null,"stroke-linejoin",P.lineJoin),i.setAttributeNS(null,"stroke-width",g(l*P.lineWidth)+"px"),i.setAttributeNS(null,"stroke-dasharray",E.map(g).join(" ")),i.setAttributeNS(null,"stroke-dashoffset",g(l*P.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1px"),i.setAttributeNS(null,"height","1px"),i.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(i)}paintImageXObject(i){const l=i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i);if(!l){(0,n.warn)(`Dependent image with object ID ${i} is not ready yet`);return}this.paintInlineImageXObject(l)}paintInlineImageXObject(i,l){const P=i.width,E=i.height,S=u(i,this.forceDataSchema,!!l),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",g(P)),N.setAttributeNS(null,"height",g(E)),this.current.element=N,this.clip("nonzero");const k=this.svgFactory.createElement("svg:image");k.setAttributeNS(t,"xlink:href",S),k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y",g(-E)),k.setAttributeNS(null,"width",g(P)+"px"),k.setAttributeNS(null,"height",g(E)+"px"),k.setAttributeNS(null,"transform",`scale(${g(1/P)} ${g(-1/E)})`),l?l.appendChild(k):this._ensureTransformGroup().appendChild(k)}paintImageMaskXObject(i){const l=this.current,P=i.width,E=i.height,S=l.fillColor;l.maskId=`mask${D++}`;const N=this.svgFactory.createElement("svg:mask");N.setAttributeNS(null,"id",l.maskId);const k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",g(P)),k.setAttributeNS(null,"height",g(E)),k.setAttributeNS(null,"fill",S),k.setAttributeNS(null,"mask",`url(#${l.maskId})`),this.defs.appendChild(N),this._ensureTransformGroup().appendChild(k),this.paintInlineImageXObject(i,N)}paintFormXObjectBegin(i,l){if(Array.isArray(i)&&i.length===6&&this.transform(i[0],i[1],i[2],i[3],i[4],i[5]),l){const P=l[2]-l[0],E=l[3]-l[1],S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x",l[0]),S.setAttributeNS(null,"y",l[1]),S.setAttributeNS(null,"width",g(P)),S.setAttributeNS(null,"height",g(E)),this.current.element=S,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(i){const l=this.svgFactory.create(i.width,i.height),P=this.svgFactory.createElement("svg:defs");l.appendChild(P),this.defs=P;const E=this.svgFactory.createElement("svg:g");return E.setAttributeNS(null,"transform",q(i.transform)),l.appendChild(E),this.svg=E,l}_ensureClipGroup(){if(!this.current.clipGroup){const i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(i),this.current.clipGroup=i}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",q(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNodeStream=void 0;var n=R(1),I=R(24);const L=require$$4,O=require$$4,F=require$$4,y=require$$4,t=/^file:\/\/\/[a-zA-Z]:\//;function c(D){const w=y.parse(D);return w.protocol==="file:"||w.host?w:/^[a-z]:[/\\]/i.test(D)?y.parse(`file:///${D}`):(w.host||(w.protocol="file:"),w)}class r{constructor(w){this.source=w,this.url=c(w.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&w.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var w,i;return(i=(w=this._fullRequestReader)==null?void 0:w._loaded)!=null?i:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new q(this):new x(this),this._fullRequestReader}getRangeReader(w,i){if(i<=this._progressiveDataLength)return null;const l=this.isFsUrl?new j(this,w,i):new g(this,w,i);return this._rangeRequestReaders.push(l),l}cancelAllRequests(w){this._fullRequestReader&&this._fullRequestReader.cancel(w);for(const i of this._rangeRequestReaders.slice(0))i.cancel(w)}}a.PDFNodeStream=r;class f{constructor(w){this._url=w.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=w.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const w=this._readableStream.read();return w===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=w.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(w).buffer,done:!1})}cancel(w){if(!this._readableStream){this._error(w);return}this._readableStream.destroy(w)}_error(w){this._storedError=w,this._readCapability.resolve()}_setReadableStream(w){this._readableStream=w,w.on("readable",()=>{this._readCapability.resolve()}),w.on("end",()=>{w.destroy(),this._done=!0,this._readCapability.resolve()}),w.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(w){this._url=w.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const i=w.source;this._isStreamingSupported=!i.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const w=this._readableStream.read();return w===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=w.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(w).buffer,done:!1})}cancel(w){if(!this._readableStream){this._error(w);return}this._readableStream.destroy(w)}_error(w){this._storedError=w,this._readCapability.resolve()}_setReadableStream(w){this._readableStream=w,w.on("readable",()=>{this._readCapability.resolve()}),w.on("end",()=>{w.destroy(),this._done=!0,this._readCapability.resolve()}),w.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function v(D,w){return{protocol:D.protocol,auth:D.auth,host:D.hostname,port:D.port,path:D.path,method:"GET",headers:w}}class x extends f{constructor(w){super(w);const i=l=>{if(l.statusCode===404){const N=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=N,this._headersCapability.reject(N);return}this._headersCapability.resolve(),this._setReadableStream(l);const P=N=>this._readableStream.headers[N.toLowerCase()],{allowRangeRequests:E,suggestedLength:S}=(0,I.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:w.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=E,this._contentLength=S||this._contentLength,this._filename=(0,I.extractFilenameFromHeader)(P)};this._request=null,this._url.protocol==="http:"?this._request=O.request(v(this._url,w.httpHeaders),i):this._request=F.request(v(this._url,w.httpHeaders),i),this._request.on("error",l=>{this._storedError=l,this._headersCapability.reject(l)}),this._request.end()}}class g extends u{constructor(w,i,l){super(w),this._httpHeaders={};for(const E in w.httpHeaders){const S=w.httpHeaders[E];typeof S!="undefined"&&(this._httpHeaders[E]=S)}this._httpHeaders.Range=`bytes=${i}-${l-1}`;const P=E=>{if(E.statusCode===404){const S=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=S;return}this._setReadableStream(E)};this._request=null,this._url.protocol==="http:"?this._request=O.request(v(this._url,this._httpHeaders),P):this._request=F.request(v(this._url,this._httpHeaders),P),this._request.on("error",E=>{this._storedError=E}),this._request.end()}}class q extends f{constructor(w){super(w);let i=decodeURIComponent(this._url.path);t.test(this._url.href)&&(i=i.replace(/^\//,"")),L.lstat(i,(l,P)=>{if(l){l.code==="ENOENT"&&(l=new n.MissingPDFException(`Missing PDF "${i}".`)),this._storedError=l,this._headersCapability.reject(l);return}this._contentLength=P.size,this._setReadableStream(L.createReadStream(i)),this._headersCapability.resolve()})}}class j extends u{constructor(w,i,l){super(w);let P=decodeURIComponent(this._url.path);t.test(this._url.href)&&(P=P.replace(/^\//,"")),this._setReadableStream(L.createReadStream(P,{start:i,end:l-1}))}}},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createResponseStatusError=y,a.extractFilenameFromHeader=F,a.validateRangeRequestCapabilities=O,a.validateResponseStatus=t;var n=R(1),I=R(25),L=R(5);function O({getResponseHeader:c,isHttp:r,rangeChunkSize:f,disableRange:u}){(0,n.assert)(f>0,"Range chunk size must be larger than zero");const v={allowRangeRequests:!1,suggestedLength:void 0},x=parseInt(c("Content-Length"),10);return!Number.isInteger(x)||(v.suggestedLength=x,x<=2*f)||u||!r||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(v.allowRangeRequests=!0),v}function F(c){const r=c("Content-Disposition");if(r){let f=(0,I.getFilenameFromContentDispositionHeader)(r);if(f.includes("%"))try{f=decodeURIComponent(f)}catch{}if((0,L.isPdfFile)(f))return f}return null}function y(c,r){return c===404||c===0&&r.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+r+'".'):new n.UnexpectedResponseException(`Unexpected server response (${c}) while retrieving PDF "${r}".`,c)}function t(c){return c===200||c===206}},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getFilenameFromContentDispositionHeader=I;var n=R(1);function I(L){let O=!0,F=y("filename\\*","i").exec(L);if(F){F=F[1];let x=f(F);return x=unescape(x),x=u(x),x=v(x),c(x)}if(F=r(L),F){const x=v(F);return c(x)}if(F=y("filename","i").exec(L),F){F=F[1];let x=f(F);return x=v(x),c(x)}function y(x,g){return new RegExp("(?:^|;)\\s*"+x+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function t(x,g){if(x){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const q=new TextDecoder(x,{fatal:!0}),j=(0,n.stringToBytes)(g);g=q.decode(j),O=!1}catch{}}return g}function c(x){return O&&/[\x80-\xff]/.test(x)&&(x=t("utf-8",x),O&&(x=t("iso-8859-1",x))),x}function r(x){const g=[];let q;const j=y("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(q=j.exec(x))!==null;){let[,w,i,l]=q;if(w=parseInt(w,10),w in g){if(w===0)break;continue}g[w]=[i,l]}const D=[];for(let w=0;w<g.length&&w in g;++w){let[i,l]=g[w];l=f(l),i&&(l=unescape(l),w===0&&(l=u(l))),D.push(l)}return D.join("")}function f(x){if(x.startsWith('"')){const g=x.slice(1).split('\\"');for(let q=0;q<g.length;++q){const j=g[q].indexOf('"');j!==-1&&(g[q]=g[q].slice(0,j),g.length=q+1),g[q]=g[q].replace(/\\(.)/g,"$1")}x=g.join('"')}return x}function u(x){const g=x.indexOf("'");if(g===-1)return x;const q=x.slice(0,g),D=x.slice(g+1).replace(/^[^']*'/,"");return t(q,D)}function v(x){return!x.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(x)?x:x.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,q,j,D){if(j==="q"||j==="Q")return D=D.replace(/_/g," "),D=D.replace(/=([0-9a-fA-F]{2})/g,function(w,i){return String.fromCharCode(parseInt(i,16))}),t(q,D);try{D=atob(D)}catch{}return t(q,D)})}return""}},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNetworkStream=void 0;var n=R(1),I=R(24);const L=200,O=206;function F(f){const u=f.response;return typeof u!="string"?u:(0,n.stringToBytes)(u).buffer}class y{constructor(u,v={}){this.url=u,this.isHttp=/^https?:/i.test(u),this.httpHeaders=this.isHttp&&v.httpHeaders||Object.create(null),this.withCredentials=v.withCredentials||!1,this.getXhr=v.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(u,v,x){const g={begin:u,end:v};for(const q in x)g[q]=x[q];return this.request(g)}requestFull(u){return this.request(u)}request(u){const v=this.getXhr(),x=this.currXhrId++,g=this.pendingRequests[x]={xhr:v};v.open("GET",this.url),v.withCredentials=this.withCredentials;for(const q in this.httpHeaders){const j=this.httpHeaders[q];typeof j!="undefined"&&v.setRequestHeader(q,j)}return this.isHttp&&"begin"in u&&"end"in u?(v.setRequestHeader("Range",`bytes=${u.begin}-${u.end-1}`),g.expectedStatus=O):g.expectedStatus=L,v.responseType="arraybuffer",u.onError&&(v.onerror=function(q){u.onError(v.status)}),v.onreadystatechange=this.onStateChange.bind(this,x),v.onprogress=this.onProgress.bind(this,x),g.onHeadersReceived=u.onHeadersReceived,g.onDone=u.onDone,g.onError=u.onError,g.onProgress=u.onProgress,v.send(null),x}onProgress(u,v){var g;const x=this.pendingRequests[u];!x||(g=x.onProgress)==null||g.call(x,v)}onStateChange(u,v){var w,i,l;const x=this.pendingRequests[u];if(!x)return;const g=x.xhr;if(g.readyState>=2&&x.onHeadersReceived&&(x.onHeadersReceived(),delete x.onHeadersReceived),g.readyState!==4||!(u in this.pendingRequests))return;if(delete this.pendingRequests[u],g.status===0&&this.isHttp){(w=x.onError)==null||w.call(x,g.status);return}const q=g.status||L;if(!(q===L&&x.expectedStatus===O)&&q!==x.expectedStatus){(i=x.onError)==null||i.call(x,g.status);return}const D=F(g);if(q===O){const P=g.getResponseHeader("Content-Range"),E=/bytes (\d+)-(\d+)\/(\d+)/.exec(P);x.onDone({begin:parseInt(E[1],10),chunk:D})}else D?x.onDone({begin:0,chunk:D}):(l=x.onError)==null||l.call(x,g.status)}getRequestXhr(u){return this.pendingRequests[u].xhr}isPendingRequest(u){return u in this.pendingRequests}abortRequest(u){const v=this.pendingRequests[u].xhr;delete this.pendingRequests[u],v.abort()}}class t{constructor(u){this._source=u,this._manager=new y(u.url,{httpHeaders:u.httpHeaders,withCredentials:u.withCredentials}),this._rangeChunkSize=u.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(u){const v=this._rangeRequestReaders.indexOf(u);v>=0&&this._rangeRequestReaders.splice(v,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(u,v){const x=new r(this._manager,u,v);return x.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(x),x}cancelAllRequests(u){var v;(v=this._fullRequestReader)==null||v.cancel(u);for(const x of this._rangeRequestReaders.slice(0))x.cancel(u)}}a.PDFNetworkStream=t;class c{constructor(u,v){this._manager=u;const x={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=v.url,this._fullRequestId=u.requestFull(x),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=v.disableRange||!1,this._contentLength=v.length,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const u=this._fullRequestId,v=this._manager.getRequestXhr(u),x=j=>v.getResponseHeader(j),{allowRangeRequests:g,suggestedLength:q}=(0,I.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});g&&(this._isRangeSupported=!0),this._contentLength=q||this._contentLength,this._filename=(0,I.extractFilenameFromHeader)(x),this._isRangeSupported&&this._manager.abortRequest(u),this._headersReceivedCapability.resolve()}_onDone(u){if(u&&(this._requests.length>0?this._requests.shift().resolve({value:u.chunk,done:!1}):this._cachedChunks.push(u.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(u){this._storedError=(0,I.createResponseStatusError)(u,this._url),this._headersReceivedCapability.reject(this._storedError);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(u){var v;(v=this.onProgress)==null||v.call(this,{loaded:u.loaded,total:u.lengthComputable?u.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=(0,n.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0,this._headersReceivedCapability.reject(u);for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class r{constructor(u,v,x){this._manager=u;const g={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=u.url,this._requestId=u.requestRange(v,x,g),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var u;(u=this.onClosed)==null||u.call(this,this)}_onDone(u){const v=u.chunk;this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunk=v,this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(u){this._storedError=(0,I.createResponseStatusError)(u,this._url);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(u){var v;this.isStreamingSupported||(v=this.onProgress)==null||v.call(this,{loaded:u.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const u=(0,n.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(W,a,R)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFFetchStream=void 0;var n=R(1),I=R(24);function L(c,r,f){return{method:"GET",headers:c,signal:f==null?void 0:f.signal,mode:"cors",credentials:r?"include":"same-origin",redirect:"follow"}}function O(c){const r=new Headers;for(const f in c){const u=c[f];typeof u!="undefined"&&r.append(f,u)}return r}class F{constructor(r){this.source=r,this.isHttp=/^https?:/i.test(r.url),this.httpHeaders=this.isHttp&&r.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var r,f;return(f=(r=this._fullRequestReader)==null?void 0:r._loaded)!=null?f:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new y(this),this._fullRequestReader}getRangeReader(r,f){if(f<=this._progressiveDataLength)return null;const u=new t(this,r,f);return this._rangeRequestReaders.push(u),u}cancelAllRequests(r){this._fullRequestReader&&this._fullRequestReader.cancel(r);for(const f of this._rangeRequestReaders.slice(0))f.cancel(r)}}a.PDFFetchStream=F;class y{constructor(r){this._stream=r,this._reader=null,this._loaded=0,this._filename=null;const f=r.source;this._withCredentials=f.withCredentials||!1,this._contentLength=f.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=f.disableRange||!1,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!f.disableStream,this._isRangeSupported=!f.disableRange,this._headers=O(this._stream.httpHeaders);const u=f.url;fetch(u,L(this._headers,this._withCredentials,this._abortController)).then(v=>{if(!(0,I.validateResponseStatus)(v.status))throw(0,I.createResponseStatusError)(v.status,u);this._reader=v.body.getReader(),this._headersCapability.resolve();const x=j=>v.headers.get(j),{allowRangeRequests:g,suggestedLength:q}=(0,I.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=q||this._contentLength,this._filename=(0,I.extractFilenameFromHeader)(x),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:r,done:f}=await this._reader.read();return f?{value:r,done:f}:(this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(r).buffer,done:!1})}cancel(r){this._reader&&this._reader.cancel(r),this._abortController&&this._abortController.abort()}}class t{constructor(r,f,u){this._stream=r,this._reader=null,this._loaded=0;const v=r.source;this._withCredentials=v.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!v.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=O(this._stream.httpHeaders),this._headers.append("Range",`bytes=${f}-${u-1}`);const x=v.url;fetch(x,L(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,I.validateResponseStatus)(g.status))throw(0,I.createResponseStatusError)(g.status,x);this._readCapability.resolve(),this._reader=g.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:r,done:f}=await this._reader.read();return f?{value:r,done:f}:(this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(r).buffer,done:!1})}cancel(r){this._reader&&this._reader.cancel(r),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(W){var a=__webpack_module_cache__[W];if(a!==void 0)return a.exports;var R=__webpack_module_cache__[W]={exports:{}};return __webpack_modules__[W](R,R.exports,__w_pdfjs_require__),R.exports}var __webpack_exports__={};return(()=>{var W=__webpack_exports__;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"AnnotationLayer",{enumerable:!0,get:function(){return I.AnnotationLayer}}),Object.defineProperty(W,"AnnotationMode",{enumerable:!0,get:function(){return a.AnnotationMode}}),Object.defineProperty(W,"CMapCompressionType",{enumerable:!0,get:function(){return a.CMapCompressionType}}),Object.defineProperty(W,"GlobalWorkerOptions",{enumerable:!0,get:function(){return L.GlobalWorkerOptions}}),Object.defineProperty(W,"InvalidPDFException",{enumerable:!0,get:function(){return a.InvalidPDFException}}),Object.defineProperty(W,"LoopbackPort",{enumerable:!0,get:function(){return R.LoopbackPort}}),Object.defineProperty(W,"MissingPDFException",{enumerable:!0,get:function(){return a.MissingPDFException}}),Object.defineProperty(W,"OPS",{enumerable:!0,get:function(){return a.OPS}}),Object.defineProperty(W,"PDFDataRangeTransport",{enumerable:!0,get:function(){return R.PDFDataRangeTransport}}),Object.defineProperty(W,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(W,"PDFWorker",{enumerable:!0,get:function(){return R.PDFWorker}}),Object.defineProperty(W,"PasswordResponses",{enumerable:!0,get:function(){return a.PasswordResponses}}),Object.defineProperty(W,"PermissionFlag",{enumerable:!0,get:function(){return a.PermissionFlag}}),Object.defineProperty(W,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(W,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(W,"SVGGraphics",{enumerable:!0,get:function(){return y.SVGGraphics}}),Object.defineProperty(W,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return a.UNSUPPORTED_FEATURES}}),Object.defineProperty(W,"UnexpectedResponseException",{enumerable:!0,get:function(){return a.UnexpectedResponseException}}),Object.defineProperty(W,"Util",{enumerable:!0,get:function(){return a.Util}}),Object.defineProperty(W,"VerbosityLevel",{enumerable:!0,get:function(){return a.VerbosityLevel}}),Object.defineProperty(W,"XfaLayer",{enumerable:!0,get:function(){return t.XfaLayer}}),Object.defineProperty(W,"build",{enumerable:!0,get:function(){return R.build}}),Object.defineProperty(W,"createPromiseCapability",{enumerable:!0,get:function(){return a.createPromiseCapability}}),Object.defineProperty(W,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return a.createValidAbsoluteUrl}}),Object.defineProperty(W,"getDocument",{enumerable:!0,get:function(){return R.getDocument}}),Object.defineProperty(W,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(W,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(W,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(W,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(W,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(W,"renderTextLayer",{enumerable:!0,get:function(){return F.renderTextLayer}}),Object.defineProperty(W,"shadow",{enumerable:!0,get:function(){return a.shadow}}),Object.defineProperty(W,"version",{enumerable:!0,get:function(){return R.version}});var a=__w_pdfjs_require__(1),R=__w_pdfjs_require__(4),n=__w_pdfjs_require__(5),I=__w_pdfjs_require__(18),L=__w_pdfjs_require__(12),O=__w_pdfjs_require__(3),F=__w_pdfjs_require__(21),y=__w_pdfjs_require__(22),t=__w_pdfjs_require__(20);if(O.isNodeJS){const{PDFNodeStream:c}=__w_pdfjs_require__(23);(0,R.setPDFNetworkStreamFactory)(r=>new c(r))}else{const{PDFNetworkStream:c}=__w_pdfjs_require__(26),{PDFFetchStream:r}=__w_pdfjs_require__(27);(0,R.setPDFNetworkStreamFactory)(f=>(0,n.isValidFetchUrl)(f.url)?new r(f):new c(f))}})(),__webpack_exports__})()})})(pdf);function create_fragment$2(W){let a;const R=W[5].default,n=create_slot(R,W,W[4],null);return{c(){n&&n.c()},l(I){n&&n.l(I)},m(I,L){n&&n.m(I,L),a=!0},p(I,[L]){n&&n.p&&(!a||L&16)&&update_slot_base(n,R,I,I[4],a?get_slot_changes(R,I[4],L,null):get_all_dirty_from_scope(I[4]),null)},i(I){a||(transition_in(n,I),a=!0)},o(I){transition_out(n,I),a=!1},d(I){n&&n.d(I)}}}const PDFWorker=readable(null,W=>{const a=new pdf.exports.PDFWorker;return W(a),()=>a.destroy()}),key=Symbol.for("current_doc");function instance$2(W,a,R){let n,I;component_subscribe(W,PDFWorker,v=>R(7,n=v));let{$$slots:L={},$$scope:O}=a;const F=createEventDispatcher();let{file:y=void 0}=a,{loadOptions:t=void 0}=a,{onProgress:c=void 0}=a,r=writable();component_subscribe(W,r,v=>R(8,I=v));let f;setContext(key,r),onDestroy(()=>{I==null||I.destroy(),I==null||I.cleanup(!1)});function u(){const v=I;r.set(null),f=pdf.exports.getDocument($e({url:y,worker:n},t)),f.onProgress=c,f.promise.then(x=>(v==null||v.destroy(),v==null||v.cleanup(),F("loadsuccess",x),x),x=>(F("loaderror",x),v)).then(r.set)}return W.$$set=v=>{"file"in v&&R(1,y=v.file),"loadOptions"in v&&R(2,t=v.loadOptions),"onProgress"in v&&R(3,c=v.onProgress),"$$scope"in v&&R(4,O=v.$$scope)},W.$$.update=()=>{W.$$.dirty&6&&u()},[r,y,t,c,O,L]}class Document extends SvelteComponent{constructor(a){super(),init(this,a,instance$2,create_fragment$2,safe_not_equal,{file:1,loadOptions:2,onProgress:3})}}function get_then_context(W){W[11]=W[12].default}function create_catch_block(W){return{c:noop,l:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_then_block(W){get_then_context(W);let a,R,n;var I=W[11];function L(O){return{props:{page:O[2],viewport:O[3],render_text_layer:O[0]==="canvas"?O[1]:void 0}}}return I&&(a=new I(L(W))),{c(){a&&create_component(a.$$.fragment),R=empty()},l(O){a&&claim_component(a.$$.fragment,O),R=empty()},m(O,F){a&&mount_component(a,O,F),insert_hydration(O,R,F),n=!0},p(O,F){get_then_context(O);const y={};if(F&4&&(y.page=O[2]),F&8&&(y.viewport=O[3]),F&3&&(y.render_text_layer=O[0]==="canvas"?O[1]:void 0),I!==(I=O[11])){if(a){group_outros();const t=a;transition_out(t.$$.fragment,1,0,()=>{destroy_component(t,1)}),check_outros()}I?(a=new I(L(O)),create_component(a.$$.fragment),transition_in(a.$$.fragment,1),mount_component(a,R.parentNode,R)):a=null}else I&&a.$set(y)},i(O){n||(a&&transition_in(a.$$.fragment,O),n=!0)},o(O){a&&transition_out(a.$$.fragment,O),n=!1},d(O){O&&detach(R),a&&destroy_component(a,O)}}}function create_pending_block(W){return{c:noop,l:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_fragment$1(W){let a,R,n,I={ctx:W,current:null,token:null,hasCatch:!1,pending:create_pending_block,then:create_then_block,catch:create_catch_block,value:12,blocks:[,,,]};return handle_promise(R=W[0]==="canvas"?import("./PageCanvas-68b7b78b.js"):Promise.reject("SVG rendering not implemented yet."),I),{c(){a=empty(),I.block.c()},l(L){a=empty(),I.block.l(L)},m(L,O){insert_hydration(L,a,O),I.block.m(L,I.anchor=O),I.mount=()=>a.parentNode,I.anchor=a,n=!0},p(L,[O]){W=L,I.ctx=W,O&1&&R!==(R=W[0]==="canvas"?import("./PageCanvas-68b7b78b.js"):Promise.reject("SVG rendering not implemented yet."))&&handle_promise(R,I)||update_await_block_branch(I,W,O)},i(L){n||(transition_in(I.block),n=!0)},o(L){for(let O=0;O<3;O+=1){const F=I.blocks[O];transition_out(F)}n=!1},d(L){L&&detach(a),I.block.d(L),I.token=null,I=null}}}function instance$1(W,a,R){let n,{renderer:I="canvas"}=a,{num:L}=a,{scale:O=1}=a,{rotation:F=0}=a,{renderTextLayer:y=!1}=a,{getViewport:t=void 0}=a;onDestroy(()=>r==null?void 0:r.cleanup());const c=getContext(key);component_subscribe(W,c,v=>R(10,n=v));let r,f,u;return W.$$set=v=>{"renderer"in v&&R(0,I=v.renderer),"num"in v&&R(5,L=v.num),"scale"in v&&R(6,O=v.scale),"rotation"in v&&R(7,F=v.rotation),"renderTextLayer"in v&&R(1,y=v.renderTextLayer),"getViewport"in v&&R(8,t=v.getViewport)},W.$$.update=()=>{W.$$.dirty&1056&&(n==null||n.getPage(L).then(v=>R(2,r=v))),W.$$.dirty&320&&R(9,u=t!=null?t:(v,x)=>v.getViewport({scale:O,rotation:x})),W.$$.dirty&644&&r&&R(3,f=u(r,F))},[I,y,r,f,c,L,O,F,t,u,n]}class Page extends SvelteComponent{constructor(a){super(),init(this,a,instance$1,create_fragment$1,not_equal,{renderer:0,num:5,scale:6,rotation:7,renderTextLayer:1,getViewport:8})}}function preferThisWidth(W){return(a,R=0)=>{const n=a.getViewport({scale:1,rotation:R}).width;return a.getViewport({scale:W/n,rotation:R})}}pdf.exports.GlobalWorkerOptions&&(pdf.exports.GlobalWorkerOptions.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${pdf.exports.version}/build/pdf.worker.min.js`);var index_svelte_svelte_type_style_lang="";function create_if_block_1(W){let a,R,n,I;return R=new Document({props:{file:base+"/"+filename,loadOptions:{docBaseUrl:base},$$slots:{default:[create_default_slot]},$$scope:{ctx:W}}}),R.$on("loadsuccess",W[6]),R.$on("loaderror",W[7]),{c(){a=element("div"),create_component(R.$$.fragment),this.h()},l(L){a=claim_element(L,"DIV",{class:!0});var O=children(a);claim_component(R.$$.fragment,O),O.forEach(detach),this.h()},h(){attr(a,"class","flex-container svelte-1i69q0a"),add_render_callback(()=>W[8].call(a))},m(L,O){insert_hydration(L,a,O),mount_component(R,a,null),n=add_resize_listener(a,W[8].bind(a)),I=!0},p(L,O){const F={};O&1039&&(F.$$scope={dirty:O,ctx:L}),R.$set(F)},i(L){I||(transition_in(R.$$.fragment,L),I=!0)},o(L){transition_out(R.$$.fragment,L),I=!1},d(L){L&&detach(a),destroy_component(R),n()}}}function create_if_block_2(W){let a,R,n,I,L,O,F,y,t,c,r,f,u,v,x,g;return{c(){a=element("div"),R=element("div"),n=element("button"),I=text("Prev"),O=space(),F=element("button"),y=text("Next"),c=space(),r=element("a"),f=element("button"),u=text("Download"),v=element("br"),this.h()},l(q){a=claim_element(q,"DIV",{class:!0});var j=children(a);R=claim_element(j,"DIV",{style:!0});var D=children(R);n=claim_element(D,"BUTTON",{class:!0});var w=children(n);I=claim_text(w,"Prev"),w.forEach(detach),O=claim_space(D),F=claim_element(D,"BUTTON",{style:!0,class:!0});var i=children(F);y=claim_text(i,"Next"),i.forEach(detach),D.forEach(detach),c=claim_space(j),r=claim_element(j,"A",{href:!0,download:!0});var l=children(r);f=claim_element(l,"BUTTON",{class:!0});var P=children(f);u=claim_text(P,"Download"),P.forEach(detach),l.forEach(detach),v=claim_element(j,"BR",{}),j.forEach(detach),this.h()},h(){attr(n,"class","outline nav-button svelte-1i69q0a"),n.disabled=L=W[0]==1,set_style(F,"margin-left","1em"),attr(F,"class","outline nav-button svelte-1i69q0a"),F.disabled=t=W[0]==W[1],set_style(R,"display","flex"),attr(f,"class","view-pdf-button svelte-1i69q0a"),attr(r,"href","https://robertnickel.online/master-thesis/report.pdf"),attr(r,"download","thesis_robert_nickel"),attr(a,"class","interaction svelte-1i69q0a")},m(q,j){insert_hydration(q,a,j),append_hydration(a,R),append_hydration(R,n),append_hydration(n,I),append_hydration(R,O),append_hydration(R,F),append_hydration(F,y),append_hydration(a,c),append_hydration(a,r),append_hydration(r,f),append_hydration(f,u),append_hydration(a,v),x||(g=[listen(n,"click",W[4]),listen(F,"click",W[5])],x=!0)},p(q,j){j&1&&L!==(L=q[0]==1)&&(n.disabled=L),j&3&&t!==(t=q[0]==q[1])&&(F.disabled=t)},d(q){q&&detach(a),x=!1,run_all(g)}}}function create_default_slot(W){let a,R,n,I,L;R=new Page({props:{scale,num:W[0],renderTextLayer,rotation,getViewport:W[3]>=800?preferThisWidth(W[3]/2.4):preferThisWidth(W[3])}});let O=W[2]&&create_if_block_2(W);return{c(){a=element("div"),create_component(R.$$.fragment),n=space(),O&&O.c(),I=empty(),this.h()},l(F){a=claim_element(F,"DIV",{class:!0});var y=children(a);claim_component(R.$$.fragment,y),y.forEach(detach),n=claim_space(F),O&&O.l(F),I=empty(),this.h()},h(){attr(a,"class","preview svelte-1i69q0a")},m(F,y){insert_hydration(F,a,y),mount_component(R,a,null),insert_hydration(F,n,y),O&&O.m(F,y),insert_hydration(F,I,y),L=!0},p(F,y){const t={};y&1&&(t.num=F[0]),y&8&&(t.getViewport=F[3]>=800?preferThisWidth(F[3]/2.4):preferThisWidth(F[3])),R.$set(t),F[2]?O?O.p(F,y):(O=create_if_block_2(F),O.c(),O.m(I.parentNode,I)):O&&(O.d(1),O=null)},i(F){L||(transition_in(R.$$.fragment,F),L=!0)},o(F){transition_out(R.$$.fragment,F),L=!1},d(F){F&&detach(a),destroy_component(R),F&&detach(n),O&&O.d(F),F&&detach(I)}}}function create_if_block(W){let a,R,n,I,L,O,F,y,t,c,r;return{c(){a=element("article"),R=element("a"),n=text("Try Lightbulb Learning"),I=element("br"),L=space(),O=element("a"),F=text("Lightbulb Learning on GitHub"),y=element("br"),t=space(),c=element("p"),r=text("\xA9 Robert Nickel 2022"),this.h()},l(f){a=claim_element(f,"ARTICLE",{style:!0});var u=children(a);R=claim_element(u,"A",{href:!0});var v=children(R);n=claim_text(v,"Try Lightbulb Learning"),v.forEach(detach),I=claim_element(u,"BR",{}),L=claim_space(u),O=claim_element(u,"A",{href:!0});var x=children(O);F=claim_text(x,"Lightbulb Learning on GitHub"),x.forEach(detach),y=claim_element(u,"BR",{}),t=claim_space(u),c=claim_element(u,"P",{});var g=children(c);r=claim_text(g,"\xA9 Robert Nickel 2022"),g.forEach(detach),u.forEach(detach),this.h()},h(){attr(R,"href","https://lightbulb-learning.io"),attr(O,"href","https://github.com/Lightbulb-Learning/lightbulb-learning"),set_style(a,"margin-bottom","0"),set_style(a,"text-align","center")},m(f,u){insert_hydration(f,a,u),append_hydration(a,R),append_hydration(R,n),append_hydration(a,I),append_hydration(a,L),append_hydration(a,O),append_hydration(O,F),append_hydration(a,y),append_hydration(a,t),append_hydration(a,c),append_hydration(c,r)},d(f){f&&detach(a)}}}function create_fragment(W){let a,R,n,I=create_if_block_1(W),L=W[2]&&create_if_block();return{c(){I&&I.c(),a=space(),L&&L.c(),R=empty()},l(O){I&&I.l(O),a=claim_space(O),L&&L.l(O),R=empty()},m(O,F){I&&I.m(O,F),insert_hydration(O,a,F),L&&L.m(O,F),insert_hydration(O,R,F),n=!0},p(O,[F]){I.p(O,F),O[2]?L||(L=create_if_block(),L.c(),L.m(R.parentNode,R)):L&&(L.d(1),L=null)},i(O){n||(transition_in(I),n=!0)},o(O){transition_out(I),n=!1},d(O){I&&I.d(O),O&&detach(a),L&&L.d(O),O&&detach(R)}}}let scale=1,filename="./report.pdf",renderTextLayer=!1,rotation=0;function instance(W,a,R){pdf.exports.GlobalWorkerOptions&&(pdf.exports.GlobalWorkerOptions.workerSrc=workerSrc);let n=1,I=1,L=!1,O=0;const F=()=>R(0,n--,n),y=()=>R(0,n++,n),t=f=>{R(1,I=f.detail.numPages),R(0,n=Math.min(n,I)),R(2,L=!0)},c=f=>alert(f.detail+"");function r(){O=this.clientWidth,R(3,O)}return[n,I,L,O,F,y,t,c,r]}class Routes extends SvelteComponent{constructor(a){super(),init(this,a,instance,create_fragment,safe_not_equal,{})}}export{Routes as R,pdf as p};
